var app=app||{};app.define=function(e){var t,n=e.split("."),a=app;for("app"==n[0]&&(n=n.slice(1)),t=0;t<n.length;t++)"undefined"==typeof a[n[t]]&&(a[n[t]]={}),a=a[n[t]];return a},app.tag=function(e,t){if(window.riot){if(!t||!window.$afterlag)return _.filter(riot.vdom?riot.vdom:riot.util.vdom,function(t){if(t.root.nodeName.toLowerCase()==e)return t})[0];var n=app.tag(e);n&&n.isMounted?t(n):$afterlag.run(function(){var n=app.tag(e);n&&(n.isMounted?t(n):app.tag(e).one("updated",function(){t(n)}))})}},window.Store=window.store||{},window.$store={},function(){app.url=function(){return(app.config.domain?app.config.domain:"")+app.config.api},app.fetch=function(e){var t=[],n=[],a=e.split(", ");return new Promise(function(e,o){for(i=0;i<a.length;i++)_.isFunction(app.fetch.API[a[i]])&&t.push(a[i]);a.length!==t.length&&(n=_.difference(a,t)),Promise.all(t.map(app.fetch.API).concat(n.map(app.request))).then(function(t){e(t)})})},app.requestList=function(e,t,n){var a=[],t=t||[],n=n||[],o=e.split(", ");return new Promise(function(e,r){for(i=0;i<o.length;i++)a.push(o[i]);Promise.all(a.map(function(e,a){return app.request(e,t[a],n[a])})).then(function(t){e(t)},function(e){r(e)})})},app.request=function(e,t,n){return new Promise(function(a,o){if(!app.config.request)return void a(!0);var i=_.underscored(e).replace(/^(get|set|add|del)/g,"").replace(/_/g,"/"),r=null,s=app.config.request();if(n&&_.extend(s,n),e.match(/^get/)?r="GET":e.match(/^set/)?r="PUT":e.match(/^add/)?r="POST":e.match(/^del/)&&(r="DELETE"),!r)return void o("Error type request: "+e);"GET"===r&&t&&(i+="/"+t,t=null),s.loader&&window.$LoaderAjax&&$LoaderAjax.show();var u=new XMLHttpRequest;u.open(r,app.url()+i,!0),u.setRequestHeader("Accept","application/json"),u.setRequestHeader("Content-Type","application/json");try{app.request.list&&app.request.list.method===e&&app.request.list.params==JSON.stringify(t)&&app.request.list.xhr.abort(),u.send(t?JSON.stringify(t):{})}catch(e){}u.onload=function(e){try{if(200==this.status){var t=JSON.parse(this.response);a("OK"===t.status&&t.result?t.result:t)}else{s.notify&&app.errHandler(this.status);var n=new Error(this.statusText);n.code=this.status,o(n)}}catch(e){}app.request.list={},s.loader&&window.$LoaderAjax&&$LoaderAjax.hide()},u.onerror=function(){o(new Error("Network Error")),s.loader&&window.$LoaderAjax&&$LoaderAjax.hide()};try{app.request.list={method:e,xhr:u,params:JSON.stringify(t)}}catch(e){}})},app.errHandler=function(e){401==e?window.$Notify?$Notify.show({color:"info",text:"Авторизируйтесь снова"}):alert("Авторизируйтесь снова"):window.$Notify?$Notify.show({color:"danger",text:"Ошибка проведения операции повторите ее чуть позже"}):alert("Ошибка проведения операции повторите ее чуть позже")};var e=function(e,t,n){app.request(app.config.logger.method,{data:{msg:e,line:n,url:t},device:app.device.get(),type:"error"},{loader:!1,notify:!1})},t=_.debounce(e,1e3,!0);window.onerror=function(e,n,a){app&&app.config&&app.config.logger&&app.config.logger.report&&t(e,n,a)}}(),window.$afterlag={run:function(e,t){var n={delay:0,iterations:1};t&&_.extend(n,t);var a=new Afterlag(n);a.run(e)},xs:function(e,t){var n={iterations:2,timeout:200};t&&_.extend(n,t),$afterlag.run(e,n)},s:function(e,t){var n={iterations:3,timeout:300};t&&_.extend(n,t),$afterlag.run(e,n)},m:function(e,t){var n={iterations:5,timeout:500};t&&_.extend(n,t),$afterlag.run(e,n)},l:function(e,t){var n={iterations:7,timeout:700};t&&_.extend(n,t),$afterlag.run(e,n)},xl:function(e,t){var n={iterations:10,timeout:1e3};t&&_.extend(n,t),$afterlag.run(e,n)}},function(e){app.define("config"),app.define("effects"),app.define("sizes"),app.define("utils"),app.define("plugins"),app.define("device"),app.define("events"),app.define("loader"),app.define("$dom"),app.$dom={html:e("html"),body:e("body"),document:e(document),window:e(window),root:e("#app")},app.events={click:document&&"ontouchstart"in document.documentElement?"tap":"click"},app.keys={LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:8,TAB:9,RETURN:13,ENTER:13,ESC:27,PAGEUP:33,PAGEDOWN:34,SPACE:32},window.KEY=app.keys,app.prefixed={transform:Modernizr.prefixed("transform"),"transform-origin":Modernizr.prefixed("transformOrigin"),"transition-duration":Modernizr.prefixed("transitionDuration")},$$=window.jQuery,window.moment&&moment.locale("ru"),e.fn.api=function(e){return this.data(e)?this.data(e):this.data(e,{}).data(e)}}($),function(e,t){t.init=function(n){if(n){var a,o=n.split("."),i=e;for(a=0;a<o.length;a++)i=i[o[a]];i&&"function"==typeof i.init?(i.init(),t.log("Initialize: <"+n+"> ready")):t.log("ERROR: <"+n+"> initialize")}},t.is=function(n,a){if(n){var o,i=n.split("."),r=e;for(o=0;o<i.length;o++)r=r[i[o]];r?a&&"function"==typeof a&&a():t.log("NOT found: <"+n+">")}},t.log=function(e){e&&("object"==typeof e?console.dir(e):console.log(e))},t.logger=function(e,n){e&&n&&("init"===e?t.log("Initialize: <"+n+"> ready"):"open"===e?t.log("OPEN: <"+n+">"):"close"===e?t.log("CLOSE: <"+n+">"):t.log(e+": <"+n+">"))},t.random=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},t.template=function(n,a,o){if(!e.templates[n])return void t.log("NOT found: <"+n+"> template");var i=Mustache.render(e.templates[n](),a?a:{}),r=$(i).appendTo(o?o:e.$dom.root);return r},t.copyArray=function(e){var n=null===e?null:t.isObject(e)?{}:[];for(var a in e)"object"==typeof e[a]&&"prototype"!==a?n[a]=t.copyArray(e[a]):n[a]=e[a];return n},t.sortArray=function(e,t,n){var a=_.sortBy(e,function(e){return e[t]});return"desc"===n?a.reverse():a},t.sortByDate=function(e,t,n){if(!window.moment)return e;var a=_.sortBy(e,function(e){return moment(e[t]).format("X")});return"desc"===n?a.reverse():a},t.isArray=function(e){if(e&&"[object Array]"===Object.prototype.toString.call(e))return!0},t.isFunction=function(e){if(e&&"function"==typeof e)return!0},t.fixTouchScroll=function(t,n){var a=null,o=null;t.on("touchmove MSPointerMove",function(t){if(0===o){var n=t.changedTouches[0].clientY;n<a?(a=0,t.preventDefault()):e.device&&e.device.isIOS?setTimeout(function(){a=n},1e3):a=n}}),n.on("scroll",function(){o=this.scrollTop})},t.raf=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;return t?t(e):window.setTimeout(e,1e3/60)},t.caf=function(e){var t=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;t(e),e=null},t.support={transitions:Modernizr.csstransitions},t.transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},t.transEndEventName=t.transEndEventNames[Modernizr.prefixed("transition")],t.animEndEventNames={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},t.animEndEventName=t.animEndEventNames[Modernizr.prefixed("animation")],t.onEndTransition=function(e,n){var a=function(e){if(t.support.transitions){if(e.target!=this)return;this.removeEventListener(t.transEndEventName,a)}n&&"function"==typeof n&&n.call(this)};t.support.transitions?e.addEventListener(t.transEndEventName,a):a()},t.onEndAnimation=function(e,n){var a=function(e){if(t.support.transitions){if(e.target!=this)return;this.removeEventListener(t.animEndEventName,a)}n&&"function"==typeof n&&n.call(this)};t.support.transitions?e.addEventListener(t.animEndEventName,a):a()},t.onLoadImage=function(e,t){function n(){i||(i=!0,t(!0))}function a(){t(!1)}var o=new Image,i=!1;o.src=e,o.onerror=a,o.onload=n,o.complete&&n()},t.getSizeImage=function(e,t){function n(){i||(i=!0,t(o.naturalWidth,o.naturalHeight))}function a(){t(!1)}var o=new Image,i=!1;o.src=e,o.onerror=a,o.onload=n,o.complete&&n()},t.getBoundingClientRect=function(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}},t.getScroll=function(e){var t=e.x*-1,n=e.y*-1,a=e.maxScrollX*-1,o=e.maxScrollY*-1;return{x:t,y:n,maxX:a,maxY:o}},t.throttle=function(e,t){var n=!0;return function(a){n&&(n=!1,setTimeout(function(){n=!0},t),e(a))}},t.debounce=function(e,t,n,a){3==arguments.length&&"boolean"!=typeof n&&(a=n,n=!1);var o;return function(){var i=arguments;a=a||this,n&&!o&&e.apply(a,i),clearTimeout(o),o=setTimeout(function(){!n&&e.apply(a,i),o=null},t)}},t.indexOf=function(e,t,n){for(var a=n||0,o=(e||[]).length;a<o;a++)if(e[a]==t)return a;return-1},t.inArray=function(e,n){return t.indexOf(e,n)!=-1},t.trim=function(e){return(e&&String(e)||"").replace(/^\s+|\s+$/g,"")},t.underscored=function(e){return t.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},t.deepExtend=function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]&&"object"==typeof n[a]?t.deepExtend(e[a],n[a]):e[a]=n[a]);return e},t.deepFindWhere=function(e,n,a,o){if(e instanceof Array)for(var i=0;i<e.length;i++)o=t.deepFindWhere(e[i],n,a,o);else for(var r in e)r==n&&e[r]==a&&(o=e),(e[r]instanceof Object||e[r]instanceof Array)&&(o=t.deepFindWhere(e[r],n,a,o));return o},t.numberFormat=function(e,t,n,a){if(isNaN(e)||null==e)return"";e=parseInt(e).toFixed(~~t),a="string"==typeof a?a:",";var o=e.split("."),i=o[0],r=o[1]?(n||".")+o[1]:"";return i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+a)+r},t.clean=function(e,n){return e=t.trim(e),e?e:void 0!==n?n:null},t.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},t.isEmail=function(e){return e.match(/.+@.+\..+/i)},t.newId=function(){return String(Math.round((new Date).getTime()/1e3))},t.isJSON=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},t.opener=function(e){var t=window.open();t.opener=null,t.location=e},t.getDateNow=function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),a=e.getSeconds(),o=e.getMonth()+1,i=e.getDate(),r=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),a<10&&(a="0"+a),o<10&&(o="0"+o),i<10&&(i="0"+i),r+"-"+o+"-"+i+" "+t+":"+n+":"+a},Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},t.getDates=function(e,t){for(var n=new Array,a=e;a<=t;)n.push(new Date(a)),a=a.addDays(1);return n},t.supportClipboard=function(){return!!(window.clipboardData&&window.clipboardData.setData||document.queryCommandSupported&&document.queryCommandSupported("copy"))},t.copyToClip=function(e){if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(e){return console.warn("Copy to clipboard failed.",e),!1}finally{document.body.removeChild(t)}}},t.bbUpdate=function(e,t){e.on("update",function(e){var n=e.data&&e.data.transaction&&e.data.transaction.length&&e.data.transaction[0].path?e.data.transaction[0].path[0]:null,a=e.data&&e.data.transaction&&e.data.transaction.length?e.data.transaction[0].value:null;t(n,a,e)})},t.getCookie=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},t.setCookie=function(e,t,n){n=n||{};var a=n.expires;if("number"==typeof a&&a){var o=new Date;o.setTime(o.getTime()+1e3*a),a=n.expires=o}a&&a.toUTCString&&(n.expires=a.toUTCString()),t=encodeURIComponent(t);var i=e+"="+t;for(var r in n){i+="; "+r;var s=n[r];s!==!0&&(i+="="+s)}document.cookie=i},window.moment&&(t.moment=window.moment),window._?_.extend(_,t):window._=t,e.utils=window._}(app,app.utils),function(e){e.history=[],e.resources=function(t,n,a){n=n||$.noop,a=a||$.noop;for(var o=[],i=0;i<t.length;i++)e.history.indexOf(t[i])<0&&o.push(t[i]);return o.length?void Modernizr.load({load:o,callback:function(t){e.history.push(t),a()},complete:n}):n()},e.images=function(e,t,n){var a=0;t=t||$.noop,n=n||$.noop,e.imagesLoaded({background:".bg-cover"}).always(t).progress(function(e){a++,n(a,e.images.length)})}}(app.loader),function(e,t){var n=function(){e.width=t.window.width(),e.height=parseInt(window.innerHeight,10),e.width<=735?e.size="small":e.width>=736&&e.width<=1068?e.size="medium":e.width>=1069&&e.width<=1441?e.size="large":e.width>=1442&&(e.size="xlarge")};t.window.on("resize.app",n),n()}(app.sizes,app.$dom),function(e,t,n){e.support=Modernizr,e.isMobile=e.support.touch,"true"==t.root.attr("demo")&&(app.demo=!0,t.window.width()<1025&&(e.isMobile=!0,t.html.removeClass("m-no-touch").addClass("m-touch"))),t.html.addClass(e.isMobile?"d-mobile":"d-no-mobile"),e.isRetina=window.devicePixelRatio&&window.devicePixelRatio>1,t.html.addClass(e.isRetina?"d-retina":"d-no-retina");var a=function(){var n=app.sizes.width||t.window.width();e.isPhone=n<768,e.isTablet=n<1025&&n>767,e.orientation=e.isTablet&&n<1025&&n>991||e.isPhone&&n>480?"landscape":"portrait",t.html.addClass(e.isPhone?"d-phone":"d-no-phone").removeClass(e.isPhone?"d-no-phone":"d-phone").addClass(e.isTablet?"d-tablet":"d-no-tablet").removeClass(e.isTablet?"d-no-tablet":"d-tablet").addClass("landscape"===e.orientation?"r-landscape":"r-portrait").removeClass("landscape"!==e.orientation?"r-landscape":"r-portrait"),app.sizes.size&&app.sizes.size.match(/large/)?"large"===app.sizes.size?t.html.addClass("d-largeScreen").removeClass("d-xlargeScreen"):"xlarge"===app.sizes.size&&t.html.addClass("d-xlargeScreen").removeClass("d-largeScreen"):t.html.removeClass("d-largeScreen d-xlargeScreen"),e.is=e.isPhone?"phone":e.isTablet?"tablet":"desktop"};if(t.window.on("resize.sizeCheck",a),a(),e.ua=navigator.userAgent,navigator.userAgent.match(/(iPhone)/i)&&(e.isPhone=!0),navigator.userAgent.match(/iPad/i)&&(t.html.addClass("d-ipad"),e.isIPad=!0),navigator.userAgent.match(/(iPhone|iPod touch)/i)&&(t.html.addClass("d-iphone"),e.isIPhone=!0),navigator.userAgent.match(/(iPad|iPhone|iPod touch)/i)){t.html.addClass("d-ios"),e.isIOS=!0;var o=navigator.userAgent.match(/.*CPU.*OS (\d)_(\d)/i);e.verOS=!(!o||!o[1])&&o[1]+(o[2]?"."+o[2]:"")}else t.html.addClass("d-no-ios");if(navigator.userAgent.match(/.*CPU.*OS 7_\d/i)&&(t.html.addClass("d-ios7"),e.isIOS7=!0),navigator.userAgent.match(/Android/i)){t.html.addClass("d-android"),e.isAndroid=!0;var o=navigator.userAgent.match(/Android (\d)\.(\d)/i);e.verOS=!(!o||!o[1])&&o[1]+(o[2]?"."+o[2]:"")}if(app.device.isMobile&&(e.os=e.isAndroid?"android":e.isIOS?"ios":"unknown"),t.html.hasClass("d-ipad d-ios7")&&t.window.on("resize orientationchange focusout",function(){window.scrollTo(0,0)}),e.isWin=navigator.platform.indexOf("Win")>-1,e.isMac=navigator.platform.indexOf("Mac")>-1,e.isLinux=navigator.platform.indexOf("Linux")>-1,t.html.addClass(e.isMac?"d-macOS":"d-no-macOS"),e.platform=e.isWin?"win":e.isMac?"mac":e.isLinux?"linux":"unknown",e.isChrome=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,t.html.addClass(e.isChrome?"d-chrome":"d-no-chrome"),e.isSafari=!e.isChrome&&navigator.userAgent.toLowerCase().indexOf("safari")>-1,t.html.addClass(e.isSafari?"d-safari":"d-no-safari"),e.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,t.html.addClass(e.isFirefox?"d-firefox":"d-no-firefox"),e.isMobile&&window.FastClick&&"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1),!e.isMobile){var i,r=t.body[0];t.window[0].addEventListener("scroll",function(){clearTimeout(i),r.getAttribute("class")&&r.getAttribute("class").match(/disable__hover/)||r.classList.add("disable__hover"),i=setTimeout(function(){r.classList.remove("disable__hover")},300)},!1)}app.device.get=function(){return n.extend(n.omit(app.device,["get","support"]),{screen:app.sizes})}}(app.device,app.$dom,app.utils),function(e,t,n,a,o){e.define("commons.EventEmitterMicro"),e.commons.EventEmitterMicro=function(){this._events={}},e.commons.EventEmitterMicro.prototype={on:function(e,t){this._events[e]=this._events[e]||[],this._events[e].unshift(t)},once:function(e,t){function n(o){a.off(e,n),void 0!==o?t(o):t()}var a=this;this.on(e,n)},off:function(e,t){if(e in this._events!=!1){var n=this._events[e].indexOf(t);n!==-1&&this._events[e].splice(n,1)}},trigger:function(e,t){if(e in this._events!=!1)for(var n=this._events[e].length-1;n>=0;n--)void 0!==t?this._events[e][n](t):this._events[e][n]()},destroy:function(){for(var e in this._events)this._events[e]=null;this._events=null}}}(app,$,app.$dom,app.events,app.utils),function(e,t,n,a,o){e.define("features.links"),e.features.links={active:!1,init:function(){this.active||(n.body.on("click","a",function(e){var t=this.getAttribute("href");t&&"#"!=t&&!t.match(/http:/)&&n.body.addClass("appLoading")}),this.active=!0)}};e.features.links}(app,$,app.$dom,app.events,app.utils),function(e,t,n,a,o){e.define("features.jobsSearch"),e.features.jobsSearch={init:function(){$store.jobs.apiUrl="https://api.hh.ru/vacancies?";var e=Url.parseQuery(),t={area:null,metro:null,salary:null,specialization:null,industry:null,experience:null,employment:null,schedule:null,label:null,order_by:e.order_by?e.order_by:"relevance",period:e.period?e.period:"30",page:e.page?parseInt(e.page):0,pages:$store.jobs.pages?parseInt($store.jobs.pages):0,per_page:20};$store.jobs.state&&o.extend(t,$store.jobs.state),$State=new Baobab(t)}};e.features.jobsSearch}(app,$,app.$dom,app.events,app.utils),app.config={domain:null,api:"/public/api",request:function(){return{loader:!1,notify:!0}},logger:{method:"addLog",report:!1},share:{title:"Создать крутое резюме и получить престижную работу"},changeStyles:!0},function(){app.define("metrics.public"),app.metrics.public={ver:"1.0",plan:{name:"free",period:"month"},tooltips:{regSocial:!1},views:{home:0,premium:0,jptest:0,blog:0},offers:{popup:{blog:{subscribe:{show:!1,hide:!1,success:!1,email:!1}}}}}}(),function(e,t,n,a,o){e.define("sections"),e.sections={init:function(t){var t=t||{};$Sections=new e.plugins.define("$Sections"),$Screens=new e.plugins.define("$Screens"),o.isFunction(t.beforeInit)&&t.beforeInit(),o.each(e.sections,function(e){e.init&&e.init()}),o.isFunction(t.afterInit)&&t.afterInit()}},o.extend(e.sections,new e.commons.EventEmitterMicro)}(app,$,app.$dom,app.events,app.utils),$store.jobs=$store.jobs||{},$store.jobs.dictionary=new Baobab({vacancy_search_order:[{id:"publication_time",name:"по дате"},{id:"salary_desc",name:"по убыванию зарплаты"},{id:"salary_asc",name:"по возрастанию зарплаты"},{id:"relevance",name:"по соответствию"}],vacancy_search_period:[{id:"30",name:"за месяц"},{id:"7",name:"за неделю"},{id:"3",name:"за 3 дня"},{id:"1",name:"за сутки"}],currency:[{rate:1,code:"RUR",abbr:"руб.",in_use:!0,default:!0,name:"Рубли"},{rate:.031187,code:"AZN",abbr:"AZN",in_use:!1,default:!1,name:"Манаты"},{rate:.032631,code:"BYR",abbr:"бел. руб.",in_use:!1,default:!1,name:"Белорусские рубли"},{rate:.016542,code:"EUR",abbr:"EUR",in_use:!0,default:!1,name:"Евро"},{rate:.0344,code:"GEL",abbr:"GEL",in_use:!1,default:!1,name:"Грузинский лари"},{rate:1.202315,code:"KGS",abbr:"KGS",in_use:!1,default:!1,name:"Киргизский сом"},{rate:5.444251,code:"KZT",abbr:"KZT",in_use:!1,default:!1,name:"Тенге"},{rate:.469585,code:"UAH",abbr:"грн.",in_use:!1,default:!1,name:"Гривны"},{rate:.017399,code:"USD",abbr:"USD",in_use:!0,default:!1,name:"Доллары"},{rate:57.501998,code:"UZS",abbr:"UZS",in_use:!1,default:!1,name:"Узбекский сум"}]}),function(){$store.jobs=$store.jobs||{},$store.jobs.favorites={get:{items:function(t){var n=Store.get("vacancyFavorites");return"dateDesc"==t?_.sortByDate(n,"dateAdd","desc"):"salaryDesc"==t?_.sortBy(n,function(t){return e.get.salary(t)}).reverse():"salaryAsc"==t?_.sortBy(n,function(t){return e.get.salary(t)}):n},salary:function(t){return t.salary?t.salary.to?e.get.oneFormat(t.salary.to,t.salary.currency):e.get.oneFormat(t.salary.from,t.salary.currency):"0"},oneFormat:function(e,t){return e*(1/_.findWhere($store.jobs.dictionary.get("currency"),{code:t}).rate)}},add:function(t){t&&!e.isFavorite(t.id)&&(t.dateAdd=moment().format(),Store.set("vacancyFavorites",Store.get("vacancyFavorites").concat([t]))),e.trigger("update")},remove:function(t){if(t&&e.isFavorite(t)){var n=Store.get("vacancyFavorites"),a=null;_.each(n,function(e,n){e.id==t&&(a=n)}),n.splice(a,1),Store.set("vacancyFavorites",n)}e.trigger("update")},isFavorite:function(e){if(e)return!_.isEmpty(_.findWhere(Store.get("vacancyFavorites"),{id:e}))},dropMenu:[{_id:"dateDesc",title:"по дате добавления"},{_id:"salaryDesc",title:"по убыванию зарплаты"},{_id:"salaryAsc",title:"по возрастанию зарплаты"}]},_.extend($store.jobs.favorites,new app.commons.EventEmitterMicro);var e=$store.jobs.favorites}(),function(e,t,n,a,o){e.define("plugins.define"),e.plugins.define=function(e){this.__name__=e,o.extend(this,window[e]||{})},e.plugins.define.prototype={module:function(e,t){var n,a=e.split("."),o=window[this.__name__],i=a.length;for(n=0;n<i;n++)"undefined"==typeof o[a[n]]&&(o[a[n]]={}),i-1==n&&t&&(o[a[n]]=t),o=o[a[n]];return o}}}(app,$,app.$dom,app.events,app.utils),function(e,t,n,a,o){e.define("plugins.sections"),e.plugins.sections=function(e,t){this.scope=e,this.active=!1,this.options=t||{},this.content=this.options.content||this.scope},e.plugins.sections.prototype={show:function(e){if(!this.active){var n=this,e=e||{};if(this.scroll=e&&e.scroll||null,e.forceShow){this.active=!0;var a=t(this.content);return a.addClass("transition-none"),this.scope.setAttribute("data-inner","show"),this.scope.setAttribute("data-open",!0),e.scroll&&(e.scroll.refresh(),e.scroll.scrollTop()),o.isFunction(e.beforeShow)&&e.beforeShow(),e.update&&e.tag?(e.tag.update(e.update),e.tag.one("updated",function(){o.isFunction(e.afterShow)&&e.afterShow()})):o.isFunction(e.afterShow)&&e.afterShow(),void $afterlag.run(function(){a.removeClass("transition-none")})}this.scope.setAttribute("data-open",!0),this.scope.setAttribute("data-loading",!0),o.isFunction(e.beforeShow)&&e.beforeShow(),o.onEndTransition(this.content,function(){o.isFunction(e.callback)?e.callback(n._afterShow.bind(n),n.hide.bind(n)):e.update&&e.tag?(e.tag.one("updated",function(){n._afterShow(e)}),e.tag.update(e.update)):n._afterShow(e),n.active=!0})}},_afterShow:function(e){var t=this,e=e||{};this.scope.setAttribute("data-inner","show"),$afterlag.run(function(){t.scroll&&(t.scroll.refresh(),t.scroll.scrollTop()),t.scope.setAttribute("data-loading",!1),o.isFunction(e.afterShow)&&e.afterShow()})},loading:function(e){var t=this;e?(this.scope.setAttribute("data-inner","hidden"),this.scope.setAttribute("data-loading",!0)):(this.scope.setAttribute("data-inner","show"),$afterlag.run(function(){t.scope.setAttribute("data-loading",!1)}))},hide:function(e){if(this.active){var t=this,e=e||{};this.scope.setAttribute("data-open",!1),this.scope.setAttribute("data-loading",!1),o.isFunction(e.beforeHide)&&e.beforeHide(),o.onEndTransition(this.content,function(){t.scope.setAttribute("data-inner","hidden"),o.isFunction(e.afterHide)&&e.afterHide(),t.active=!1})}}}}(app,$,app.$dom,app.events,app.utils),function(e,t,n,a,o){e.define("plugins.metrika"),e.plugins.metrika=function(e){return e?(this.state=e.data,this.previousState=e.previousData,this.visits=e.visits,this.device=e.device,this.readOnly=e.readOnly,this.key=e.key,this.report=e.report,void this.init()):(this.get=function(){},void(this.set=function(){}))},e.plugins.metrika.prototype={init:function(){if(!this.active&&(this.key||console.log("Not available key attribute"),this.state||console.log("Not available data attribute"),this.key&&this.state)){var t=this,n=this.state,a=this.key,i=Store.get(a),r=this.previousState?this.previousState.date:null,s=i&&i.ver||this.previousState&&this.previousState.ver;this.readOnly||(s&&s!=n.ver?Store.set(a,{ver:n.ver}):i&&!r?o.deepExtend(n,i):r&&(i=window.moment&&i&&i.date?moment(r).diff(moment(i.date))>0?this.previousState:i:this.previousState,o.deepExtend(n,i))),this.visits&&(n.visits=this.visits),this.device&&(n.device=e.device&&e.device.get?e.device.get():null),this.state=new Baobab(n,{autoCommit:!0}),this.readOnly||(this.state.on("write",function(e){Store.set(a,t.state.get())}),Store.set(a,this.state.get())),this.report&&this.logger(),this.active=!0}},set:function(e,t,n){if(e&&this.active&&!this.readOnly){var n=n||{};if("inc"==n.action){var a=this.state.get(e.split("."))||0;this.state.select(e.split(".")).set(a+t)}else if("dec"==n.action){var a=this.state.get(e.split("."))||0;this.state.select(e.split(".")).set(a-t)}else this.state.select(e.split(".")).set(t);n.force&&this.logger.request()}},get:function(e){if(e&&this.active)return this.state.get(e.split("."))},logger:function(){var t=this,n=this.report.method,a=this.report.interval;this.logger.request=function(){var a=t.state.get(),o=JSON.stringify(a);t.lastState!=o&&(t.lastState=o,e.request(n,a,{loader:!1,notify:!1}))},n&&a&&(this.lastState=JSON.stringify(this.state.get()),setInterval(function(){t.logger.request()},1e3*a))}}}(app,$,app.$dom,app.events,app.utils),function(e,t,n,a,o){e.define("plugins.share"),e.plugins.share=function(e,n){e&&n&&(this.scope=t(e),this.options=n,this.init())},e.plugins.share.prototype={init:function(){var e=this,t=this.options;this.active||(this.scope.on("click",t.buttons,function(n){var a=n.currentTarget,i=t.dataAttr?"data-"+t.dataAttr:"data-social",r=a.getAttribute(i);if(r){var s=t.share&&t.share.title||document.title,u=t.url||window.location.href;"fb"==r?e.fb(u,o.isFunction(s)?s():s):"vk"==r?e.vk(u,o.isFunction(s)?s():s):"gl"==r?e.gl(u,o.isFunction(s)?s():s):"dk"==r?e.dk(u,o.isFunction(s)?s():s):"tw"==r&&e.tw(u,o.isFunction(s)?s():s)}}),this.active=!0)},vk:function(e,t,n,a){url="http://vkontakte.ru/share.php?",url+="url="+encodeURIComponent(e),url+="&title="+encodeURIComponent(t),n&&(url+="&image="+encodeURIComponent(n)),a&&(url+="&description="+encodeURIComponent(a)),url+="&noparse=true",this.popup(url)},dk:function(e,t){url="http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1",url+="&st.comments="+encodeURIComponent(t),url+="&st._surl="+encodeURIComponent(e),this.popup(url)},fb:function(e,t,n,a){url="http://www.facebook.com/sharer.php?",url+="&p[title]="+encodeURIComponent(t),url+="&p[url]="+encodeURIComponent(e),n&&(url+="&p[images][0]="+encodeURIComponent(n)),a&&(url+="&p[summary]="+encodeURIComponent(a)),this.popup(url)},tw:function(e,t){url="http://twitter.com/share?",url+="text="+encodeURIComponent(t),url+="&url="+encodeURIComponent(e),url+="&counturl="+encodeURIComponent(e),this.popup(url)},ml:function(e,t,n,a){url="http://connect.mail.ru/share?",url+="url="+encodeURIComponent(e),url+="&title="+encodeURIComponent(t),n&&(url+="&imageurl="+encodeURIComponent(n)),a&&(url+="&description="+encodeURIComponent(a)),this.popup(url)},gl:function(e){url="https://plus.google.com/share?",url+="url="+encodeURIComponent(e),this.popup(url)},popup:function(e){window.open(e,"","width=600,height=400,left=350,top=170,status=no,toolbar=no,menubar=no")},destroy:function(){this.scope.off(),this.active=!1}}}(app,$,app.$dom,app.events,app.utils),function(e,t,n,a,o){e.define("plugins.scroll.refreshFix"),e.plugins.scroll.refreshFix=function(e){e&&(this.active=!1,this.scroll=o.isElement(e)?e:e[0],this.reset(),this.init())},e.plugins.scroll.refreshFix.prototype={init:function(){this.active||(this.scroll.addEventListener("touchstart",this.touchstartHandler.bind(this),!1),this.scroll.addEventListener("touchmove",this.touchmoveHandler.bind(this),!1),this.active=!0)},touchstartHandler:function(e){1==e.touches.length&&(this.lastTouchY=e.touches[0].clientY,this.maybePreventPullToRefresh=0==window.pageYOffset)},touchmoveHandler:function(e){var t=e.touches[0].clientY,n=t-this.lastTouchY;if(this.lastTouchY=t,this.maybePreventPullToRefresh&&(this.maybePreventPullToRefresh=!1,n>0))return void e.preventDefault()},reset:function(){this.maybePreventPullToRefresh=!1,this.lastTouchY=0},destroy:function(){this.active&&(this.scroll.removeEventListener("touchstart",this.touchstartHandler),this.scroll.removeEventListener("touchmove",this.touchmoveHandler),this.reset(),this.active=!1)}}}(app,$,app.$dom,app.events,app.utils),function(e,t,n,a,o){e.define("sections.jobs"),e.sections.jobs={init:function(){e.device.isPhone||(this.el=n.body.children(".section.jobs"),this.el.length&&this.render())},render:function(){n.root=this.el,Store.get("vacancyFavorites")||Store.set("vacancyFavorites",[]),e.sections.on("afterMounted",function(){e.tag("ui-dropmenu",function(e){window.$dropMenu=e}),i.el.find("vacancy-panel-btn-favorite-side").length&&$store.jobs.item&&riot.mount("vacancy-panel-btn-favorite-side","vacancy-panel-btn-favorite",{item:$store.jobs.item})})}};var i=e.sections.jobs}(app,$,app.$dom,app.events,app.utils),function(e,t,n,a,o){e.define("sections.jobsHome"),e.sections.jobsHome={init:function(){this.el=n.body.children("section-jobs"),this.el.length&&this.render()},render:function(){var n=i.el.find(".jobs__header"),a=n.find(".jobs__header__search"),o=a.find(".jobs__header__search__tabs");n.addClass("showAnim"),e.sections.on("beforeMounted",function(){i.el.find(".input-vacancy").replaceWith('<ui-input placeholder="Я ищу..." color="input-white" autosuggest="getSuggestVacancy" size="xl" autosuggestSize="xl">'),i.el.find(".input-city").replaceWith('<ui-input placeholder="Где?" color="input-white" autosuggest="getSuggestCity" size="xl" autosuggestSize="xl">'),i.el.find(".input-companies").replaceWith('<ui-input placeholder="Название компании" color="input-white" autosuggest="getSuggestCompanies" size="xl" autosuggestSize="xl">'),a.on("focus blur","input",function(e){"focus"==e.type||"focusin"==e.type?t(e.target).parent().addClass("focused"):t(e.target).parent().removeClass("focused")}),o.on("click",".jobs__header__search__tabs__item",function(){var e=t(this);e.attr("data-active",!0).siblings().attr("data-active",!1),a.find(".input-group[data-item='"+e.attr("data-item")+"']").attr("data-active",!0).siblings().attr("data-active",!1)})})}};var i=e.sections.jobsHome}(app,$,app.$dom,app.events,app.utils),function(e,t,n,a,o){e.define("sections.jobsSearch"),e.sections.jobsSearch={init:function(){e.device.isPhone||(this.el=n.body.children("section-jobs-search"),this.el.length&&this.render())},render:function(){e.features.jobsSearch.init(),this.$nav=this.el.find("jobs-search-nav"),this.$progress=this.el.find(".jobs__search__progress__line")[0],e.device.isMobile||(i.scroll(),i.nav(),i.sidebar()),e.sections.on("afterMounted",function(){i.$panel=i.$nav.find(".jobs__search__nav__panel")}),window.addEventListener("popstate",function(e){location.reload()},!1)},nav:function(){this.$nav.find(".jobs__search__nav__panel").on("click",".input-group",function(e){i.$nav.attr("data-show",!0),i.navShow=!0,o.onEndTransition(i.$panel[0],function(){i.$nav.find("jobs-search-form").find(".input-group[data-item='"+t(e.target).attr("data-item")+"']").find("input").focus()})})},sidebar:function(){i.$sidebar=i.el.find(".jobs__search__filter__screen"),i.$sidebar.theiaStickySidebar({additionalMarginTop:66,additionalMarginBottom:30})},scroll:function(){function t(){var t=n.window.scrollTop();t>s&&!r?(i.el.attr("data-fixed",!0),r=!0):t<s&&r&&(i.el.removeAttr("data-fixed"),r=!1),i.navShow&&(i.$nav.removeAttr("data-show"),i.navShow=!1);var o=document.documentElement.scrollHeight;u=1-(o-t)/o,u=u*(1.01+e.sizes.height/o)*100,i.$progress.style[e.prefixed.transform]="translate3d("+u+"%, 0, 0)",a=!1}var a=!1,r=!1,s=94,u=0;n.window.on("scroll",function(){a||(a=!0,o.raf(t))})}};var i=e.sections.jobsSearch}(app,$,app.$dom,app.events,app.utils),function(e,t,n,a,o){e.define("sections.jobsMobile"),e.sections.jobsMobile={init:function(){e.device.isPhone&&(this.el=n.body.children(".section.jobs"),this.el.length&&this.render())},render:function(){n.root=this.el,n.body.scrollTop(0),Store.get("vacancyFavorites")||Store.set("vacancyFavorites",[]),new e.plugins.scroll.refreshFix(this.el),e.sections.on("afterMounted",function(){
i.$nav.find(".input-group input").on("blur",function(){setTimeout(function(){i.$nav.attr("data-show",!1),e.$dom.root.attr("data-overlay",!1)},20)}),i.$overlay.on("click",function(){i.$nav.attr("data-show",!1),e.$dom.root.attr("data-overlay",!1)}),n.body.on("click","vacancy-content-side .employer__link, vacancy-similary-side .vacancy__similary__item, employer-vacancies-mobile-side .employer__vacancies__item__title",function(e){n.body.addClass("appLoading")}),i.el.find("vacancy-panel-mobile-side").length&&$store.jobs.item&&riot.mount("vacancy-panel-mobile-side","vacancy-panel-mobile",{item:$store.jobs.item}),e.tag("ui-dropmenu",function(e){window.$dropMenu=e}),i.el.on("click","a.link__to__vacancies",function(e){if(e.preventDefault(),$Screens.employer){var a=t(this).closest(".section__content"),o=a.find("#vacancies");o.length&&a.scrollTop(o.offset().top-t($Screens.employer.root).offset().top+a.scrollTop()-80)}else{var o=i.el.find("#vacancies");o.length&&n.body.scrollTop(o.offset().top-80)}})}),this.$nav=this.el.find("jobs-panel-mobile"),this.$nav.length||(this.$nav=this.el.find("jobs-search-panel-mobile")),this.$overlay=this.el.find(".section__overlay"),i.nav(),window.addEventListener("popstate",function(e){location.reload()},!1)},nav:function(){i.$nav.on("click",".input-group",function(n){i.$nav.attr("data-show",!0),e.$dom.root.attr("data-overlay",!0),t(this).find("input").focus()})}};var i=e.sections.jobsMobile}(app,$,app.$dom,app.events,app.utils),function(e,t,n,a,o){e.define("sections.jobsSearchMobile"),e.sections.jobsSearchMobile={init:function(){e.device.isPhone&&(this.el=n.body.children("section-jobs-search-mobile"),this.el.length&&this.render())},render:function(){e.features.jobsSearch.init(),this.$nav=this.el.find("jobs-search-panel-mobile"),i.scroll()},scroll:function(){function e(){var e=n.window.scrollTop();t(e),r=e,a=!1}function t(e){r-e>s&&e>u?i.$nav.attr("data-turn",!0):(e-r>s&&e>u||e<u)&&i.$nav.attr("data-turn",!1)}var a=!1,r=0,s=30,u=54;n.window.on("scroll",function(){a||(a=!0,o.raf(e))})}};var i=e.sections.jobsSearchMobile}(app,$,app.$dom,app.events,app.utils),function(){app.define("metrics.jobs"),app.metrics.jobs={ver:"1.0",search:{help:{swipeOpenFilters:!1,swipeCloseVacancy:!1},refinePanel:!1,favorites:{sort:"dateDesc"}}}}(),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,a,o,i,r,s=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,n=0;n<i;n+=1)r[n]=str(n,u)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;n<i;n+=1)"string"==typeof rep[n]&&(a=rep[n],o=str(a,u),o&&r.push(quote(a)+(gap?": ":":")+o));else for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(o=str(a,u),o&&r.push(quote(a)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var a;if(gap="",indent="","number"==typeof n)for(a=0;a<n;a+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,a,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(a=walk(o,n),void 0!==a?o[n]=a:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var n=e.History=e.History||{},a=e.jQuery;if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){a(e).bind(t,n)},trigger:function(e,t,n){a(e).trigger(t,n)},extractEventData:function(e,n,a){var o=n&&n.originalEvent&&n.originalEvent[e]||a&&a[e]||t;return o},onDomLoad:function(e){a(e)}},"undefined"!=typeof n.init&&n.init()}(window),function(e,t){"use strict";var n=e.document,a=e.setTimeout||a,o=e.clearTimeout||o,i=e.setInterval||i,r=e.History=e.History||{};if("undefined"!=typeof r.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");r.initHtml4=function(){return"undefined"==typeof r.initHtml4.initialized&&(r.initHtml4.initialized=!0,r.enabled=!0,r.savedHashes=[],r.isLastHash=function(e){var t,n=r.getHashByIndex();return t=e===n},r.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},r.saveHash=function(e){return!r.isLastHash(e)&&(r.savedHashes.push(e),!0)},r.getHashByIndex=function(e){var t=null;return t="undefined"==typeof e?r.savedHashes[r.savedHashes.length-1]:e<0?r.savedHashes[r.savedHashes.length+e]:r.savedHashes[e]},r.discardedHashes={},r.discardedStates={},r.discardState=function(e,t,n){var a,o=r.getHashByState(e);return a={discardedState:e,backState:n,forwardState:t},r.discardedStates[o]=a,!0},r.discardHash=function(e,t,n){var a={discardedHash:e,backState:n,forwardState:t};return r.discardedHashes[e]=a,!0},r.discardedState=function(e){var t,n=r.getHashByState(e);return t=r.discardedStates[n]||!1},r.discardedHash=function(e){var t=r.discardedHashes[e]||!1;return t},r.recycleState=function(e){var t=r.getHashByState(e);return r.discardedState(e)&&delete r.discardedStates[t],!0},r.emulated.hashChange&&(r.hashChangeInit=function(){r.checkerFunction=null;var t,a,o,s,u="",c=Boolean(r.getHash());return r.isInternetExplorer()?(t="historyjs-iframe",a=n.createElement("iframe"),a.setAttribute("id",t),a.setAttribute("src","#"),a.style.display="none",n.body.appendChild(a),a.contentWindow.document.open(),a.contentWindow.document.close(),o="",s=!1,r.checkerFunction=function(){if(s)return!1;s=!0;var t=r.getHash(),n=r.getHash(a.contentWindow.document);return t!==u?(u=t,n!==t&&(o=n=t,a.contentWindow.document.open(),a.contentWindow.document.close(),a.contentWindow.document.location.hash=r.escapeHash(t)),r.Adapter.trigger(e,"hashchange")):n!==o&&(o=n,c&&""===n?r.back():r.setHash(n,!1)),s=!1,!0}):r.checkerFunction=function(){var t=r.getHash()||"";return t!==u&&(u=t,r.Adapter.trigger(e,"hashchange")),!0},r.intervalList.push(i(r.checkerFunction,r.options.hashChangeInterval)),!0},r.Adapter.onDomLoad(r.hashChangeInit)),r.emulated.pushState&&(r.onHashChange=function(t){var n,a=t&&t.newURL||r.getLocationHref(),o=r.getHashByUrl(a),i=null,s=null;return r.isLastHash(o)?(r.busy(!1),!1):(r.doubleCheckComplete(),r.saveHash(o),o&&r.isTraditionalAnchor(o)?(r.Adapter.trigger(e,"anchorchange"),r.busy(!1),!1):(i=r.extractState(r.getFullUrl(o||r.getLocationHref()),!0),r.isLastSavedState(i)?(r.busy(!1),!1):(s=r.getHashByState(i),n=r.discardedState(i),n?(r.getHashByIndex(-2)===r.getHashByState(n.forwardState)?r.back(!1):r.forward(!1),!1):(r.pushState(i.data,i.title,encodeURI(i.url),!1),!0))))},r.Adapter.bind(e,"hashchange",r.onHashChange),r.pushState=function(t,n,a,o){if(a=encodeURI(a).replace(/%25/g,"%"),r.getHashByUrl(a))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(o!==!1&&r.busy())return r.pushQueue({scope:r,callback:r.pushState,args:arguments,queue:o}),!1;r.busy(!0);var i=r.createStateObject(t,n,a),s=r.getHashByState(i),u=r.getState(!1),c=r.getHashByState(u),l=r.getHash(),d=r.expectedStateId==i.id;return r.storeState(i),r.expectedStateId=i.id,r.recycleState(i),r.setTitle(i),s===c?(r.busy(!1),!1):(r.saveState(i),d||r.Adapter.trigger(e,"statechange"),!r.isHashEqual(s,l)&&!r.isHashEqual(s,r.getShortUrl(r.getLocationHref()))&&r.setHash(s,!1),r.busy(!1),!0)},r.replaceState=function(t,n,a,o){if(a=encodeURI(a).replace(/%25/g,"%"),r.getHashByUrl(a))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(o!==!1&&r.busy())return r.pushQueue({scope:r,callback:r.replaceState,args:arguments,queue:o}),!1;r.busy(!0);var i=r.createStateObject(t,n,a),s=r.getHashByState(i),u=r.getState(!1),c=r.getHashByState(u),l=r.getStateByIndex(-2);return r.discardState(u,i,l),s===c?(r.storeState(i),r.expectedStateId=i.id,r.recycleState(i),r.setTitle(i),r.saveState(i),r.Adapter.trigger(e,"statechange"),r.busy(!1)):r.pushState(i.data,i.title,i.url,!1),!0}),r.emulated.pushState&&r.getHash()&&!r.emulated.hashChange&&r.Adapter.onDomLoad(function(){r.Adapter.trigger(e,"hashchange")}),void 0)},"undefined"!=typeof r.init&&r.init()}(window),function(e,t){"use strict";var n=e.console||t,a=e.document,o=e.navigator,i=e.sessionStorage||!1,r=e.setTimeout,s=e.clearTimeout,u=e.setInterval,c=e.clearInterval,l=e.JSON,d=e.alert,p=e.History=e.History||{},f=e.history;try{i.setItem("TEST","1"),i.removeItem("TEST")}catch(e){i=!1}if(l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode,"undefined"!=typeof p.init)throw new Error("History.js Core has already been loaded...");p.init=function(e){return"undefined"!=typeof p.Adapter&&("undefined"!=typeof p.initCore&&p.initCore(),"undefined"!=typeof p.initHtml4&&p.initHtml4(),!0)},p.initCore=function(h){if("undefined"!=typeof p.initCore.initialized)return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.disableSuid=p.options.disableSuid||!1,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||a.title,p.options.html4Mode=p.options.html4Mode||!1,p.options.delayInit=p.options.delayInit||!1,p.intervalList=[],p.clearAllIntervals=function(){var e,t=p.intervalList;if("undefined"!=typeof t&&null!==t){for(e=0;e<t.length;e++)c(t[e]);p.intervalList=null}},p.debug=function(){(p.options.debug||!1)&&p.log.apply(p,arguments)},p.log=function(){var e,t,o,i,r,s="undefined"!=typeof n&&"undefined"!=typeof n.log&&"undefined"!=typeof n.log.apply,u=a.getElementById("log");for(s?(i=Array.prototype.slice.call(arguments),e=i.shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[e,i]):n.log.apply(n,[e,i])):e="\n"+arguments[0]+"\n",t=1,o=arguments.length;t<o;++t){if(r=arguments[t],"object"==typeof r&&"undefined"!=typeof l)try{r=l.stringify(r)}catch(e){}e+="\n"+r+"\n"}return u?(u.value+=e+"\n-----\n",u.scrollTop=u.scrollHeight-u.clientHeight):s||d(e),!0},p.getInternetExplorerMajorVersion=function(){var e=p.getInternetExplorerMajorVersion.cached="undefined"!=typeof p.getInternetExplorerMajorVersion.cached?p.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=a.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0];);return e>4&&e}();return e},p.isInternetExplorer=function(){var e=p.isInternetExplorer.cached="undefined"!=typeof p.isInternetExplorer.cached?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion());return e},p.options.html4Mode?p.emulated={pushState:!0,hashChange:!0}:p.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(o.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(o.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in a)||p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8)},p.enabled=!p.emulated.pushState,p.bugs={setHash:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),safariPoll:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<7)},p.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},p.cloneObject=function(e){var t,n;return e?(t=l.stringify(e),n=l.parse(t)):n={},n},p.getRootUrl=function(){var e=a.location.protocol+"//"+(a.location.hostname||a.location.host);return a.location.port&&(e+=":"+a.location.port),e+="/"},p.getBaseHref=function(){var e=a.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},p.getBaseUrl=function(){var e=p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl();return e},p.getPageUrl=function(){var e,t=p.getState(!1,!1),n=(t||{}).url||p.getLocationHref();return e=n.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},p.getBasePageUrl=function(){var e=p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},p.getFullUrl=function(e,t){var n=e,a=e.substring(0,1);return t="undefined"==typeof t||t,/[a-z]+\:\/\//.test(e)||(n="/"===a?p.getRootUrl()+e.replace(/^\/+/,""):"#"===a?p.getPageUrl().replace(/#.*/,"")+e:"?"===a?p.getPageUrl().replace(/[\?#].*/,"")+e:t?p.getBaseUrl()+e.replace(/^(\.\/)+/,""):p.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},p.getShortUrl=function(e){var t=e,n=p.getBaseUrl(),a=p.getRootUrl();return p.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(a,"/"),p.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},p.getLocationHref=function(e){return e=e||a,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:e.URL.indexOf("#")==-1&&e.location.href.indexOf("#")!=-1?e.location.href:e.URL||e.location.href},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0);var n=p.getLastSavedState();return!n&&t&&(n=p.createStateObject()),e&&(n=p.cloneObject(n),n.url=n.cleanUrl||n.url),n},p.getIdByState=function(e){var t,n=p.extractId(e.url);if(!n)if(t=p.getStateString(e),"undefined"!=typeof p.stateToId[t])n=p.stateToId[t];else if("undefined"!=typeof p.store.stateToId[t])n=p.store.stateToId[t];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof p.idToState[n]||"undefined"!=typeof p.store.idToState[n];);p.stateToId[t]=n,p.idToState[n]=e}return n},p.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=p.getFullUrl(e.url?e.url:p.getLocationHref()),t.hash=p.getShortUrl(t.url),t.data=p.cloneObject(e.data),t.id=p.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!p.isEmptyObject(t.data),(t.title||n)&&p.options.disableSuid!==!0&&(t.hash=p.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=p.getFullUrl(t.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},p.createStateObject=function(e,t,n){var a={data:e,title:t,url:n};return a=p.normalizeState(a)},p.getStateById=function(e){e=String(e);var n=p.idToState[e]||p.store.idToState[e]||t;return n},p.getStateString=function(e){var t,n,a;return t=p.normalizeState(e),n={data:t.data,title:e.title,url:e.url},a=l.stringify(n)},p.getStateId=function(e){var t,n;return t=p.normalizeState(e),n=t.id},p.getHashByState=function(e){var t,n;return t=p.normalizeState(e),n=t.hash},p.extractId=function(e){var t,n,a,o;return o=e.indexOf("#")!=-1?e.split("#")[0]:e,n=/(.*)\&_suid=([0-9]+)$/.exec(o),a=n?n[1]||e:e,t=n?String(n[2]||""):"",t||!1},p.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},p.extractState=function(e,t){var n,a,o=null;return t=t||!1,n=p.extractId(e),n&&(o=p.getStateById(n)),o||(a=p.getFullUrl(e),n=p.getIdByUrl(a)||!1,n&&(o=p.getStateById(n)),!o&&t&&!p.isTraditionalAnchor(e)&&(o=p.createStateObject(null,null,a))),o},p.getIdByUrl=function(e){var n=p.urlToId[e]||p.store.urlToId[e]||t;return n},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||t},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||t},p.hasUrlDuplicate=function(e){var t,n=!1;return t=p.extractState(e.url),n=t&&t.id!==e.id},p.storeState=function(e){return p.urlToId[e.url]=e.id,p.storedStates.push(p.cloneObject(e)),e},p.isLastSavedState=function(e){var t,n,a,o=!1;return p.savedStates.length&&(t=e.id,n=p.getLastSavedState(),a=n.id,o=t===a),o},p.saveState=function(e){return!p.isLastSavedState(e)&&(p.savedStates.push(p.cloneObject(e)),!0)},p.getStateByIndex=function(e){var t=null;return t="undefined"==typeof e?p.savedStates[p.savedStates.length-1]:e<0?p.savedStates[p.savedStates.length+e]:p.savedStates[e]},p.getCurrentIndex=function(){var e=null;return e=p.savedStates.length<1?0:p.savedStates.length-1},p.getHash=function(e){var t,n=p.getLocationHref(e);return t=p.getHashByUrl(n)},p.unescapeHash=function(e){var t=p.normalizeHash(e);return t=decodeURIComponent(t)},p.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},p.setHash=function(e,t){var n,o;return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:t}),!1):(p.busy(!0),n=p.extractState(e,!0),n&&!p.emulated.pushState?p.pushState(n.data,n.title,n.url,!1):p.getHash()!==e&&(p.bugs.setHash?(o=p.getPageUrl(),p.pushState(null,null,o+"#"+e,!1)):a.location.hash=e),p)},p.escapeHash=function(t){var n=p.normalizeHash(t);return n=e.encodeURIComponent(n),p.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},p.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=p.unescapeHash(t)},p.setTitle=function(e){var t,n=e.title;n||(t=p.getStateByIndex(0),t&&t.url===e.url&&(n=t.title||p.options.initialTitle));try{a.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return a.title=n,p},p.queues=[],p.busy=function(e){if("undefined"!=typeof e?p.busy.flag=e:"undefined"==typeof p.busy.flag&&(p.busy.flag=!1),!p.busy.flag){s(p.busy.timeout);var t=function(){var e,n,a;if(!p.busy.flag)for(e=p.queues.length-1;e>=0;--e)n=p.queues[e],0!==n.length&&(a=n.shift(),p.fireQueueItem(a),p.busy.timeout=r(t,p.options.busyDelay))};p.busy.timeout=r(t,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(e){return e.callback.apply(e.scope||p,e.args||[])},p.pushQueue=function(e){return p.queues[e.queue||0]=p.queues[e.queue||0]||[],p.queues[e.queue||0].push(e),p},p.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),"undefined"!=typeof t&&(e.queue=t),p.busy()?p.pushQueue(e):p.fireQueueItem(e),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(s(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(e){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=r(function(){return p.doubleCheckClear(),p.stateChanged||e(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var t,n=p.extractState(p.getLocationHref());if(!p.isLastSavedState(n))return t=n,t||(t=p.createStateObject()),p.Adapter.trigger(e,"popstate"),p},p.back=function(e){return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:e}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),f.go(-1),!0)},p.forward=function(e){return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:e}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),f.go(1),!0)},p.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)p.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)p.back(t)}return p},p.emulated.pushState){var g=function(){};p.pushState=p.pushState||g,p.replaceState=p.replaceState||g}else p.onPopState=function(t,n){var a,o,i=!1,r=!1;return p.doubleCheckComplete(),a=p.getHash(),a?(o=p.extractState(a||p.getLocationHref(),!0),o?p.replaceState(o.data,o.title,o.url,!1):(p.Adapter.trigger(e,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(i=p.Adapter.extractEventData("state",t,n)||!1,r=i?p.getStateById(i):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(p.getLocationHref()),r||(r=p.createStateObject(null,null,p.getLocationHref())),p.expectedStateId=!1,p.isLastSavedState(r)?(p.busy(!1),!1):(p.storeState(r),p.saveState(r),p.setTitle(r),p.Adapter.trigger(e,"statechange"),p.busy(!1),!0))},p.Adapter.bind(e,"popstate",p.onPopState),p.pushState=function(t,n,a,o){if(p.getHashByUrl(a)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:o}),!1;p.busy(!0);var i=p.createStateObject(t,n,a);return p.isLastSavedState(i)?p.busy(!1):(p.storeState(i),p.expectedStateId=i.id,f.pushState(i.id,i.title,i.url),p.Adapter.trigger(e,"popstate")),!0},p.replaceState=function(t,n,a,o){if(p.getHashByUrl(a)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:o}),!1;p.busy(!0);var i=p.createStateObject(t,n,a);return p.isLastSavedState(i)?p.busy(!1):(p.storeState(i),p.expectedStateId=i.id,f.replaceState(i.id,i.title,i.url),p.Adapter.trigger(e,"popstate")),!0};if(i){try{p.store=l.parse(i.getItem("History.store"))||{}}catch(e){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(e,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0))),i&&(p.onUnload=function(){var e,t,n;try{e=l.parse(i.getItem("History.store"))||{}}catch(t){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in p.idToState)p.idToState.hasOwnProperty(t)&&(e.idToState[t]=p.idToState[t]);for(t in p.urlToId)p.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=p.urlToId[t]);for(t in p.stateToId)p.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=p.stateToId[t]);p.store=e,p.normalizeStore(),n=l.stringify(e);try{i.setItem("History.store",n)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;i.length&&(i.removeItem("History.store"),i.setItem("History.store",n))}},p.intervalList.push(u(p.onUnload,p.options.storeInterval)),p.Adapter.bind(e,"beforeunload",p.onUnload),p.Adapter.bind(e,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(u(p.safariStatePoll,p.options.safariPollInterval)),"Apple Computer, Inc."!==o.vendor&&"Mozilla"!==(o.appCodeName||"")||(p.Adapter.bind(e,"hashchange",function(){p.Adapter.trigger(e,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(e,"hashchange")})))},(!p.options||!p.options.delayInit)&&p.init()}(window);