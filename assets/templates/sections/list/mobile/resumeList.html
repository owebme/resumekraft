<resume-list-mobile class="resume__list-m section" data-tutorial="false" data-hidden="false">

    <div name="content" class="section-scroll section__content">

        <div class="resume__list-m__scroll">

            <div onClick={ open.profile } onUpdate="none" class="resume__list-m__menu"></div>

            <div class="container borderBottomWidth-1 borderStyle-solid borderColor-smoke">
                <div class="row">
                    <div class="resume__list-m__header col-xs-offset-5 col-xs-19">
                        <div class="resume__list-m__title">Мой список резюме</div>
                        <div class="resume__list-m__subtitle">Чтобы создать новое резюме нажмите на синий кружок в низу.</div>
                    </div>
                </div>
            </div>

            <div class="container resume__list-m__items">
                <resume-item-mobile onUpdate="none" each={ item, i in _.sortByDate($store.data.get(), "update", "desc") } item={ item }></resume-item-mobile>
                <div if={ $store.data.get().length < 4 }>
                    <resume-item-blank-mobile each={ item, i in _.range(4 - $store.data.get().length) }></resume-item-blank-mobile>
                </div>
            </div>

            <offer-welcome-mobile></offer-welcome-mobile>

        </div>

        <navbar-mobile></navbar-mobile>

    </div>

    <div onClick={ open.master } onUpdate="none" class="master__launcher__mobile">
        <div class="master__launcher__mobile__info">
            <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" version="1.1" x="0px" y="0px" viewBox="0 0 100 125"><g transform="translate(0,-952.36218)"><path d="m 59.001949,957.35871 c -3.3137,0 -6,2.6863 -6,6 0,3.3137 2.6863,6 6,6 3.3137,0 6,-2.6863 6,-6 0,-3.3137 -2.6863,-6 -6,-6 z m -8.1562,16.0312 c -4.4334,0.2551 -9.0287,2.9626 -13,6.5313 l -0.4376,5.4375 c 3.7521,-1.7212 10.7531,-3.2851 11.9063,0.8125 2.8068,9.9677 -9.9671,28.98669 -12.5937,38.12499 -7.2455,26.8259 9.9823,27.2451 21.625,16.4688 l 0.4062,-5.4688 c -6.9985,2.8736 -16.7901,4.5005 -10.1562,-13.1563 1.8487,-6.2476 18.6918,-36.68479 9.875,-46.18749 -2.3607,-1.9777 -4.9651,-2.7155 -7.625,-2.5625 z" stroke="none" marker="none" visibility="visible" display="inline" overflow="visible"/></g></svg>
        </div>
        <div class="master__launcher__mobile__logo"></div>
    </div>

<script>

    var $ = this,
    $scope = $$($.root);

    $.offers = $.tags["offer-welcome-mobile"];

    $.on("mount", function(){
        $afterlag.run(function(){
            $.scroll = new app.plugins.scroll.content($.content);
            $.scroll.init();

            if (!app.metrika.get("mobile.offers.welcome.success")){
                $.offers.show();
            }
            else {
                $.offers.unmount();
            }
        });
    });

    $.on("updated", function(){
        if ($.ready && $Sections.resume.list.scroll){
            $Sections.resume.list.scroll.refresh();
        }
    });

    $.open = {
        master: function(){
            $Sections.master.section.show();
        },
        profile: function(){
            $.hide();
            $Sections.profile.section.show(function(){
                $.show();
            });
        },
        resume: function(){
            $.hide();
            $Sections.resume.section.show(this.item, function(){
                $.show();
            });
        }
    };

    $.show = function(){
        $.hidden = false;
        $.root.setAttribute("data-hidden", $.hidden);
    };

    $.hide = function(){
        $.hidden = true;
        $.root.setAttribute("data-hidden", $.hidden);
    };

</script>

</resume-list-mobile>
