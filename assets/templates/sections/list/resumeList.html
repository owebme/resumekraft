<resume-list class="resume__list">

    <div onClick={ open.profile } onUpdate="none" class="main__button" data-icon="menu" data-color="white"></div>

    <div class="resume__list__title">Открыть меню</div>

    <resume-navbar></resume-navbar>

    <div name="sliderEl" class="resume__list__slider container slider" data-hidden="{ hidden }">
        <div class="slider__nav slider__nav__prev"></div>
        <div class="slider__nav slider__nav__next"></div>
        <div class="row slider__wrapper">
            <div each={ item, i in _.sortByDate($store.data.get(), "update", "desc") } no-reorder class="slider__item col-md-12 col-lg-8">
                <resume-list-item item={ item }></resume-list-item>
            </div>
            <div class="slider__item col-md-12 col-lg-8">
                <resume-list-item-new onClick={ open.createResume } onUpdate="none"></resume-list-item-new>
            </div>
            <div class="slider__item col-md-12 col-lg-8">
                <resume-list-item-blank></resume-list-item-blank>
            </div>
        </div>
    </div>

<script>

    var $ = this,
    $scope = $$($.root);

    $.hidden = false;

    $.on("mount", function(){
        $.slider = new app.plugins.slider($.sliderEl);
        if (app.metrika.get("offers.welcome.show")){
            $root.one("ready", function(){
                $.start();
            });
        }
    });

    $.start = function(callback){
        $afterlag.run(function(){
            $.slider.show(function(){
                if (_.isFunction(callback)){
                    $afterlag.s(function(){
                        callback();
                    });
                }
            });
        });
    };

    $.show = function(){
        $.hidden = false;
        $.update();
    };

    $.open = {
        createResume: function(){
            $Sections.offers.plan.show();
            app.metrika.set("resume.new", true);
        },
        profile: function(){
            $.hide();
            $Sections.profile.section.show(function(){
                $.show();
            });
        },
        stat: function(){
            $.hide();
            $Sections.resume.stat.show(function(){
                $.show();
            });
        }
    };

    $.hide = function(){
        $.hidden = true;
        $.update();
    };

</script>

</resume-list>
