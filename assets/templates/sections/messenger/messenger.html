<section-messenger class="messenger__launcher" data-active={ active }>

    <div class="WD__messenger__items">
        <div class="WD__messenger__item">
            <div class="WD__messenger__item__avatar" style="background-image:url({ photo })"></div>
            <div class="WD__messenger__item__title">{ name }<span class="WD__messenger__item__title__post">консультант</span></div>
            <div class="WD__messenger__item__body">С удовольствием отвечу на ваши вопросы и подскажу с выбором.<br><br> Выберите удобный вид связи.</div>
        </div>
    </div>
    <div name="buttons" class="messenger__launcher__buttons">
        <a href="http://m.me/resumekraft" target="_blank" class="messenger__launcher__buttons__item" data-item="fb" data-balloon="Открыть диалог в Facebook">
            <svg class="messenger__launcher__buttons__item__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" viewBox="0 0 8 19">
              <path d="M7.692,-0.007 L6.740,-0.007 C4.093,-0.007 1.939,2.319 1.939,5.178 L1.939,7.366 L0.312,7.366 C0.145,7.366 0.009,7.512 0.009,7.693 L0.009,10.314 C0.009,10.495 0.145,10.642 0.312,10.642 L1.939,10.642 L1.939,18.671 C1.939,18.852 2.075,18.998 2.243,18.998 L4.670,18.998 C4.837,18.998 4.973,18.852 4.973,18.671 L4.973,10.642 L7.388,10.642 C7.555,10.642 7.691,10.495 7.691,10.314 L7.691,7.693 C7.691,7.512 7.555,7.366 7.388,7.366 L4.973,7.366 L4.973,5.178 C4.973,4.126 5.766,3.270 6.740,3.270 L7.692,3.270 C7.860,3.270 7.995,3.123 7.995,2.942 L7.995,0.321 C7.995,0.140 7.860,-0.007 7.692,-0.007 Z"/>
            </svg>
        </a>
        <a href="https://web.telegram.org/#/im?p=@RKraftBot" target="_blank" class="messenger__launcher__buttons__item" data-item="tg" data-balloon="Начать общение в Telegram">
            <svg version="1.1" class="messenger__launcher__buttons__item__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50 50" xml:space="preserve"><path d="M19.1,25.6l12.6-7.7c0.2-0.1,0.5,0.2,0.3,0.3l-10.4,9.6c-0.4,0.3-0.6,0.8-0.7,1.3l-0.4,2.6c0,0.3-0.5,0.4-0.6,0L18.5,27C18.4,26.5,18.6,25.9,19.1,25.6z M10.5,24.5l6.4,2.4l2.5,8c0.2,0.5,0.8,0.7,1.2,0.4l3.6-2.9c0.4-0.3,0.9-0.3,1.3,0L32,37c0.4,0.3,1.1,0.1,1.2-0.5l4.7-22.7c0.1-0.6-0.5-1.1-1-0.9L10.5,23.1C9.9,23.3,9.9,24.3,10.5,24.5z"></path></svg>
        </a>
        <a href="https://www.viber.com" target="_blank" class="messenger__launcher__buttons__item" data-item="vb" data-balloon="Поинтересоваться в Viber">
            <svg class="messenger__launcher__buttons__item__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><g><path d="M38.1 17.6c-.7-2.7-3.7-5.6-6.4-6.2-4.4-.8-9-.8-13.4 0-2.7.6-5.7 3.5-6.4 6.2-.8 3.7-.8 7.6 0 11.3.6 2.6 3.4 5.3 6.1 6.1v3c0 1.1 1.3 1.6 2.1.8l3-3.2c.7 0 1.3.1 2 .1 2.2 0 4.5-.2 6.7-.6 2.7-.6 5.7-3.5 6.4-6.2.8-3.7.8-7.5-.1-11.3zm-2.4 10.8c-.4 1.8-2.7 3.9-4.5 4.3-2.4.4-4.7.6-7.1.6 0 0-.1 0-.1.1-.3.3-2.2 2.3-2.2 2.3L19.4 38c-.2.2-.5.1-.5-.2v-5c0-.1-.1-.2-.1-.2-1.8-.4-4.1-2.6-4.5-4.3-.7-3.4-.7-6.8 0-10.2.4-1.8 2.7-3.9 4.5-4.3 4.1-.8 8.3-.8 12.4 0 1.8.4 4.1 2.6 4.5 4.3.8 3.4.8 6.9 0 10.3zm0 0"></path><path d="M28.9 30.7c-.3-.1-.5-.1-.8-.2-2.5-1.1-4.9-2.4-6.7-4.5-1.1-1.2-1.9-2.5-2.6-3.9l-.9-2.1c-.3-.6.1-1.3.5-1.8.4-.4.9-.8 1.4-1 .4-.2.8-.1 1.1.3.6.8 1.2 1.5 1.7 2.4.3.5.2 1.2-.3 1.6-.1.1-.2.2-.4.3l-.3.3c-.1.2-.1.5-.1.7.7 1.8 1.8 3.2 3.6 4 .3.1.6.3.9.2.6-.1.7-.7 1.1-1 .4-.3.9-.3 1.3-.1.4.3.8.5 1.2.8l1.2.9c.4.3.5.7.3 1.1-.4.8-.9 1.4-1.6 1.8-.1.1-.3.1-.6.2-.2-.1.3-.1 0 0zm0 0M25 16.2c3.3.1 6.1 2.3 6.7 5.6.1.6.1 1.1.2 1.7 0 .2-.1.5-.4.5-.3 0-.4-.2-.4-.5 0-.5-.1-1-.1-1.4-.3-2.5-2.3-4.5-4.8-5-.4 0-.8-.1-1.2-.1-.2 0-.5 0-.6-.3 0-.2.2-.4.4-.5h.2c3.3.1-.1 0 0 0zm0 0"></path><path d="M30.1 22.8v.2c-.1.3-.6.4-.7 0v-.3c0-.7-.2-1.4-.5-2-.4-.6-.9-1.2-1.6-1.5-.4-.2-.8-.3-1.3-.4-.2 0-.4-.1-.6-.1-.2 0-.4-.2-.3-.4 0-.2.2-.4.4-.4.8 0 1.5.2 2.2.6 1.4.7 2.2 1.9 2.4 3.4v.2c-.1.3 0 .4 0 .7 0 0 0-.3 0 0zm0 0"></path><path d="M28 22.7c-.3 0-.4-.1-.5-.4 0-.2 0-.4-.1-.5-.1-.3-.3-.7-.6-.9-.1-.1-.3-.2-.4-.2-.2-.1-.4 0-.6-.1-.2-.1-.3-.2-.3-.4s.2-.3.4-.3c1.3.1 2.2.8 2.3 2.3v.3c.1.1-.1.2-.2.2-.3 0 .1 0 0 0zm0 0"></path></g></svg>
        </a>
        <a href="mailto:inbox@resumekraft.ru" class="messenger__launcher__buttons__item" data-item="email" data-balloon="Написать на почту">
            <svg class="messenger__launcher__buttons__item__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50">
                <path d="M47.042,36.749h-1.528c-0.164,0-0.317,0.08-0.41,0.214c-0.995,1.428-2.178,2.786-3.517,4.037 c-1.336,1.251-2.834,2.355-4.454,3.285c-1.617,0.926-3.355,1.658-5.167,2.177c-1.809,0.516-3.729,0.777-5.705,0.777 c-2.982,0-5.852-0.481-8.53-1.433c-2.666-0.945-5.042-2.373-7.064-4.244c-2.02-1.868-3.643-4.223-4.825-6.999 c-1.185-2.778-1.786-6.051-1.786-9.729c0-3.063,0.567-5.958,1.687-8.604c1.118-2.646,2.69-4.994,4.673-6.978 c1.98-1.98,4.351-3.563,7.045-4.706c2.691-1.141,5.652-1.72,8.8-1.72c2.803,0,5.447,0.447,7.861,1.33 c2.405,0.881,4.505,2.132,6.242,3.717c1.731,1.583,3.109,3.515,4.095,5.742c0.985,2.228,1.484,4.706,1.484,7.366 c0,2.358-0.412,4.586-1.226,6.62c-0.818,2.046-1.853,3.832-3.075,5.311c-1.217,1.474-2.568,2.653-4.017,3.507 c-1.417,0.834-2.784,1.257-4.062,1.257c-0.761,0-1.322-0.149-1.667-0.443c-0.35-0.297-0.554-0.694-0.625-1.216 c-0.08-0.575-0.017-1.27,0.188-2.064c0.214-0.835,0.52-1.74,0.912-2.699l7.369-19.12c0.059-0.153,0.039-0.327-0.055-0.463 s-0.248-0.217-0.412-0.217h-1.395c-0.21,0-0.398,0.132-0.47,0.329l-1.212,3.333c-0.681-1.386-1.745-2.514-3.175-3.36 c-1.754-1.038-3.761-1.564-5.964-1.564c-2.43,0-4.686,0.641-6.705,1.903c-1.995,1.247-3.718,2.866-5.12,4.812 c-1.395,1.935-2.49,4.067-3.255,6.34c-0.766,2.273-1.155,4.505-1.155,6.632c0,1.386,0.246,2.711,0.732,3.937s1.156,2.306,1.99,3.208 c0.838,0.909,1.853,1.641,3.013,2.174c2.545,1.171,5.643,1.001,8.703-0.048c1.36-0.465,2.603-1.314,3.708-2.531 c0.098,0.803,0.439,1.499,1.021,2.08c0.868,0.868,2.025,1.308,3.441,1.308c1.674,0,3.422-0.514,5.194-1.525 c1.749-0.999,3.359-2.378,4.784-4.099c1.419-1.712,2.597-3.734,3.499-6.011c0.905-2.282,1.363-4.768,1.363-7.388 c0-3.109-0.585-5.972-1.738-8.506c-1.152-2.531-2.746-4.71-4.737-6.474c-1.988-1.761-4.344-3.134-7.002-4.081 C32.139,0.979,29.268,0.5,26.261,0.5c-3.325,0-6.516,0.616-9.484,1.83c-2.965,1.213-5.598,2.923-7.827,5.082 c-2.227,2.16-4.006,4.749-5.289,7.696c-1.283,2.948-1.934,6.221-1.934,9.727c0,4.256,0.719,7.989,2.137,11.096 c1.418,3.104,3.303,5.697,5.603,7.704c2.299,2.005,4.949,3.502,7.876,4.447c2.911,0.941,5.911,1.418,8.917,1.418 c2.07,0,4.159-0.285,6.207-0.847c2.04-0.561,4.009-1.368,5.855-2.403c1.838-1.031,3.568-2.307,5.144-3.79 c1.576-1.487,2.923-3.154,4.003-4.954c0.093-0.154,0.095-0.347,0.006-0.503C47.388,36.846,47.222,36.749,47.042,36.749z M35.03,17.971l-4.653,12.059c-0.601,1.545-1.302,2.831-2.084,3.823c-0.784,0.994-1.605,1.785-2.442,2.352 c-0.833,0.562-1.705,0.95-2.59,1.155c-2.05,0.479-4.019,0.427-5.63-0.271c-0.907-0.392-1.7-0.944-2.357-1.644 c-0.661-0.701-1.186-1.53-1.559-2.465c-0.373-0.932-0.562-1.975-0.562-3.102c0-1.799,0.338-3.733,1.004-5.751 c0.667-2.023,1.616-3.924,2.822-5.646c1.199-1.713,2.663-3.155,4.35-4.287c1.658-1.111,3.496-1.675,5.465-1.675 c0.801,0,1.646,0.097,2.514,0.287c0.854,0.188,1.679,0.506,2.45,0.942c0.761,0.433,1.44,1.008,2.019,1.709 C34.319,16.119,34.74,16.964,35.03,17.971z"></path>
            </svg>
        </a>
        <a href="https://vk.me/resumekraft" target="_blank" class="messenger__launcher__buttons__item" data-item="vk" data-balloon="ВКонтакте">
            <svg version="1.1" class="messenger__launcher__buttons__item__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50 50" xml:space="preserve"><path d="M35.3,28.4c1,1,2.1,2,3.1,3.1c0.4,0.5,0.8,1,1.1,1.6c0.4,0.8,0,1.7-0.7,1.8l-4.6,0c-1.2,0.1-2.1-0.4-2.9-1.2c-0.6-0.7-1.2-1.3-1.8-2c-0.2-0.3-0.5-0.5-0.8-0.7c-0.6-0.4-1.2-0.3-1.5,0.4c-0.4,0.7-0.4,1.4-0.5,2.2c0,1.1-0.4,1.4-1.5,1.4c-2.3,0.1-4.5-0.2-6.5-1.4c-1.8-1-3.2-2.5-4.4-4.2c-2.4-3.2-4.2-6.8-5.8-10.5c-0.4-0.8-0.1-1.3,0.8-1.3c1.5,0,3,0,4.5,0c0.6,0,1,0.4,1.2,0.9c0.8,2,1.8,3.9,3,5.7c0.3,0.5,0.7,0.9,1.1,1.3c0.5,0.4,0.9,0.2,1.2-0.4c0.2-0.4,0.2-0.8,0.3-1.2c0.1-1.4,0.1-2.8-0.1-4.2c-0.1-0.9-0.6-1.4-1.5-1.6c-0.4-0.1-0.4-0.2-0.2-0.5c0.4-0.4,0.7-0.7,1.4-0.7h5.2c0.8,0.2,1,0.5,1.1,1.4l0,5.8c0,0.3,0.2,1.3,0.7,1.5c0.5,0.2,0.8-0.2,1-0.5c1.2-1.3,2.1-2.9,2.9-4.5c0.3-0.7,0.7-1.5,0.9-2.2c0.2-0.6,0.6-0.8,1.2-0.8l5,0c0.1,0,0.3,0,0.4,0c0.8,0.1,1.1,0.5,0.8,1.3c-0.4,1.3-1.2,2.4-2,3.5c-0.8,1.2-1.7,2.3-2.5,3.5C34.3,27,34.4,27.5,35.3,28.4z"></path></svg>
        </a>
    </div>
    <div onClick={ onShow } class="messenger__launcher__opener">
        <div class="messenger__launcher__badge">R</div>
        <div class="messenger__launcher__opener__button">
            <div class="messenger__launcher__icons">
                <svg class="messenger__launcher__icon" data-icon="yuap" viewBox="0 0 245 287" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <path d="M 64.13 6.31 C 73.98 1.50 85.84 -0.52 96.36 3.33 C 103.96 6.28 109.23 13.58 110.96 21.40 C 114.55 36.73 111.43 52.92 105.31 67.19 C 98.75 82.43 88.84 96.00 82.61 111.41 C 78.43 122.47 76.17 134.74 78.90 146.42 C 82.15 160.52 92.74 172.65 106.29 177.75 C 113.29 180.73 121.09 181.09 128.57 180.37 C 142.85 178.53 156.02 169.32 162.38 156.36 C 166.93 147.77 168.28 137.64 166.66 128.10 C 164.44 108.62 152.28 92.54 143.65 75.52 C 135.13 59.35 129.89 40.37 133.88 22.13 C 135.37 14.27 140.43 6.92 147.86 3.63 C 158.30 -0.60 170.29 1.36 180.25 5.99 C 209.27 21.53 231.56 49.38 239.74 81.33 C 244.59 99.11 244.56 117.85 242.34 136.03 C 239.51 156.18 232.90 175.88 222.39 193.35 C 211.34 212.30 196.18 228.58 179.40 242.59 C 157.44 260.50 132.53 274.64 106.27 285.21 C 100.21 287.42 93.13 283.07 91.85 276.89 C 90.79 272.79 93.09 268.92 94.37 265.17 C 98.42 253.91 102.79 242.76 106.72 231.46 C 81.03 227.95 56.33 216.42 37.88 198.11 C 21.79 182.76 10.26 162.74 4.91 141.17 C -1.45 116.44 0.60 89.75 10.33 66.17 C 20.69 40.83 40.15 19.43 64.13 6.31 Z" />
                </svg>
                <svg class="messenger__launcher__icon" data-icon="chat" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"><path d="M2.803 21.18l-.02.006s7.64 13.786 26.914 5.424c0 0-1.484-1.734-4.36-3.48 3.242-3.708 4.42-9.01 2.622-13.95C25.323 1.94 17.297-1.784 10.032.86 2.767 3.507-.987 11.518 1.647 18.757c.313.86.7 1.668 1.156 2.424z" fill-rule="evenodd"></path></svg>
            </div>
        </div>
        <div class="messenger__launcher__close"></div>
    </div>
    <div class="messenger__launcher__copyright"><span class="messenger__launcher__copyright__text">Powered by</span> <span class="messenger__launcher__copyright__name">Yuap</span></div>

<script>

    var $ = this,
    $scope = $$($.root);

    $.photo = 'https://randomuser.me/api/portraits/women/' + _.random(1, 99) + '.jpg';
    $.name = _.shuffle(['Ирина', 'Светлана', 'Виктория', 'Вероника', 'Екатерина', 'Ольга', 'Мария', 'Надежда', 'Наталья'])[0];

    $.onShow = function(){
        $.active = !$.active;
        if (!$.active){
            _.onEndTransition($.buttons, function(){
                $.root.style.zIndex = "1";
                $.parent.root.setAttribute("data-overlay", $.active);
            });
        }
        else {
            $.root.style.zIndex = "6";
            $.parent.root.setAttribute("data-overlay", $.active);
        }
    };

    $.hide = function(){
        if (!$.active) return;

        $.update({
            active: false
        })
        _.onEndTransition($.buttons, function(){
            $.root.style.zIndex = "1";
            $.parent.root.setAttribute("data-overlay", false);
        });
    };

    $.handleClickOutside = function(e){
        if (!$.root.contains(e.target)) $.hide();
    };

    $.on("updated", function(){
        if ($.active){
            setTimeout(function(){
                document.addEventListener('click', $.handleClickOutside);
            }, 0);
        }
        else {
            document.removeEventListener('click', $.handleClickOutside)
        }
    });

</script>

</section-messenger>
