<ux-salary class="component">

    <btn-editable if={ $mode === "editing" } data={ $resume.salary }></btn-editable>

    <div onClick={ openEditable } onUpdate="none" class="{ opts.classname } { blur : !$resume.salary } { transition-none : editable }">
        { $resume.salary.amount ? _.numberFormat($resume.salary.amount, 0, ".", ".") : $store.resume.placeholder.salary.amount } { $store.currency.getTitleById($resume.salary.currency) }
        <sup class="flex-centered pos-tl c-white bg-primary fontSize-14 lineHeight-1 borderRadius-xxxl plr-xs nowrap ml-s" style="left:100%; height:22px; padding-bottom:1px;">{ $resume.salary.worktime ? $store.worktime.getTitleById($resume.salary.worktime) : $store.worktime.getTitleById($store.resume.placeholder.salary.worktime) }</sup>
    </div>

<script>

    var $ = this,
    $scope = $$($.root);

    $.editable = false;

    $.openEditable = function(){
        if ($mode === "editing"){
            $Editable.show("salary", {
                active: $store.resume.select('sections').get({'name': 'salary'}).active,
                title: $.opts.title,
                salary: $resume.salary,
                callback: function(active, salary){
                    $store.resume.select('sections', {'name': 'salary'}).set('active', active);
                    $resume.salary = salary ? salary : null;
                    $.editable = false;
                    $.update();
                }
            });
            $.editable = true;
        }
    };

</script>

</ux-salary>
