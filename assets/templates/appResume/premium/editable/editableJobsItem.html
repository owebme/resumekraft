<editable-jobs-item>

    <div class="row mb-m">
        <div class="col-md-9 pr-m xsm-pr-xss xsm-mb-s">
            <div class="row">
                <div class="col-md-14">
                    <div class="title title-l">Начало</div>
                </div>
                <div class="col-md-10 sm-mt-xs">
                    <div class="select select-l">
                        <select onChange={ $Editable.component.autoCommitItems } data-name="from.year">
                            <option each={ item in _.range(1940, new Date().getFullYear() + 1) } value={ item } selected={ editing.from.year == item }>{ item }</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="select select-l mt-s">
                <select onChange={ $Editable.component.autoCommitItems } data-name="from.month">
                    <option each={ item in _.range(1, 13) } value={ item } selected={ editing.from.month == item }>{ $store.month.getTitleById(item) }</option>
                </select>
            </div>
        </div>
        <div class="col-md-9 pl-m xsm-pl-xss transition-default { opacity-50 : editing.last }">
            <div class="row">
                <div class="col-md-14">
                    <div class="title title-l">Окончание</div>
                </div>
                <div class="col-md-10 sm-mt-xs">
                    <div class="select select-l">
                        <select onChange={ $Editable.component.autoCommitItems } data-name="to.year">
                            <option each={ item in _.range(1940, new Date().getFullYear() + 1) } value={ item } selected={ editing.to.year == item }>{ item }</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="select select-l mt-s">
                <select onChange={ $Editable.component.autoCommitItems } data-name="to.month">
                    <option each={ item in _.range(1, 13) } value={ item } selected={ editing.to.month == item }>{ $store.month.getTitleById(item) }</option>
                </select>
            </div>
            <div if={ editing.last } class="pos-abs-full"></div>
        </div>
        <div class="col-md-6 pl-m pt-l xsm-pl-xss xsm-pt-m xsm-mb-xxs">
            <ui-checkbox commit="autoCommit" value={ editing.last } title="по настоящее { 'время' : app.device.isPhone }" size="xl" color="white"></ui-checkbox>
        </div>
    </div>
    <div class="row mb-m">
        <div class="col-md-24">
            <input onInput={ $Editable.component.autoCommitItems } class="input input-l" type="text" placeholder="Занимаемая должность" data-name="post" autocomplete="off" value={ opts.item.post }>
        </div>
    </div>
    <div class="row mb-m">
        <div class="col-md-12">
            <input onInput={ $Editable.component.autoCommitItems } class="input input-l" type="text" placeholder="Название компании" data-name="company" autocomplete="off" value={ opts.item.company }>
        </div>
        <div class="col-md-12 xsm-mt-m">
            <input onInput={ $Editable.component.autoCommitItems } class="input input-l" type="text" placeholder="Город" data-name="city" autocomplete="off" value={ opts.item.city }>
        </div>
    </div>
    <div class="row mb-m">
        <div class="col-xs-24 xs-mt-m">
            <textarea onInput={ $Editable.component.autoCommitItems } class="textarea textarea-xl" placeholder="Описание обязанностей, функции" data-name="text" autocomplete="off">{ opts.item.text }</textarea>
        </div>
    </div>

    <div class="hr pt-m"></div>

<script>

    var $ = this;

    $.on("update", function(){
        $.editing = $.opts.item;
    });

    $.autoCommit = function(value){
        $.editing.last = value;
        $.update();
    };

</script>

</editable-jobs-item>
