<editable-jobs-item>

    <div class="row mb-m">
        <div class="col-md-9 pr-m xsm-pr-xss xsm-mb-s">
            <div class="row">
                <div class="col-md-14">
                    <div class="title title-l">Начало</div>
                </div>
                <div class="col-md-10 sm-mt-xs">
                    <div class="select select-l">
                        <select onChange={ $Editable.component.autoCommitItems } data-name="from.year">
                            <option each={ item in _.range(1940, new Date().getFullYear() + 1) } no-reorder value={ item } selected={ editing.from.year == item }>{ item }</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="select select-l mt-s">
                <select onChange={ $Editable.component.autoCommitItems } data-name="from.month">
                    <option each={ item in $store.month.getItems($store.resume.get("lang")) } value={ item._id } no-reorder selected={ editing.from.month == item._id }>{ item.title }</option>
                </select>
            </div>
        </div>
        <div class="col-md-9 pl-m xsm-pl-xss transition-default { opacity-50 : editing.last }">
            <div class="row">
                <div class="col-md-14">
                    <div class="title title-l">Окончание</div>
                </div>
                <div class="col-md-10 sm-mt-xs">
                    <div class="select select-l">
                        <select onChange={ $Editable.component.autoCommitItems } data-name="to.year">
                            <option each={ item in _.range(1940, new Date().getFullYear() + 1) } no-reorder value={ item } selected={ editing.to.year == item }>{ item }</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="select select-l mt-s">
                <select onChange={ $Editable.component.autoCommitItems } data-name="to.month">
                    <option each={ item in $store.month.getItems($store.resume.get("lang")) } value={ item._id } no-reorder selected={ editing.to.month == item._id }>{ item.title }</option>
                </select>
            </div>
            <div if={ editing.last } class="pos-abs-full"></div>
        </div>
        <div class="col-md-6 pl-m pt-l xsm-pl-xss xsm-pt-m xsm-mb-xxs">
            <ui-checkbox commit="autoCommit" value={ editing.last } title="по настоящее { 'время' : app.device.isPhone }" size="xl" color="white"></ui-checkbox>
        </div>
    </div>
    <div class="row mb-m">
        <div class="col-md-24">
            <editable-jobs-item-post item={ opts.item }></editable-jobs-item-post>
        </div>
    </div>
    <div class="row mb-m">
        <div class="col-sm-12 col-md-15">
            <editable-jobs-item-company item={ opts.item }></editable-jobs-item-company>
        </div>
        <div class="col-sm-12 col-md-9 xsm-mt-m">
            <editable-jobs-item-city item={ opts.item }></editable-jobs-item-city>
        </div>
    </div>
    <div class="row mb-m">
        <div class="col-xs-24 xs-mt-m">
            <div class="pos-rel">
                <textarea-expand onClick={ $Editable.component.textEdit } placeholder="Описание обязанностей, функции" data-name="text"></textarea-expand>
                <textarea onInput={ $Editable.component.autoCommitItems } class="textarea textarea-xl" placeholder="Описание обязанностей, функции" data-name="text" autocomplete="off">{ opts.item.text }</textarea>
            </div>
        </div>
    </div>

    <div class="hr pt-m"></div>

<script>

    var $ = this;

    $.on("update", function(){
        $.editing = $.opts.item;
    });

    $.autoCommit = function(value){
        $.editing.last = value;
        $.update();
    };

</script>

</editable-jobs-item>
