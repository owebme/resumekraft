<control-sections onClick={ open } class="control__sections" data-active="{ counts && counts > 0 ? true : false }">

    <div if={ counts && counts > 0 } class="control__sections__badge">{ counts }</div>
    <svg class="control__sections__svg" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" version="1.1" x="0px" y="0px" viewBox="0 0 100 125"><g transform="translate(0,-952.36218)"><path class="fill-primary" d="m 35.989836,958.39343 c -4.395689,0 -7.996877,3.60131 -7.996877,7.99716 l 0,38.17391 c -10.157656,1.4643 -18.024209,10.2536 -18.024209,20.8051 0,11.5702 9.453267,21.0238 21.023038,21.0238 9.849795,0 18.146185,-6.8519 20.398282,-16.0255 l 30.581804,0 c 4.395689,0 7.996876,-3.6014 7.996876,-7.9972 l 0,-43.98437 c 0,-4.39585 -3.601187,-7.99716 -7.996876,-7.99716 l -1.999219,0 0,-3.99858 c 0,-4.39585 -3.601188,-7.99716 -7.996876,-7.99716 l -35.985943,0 z m 0,3.99858 35.985943,0 c 2.249715,0 3.998438,1.74879 3.998438,3.99858 l 0,45.98371 c 0,2.2498 -1.748723,3.9985 -3.998438,3.9985 l -22.022648,0 c -1.284508,-2.688 -3.128215,-5.0841 -5.372901,-6.9975 l 25.396329,0 a 1.9994195,1.9994905 0 1 0 0,-3.9986 l -31.987504,0 a 1.9994195,1.9994905 0 0 0 -0.187427,0 2.0014143,2.0014853 0 0 0 -0.249903,0.031 c -1.764331,-0.5819 -3.627288,-0.9408 -5.560328,-1.0309 l 0,-37.98651 c 0,-2.24979 1.748723,-3.99858 3.998439,-3.99858 z m 1.811792,6.99752 a 2.0014143,2.0014853 0 1 0 0.187427,3.99858 l 31.987504,0 a 1.9994195,1.9994905 0 1 0 0,-3.99858 l -31.987504,0 a 1.9994195,1.9994905 0 0 0 -0.187427,0 z m 42.171027,4.99822 1.999219,0 c 2.249715,0 3.998438,1.74879 3.998438,3.99858 l 0,43.98437 c 0,2.2498 -1.748723,3.9986 -3.998438,3.9986 l -29.988286,0 c 0.01524,-0.327 0.03124,-0.6691 0.03124,-0.9997 0,-1.72 -0.231494,-3.3963 -0.624756,-4.9982 l 20.585709,0 c 4.395688,0 7.996876,-3.6013 7.996876,-7.9971 l 0,-37.98655 z m -39.172199,6.99752 a 2.0014143,2.0014853 0 1 0 0.187427,3.99858 l 25.989848,0 a 1.9994195,1.9994905 0 1 0 0,-3.99858 l -25.989848,0 a 1.9994195,1.9994905 0 0 0 -0.187427,0 z m 0,11.99574 a 2.0014143,2.0014853 0 1 0 0.187427,3.99858 l 25.989848,0 a 1.9994195,1.9994905 0 1 0 0,-3.99858 l -25.989848,0 a 1.9994195,1.9994905 0 0 0 -0.187427,0 z m -9.808668,15.02589 c 9.408855,0 16.962124,7.5536 16.962124,16.9627 0,9.4092 -7.553269,16.9628 -16.962124,16.9628 -9.408855,0 -16.962124,-7.5536 -16.962124,-16.9628 0,-9.4091 7.553269,-16.9627 16.962124,-16.9627 z m -8.184303,14.9635 a 2.0014143,2.0014853 0 1 0 0.187427,3.9985 l 15.993752,0 a 1.999419,1.99949 0 1 0 0,-3.9985 l -15.993752,0 a 1.999419,1.99949 0 0 0 -0.187427,0 z"/></g></svg>

<script>

    var $ = this;

    $.refresh = function(){
        $.update({
            counts: $.getCount()
        });
    };

    $.open = function(){
        $Editable.show("visible", {
            title: "Активные секции",
            sections: $resume.sections,
            callback: function(sections){
                if (sections){
                    $store.resume.select('sections').set(sections);
                }
            }
        });
    };

    $.getCount = function(){
        return _.filter($resume.sections, function(item){
            return item.active !== true;
        }).length;
    };

    $.counts = $.getCount();

</script>

</control-sections>
