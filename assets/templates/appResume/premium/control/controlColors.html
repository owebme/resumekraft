<control-colors class="control__colors">

    <div onClick={ changeColor } class="control__colors__item bg-{ $store.colors.getTitleByColor($root.theme) } control__colors__item--active"></div>
    <div class="control__colors__items">
        <div onClick={ onSelect } each={ item in $store.colors.get() } class="control__colors__item bg-{ item.title }"></div>
    </div>

<script>

    this.onSelect = function(){
        this.onChange(this.item.color);
    };

    this.onChange = function(color){
        $root.root.setAttribute("data-color", color);
        $root.theme = color;
    };

    this.changeColor = function(){
        if (app.device.isMobile){
            var item = $store.colors
                .select({'color': $root.theme})
                .right();

            if (!item) item = $store.colors.get(0);
            else item = item.get()

            this.onChange(item.color);
        }
    };

</script>

</control-colors>
