<control-fonts class="control__fonts">

    <div onClick={ changeFont } onUpdate="none" class="control__fonts__item control__fonts__item--active fontFamily-{ $State.get('font') }">Aa</div>
    <div class="control__fonts__items">
        <div onClick={ onSelect } onUpdate="none" each={ item in $store.fonts.getItems() } no-reorder class="control__fonts__item fontFamily-{ item._id }">Aa</div>
    </div>

<script>

    this.onSelect = function(){
        this.onChange(this.item._id);
    };

    this.onChange = function(font){
        $State.select('font').set(font);
    };

    this.changeFont = function(){
        if (app.device.isMobile){
            var item = $store.fonts
                .select({'_id': $State.get('font')})
                .right();

            if (!item) item = $store.fonts.get(0);
            else item = item.get()

            this.onChange(item._id);
        }
    };

</script>

</control-fonts>
