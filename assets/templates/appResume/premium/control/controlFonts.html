<control-fonts class="control__fonts">

    <div onClick={ changeFont } onUpdate="none" class="control__fonts__item control__fonts__item--active fontFamily-{ $State.get('font') }">Aa</div>
    <div class="control__fonts__items">
        <div onClick={ onSelect } onUpdate="none" each={ item in $store.fonts.get() } no-reorder class="control__fonts__item fontFamily-{ item }">Aa</div>
    </div>

<script>

    this.onSelect = function(){
        this.onChange(this.item);
    };

    this.onChange = function(font){
        $State.select('font').set(font);
    };

    this.changeFont = function(){
        if (app.device.isMobile){
            var items = $store.fonts.get(),
                counts = items.length - 1,
                index = _.indexOf(items, $State.get('font')),
                i = index + 1;

            if (i > counts) i = 0;

            this.onChange(items[i]);
        }
    };

</script>

</control-fonts>
