<resume-edit-finish class="oScreen screen-finish c-white zIndex-10 { showAnim : animate }" data-color="blue" data-open={ active }>

    <div class="pos-centered zIndex-2">
        <h1 class="mb-l anim anim-bt" delay-show="s" data-duration={ m : app.device.isPhone }>Закончить редактирование?</h1>
        <div class="inline">
            <div class="display-inlineBlock anim anim-scale xsm-mb-m" delay-show="m" data-duration={ m : app.device.isPhone }>
                <button onClick={ hide } class="btn btn-xxl btn-success mlr-s">Еще, нет</button>
            </div>
            <div class="display-inlineBlock anim anim-scale" delay-show="l" data-duration={ m : app.device.isPhone }>
                <button onClick={ close } class="btn btn-xxl c-blue btn-white-hover mlr-s">Закончить</button>
            </div>
        </div>
    </div>

    <div class="pos-centered-h t90 nowrap zIndex-1">
        <p class="fontSize-24 letterSpacing-0 anim anim-scale" delay-show="xl" data-duration={ m : app.device.isPhone }>Ваше резюме <span class="hidden-xs">уже</span> сохранено.</p>
    </div>

    <div class="pos-centered-v l100 zIndex-1">
        <div class="anim anim-rl" data-duration={ m : app.device.isPhone }>
            <div name="circuful" class="circuful"></div>
        </div>
    </div>

    <div class="screen__lines">
        <div class="screen__lines__item anim anim-bt" delay-show="s" data-duration="m"></div>
        <div class="screen__lines__item anim anim-bt" delay-show="m" data-duration="m"></div>
        <div class="screen__lines__item anim anim-bt" delay-show="l" data-duration="m"></div>
        <div class="screen__lines__item anim anim-bt" delay-show="xl" data-duration="m"></div>
    </div>

<script>

    var $ = this;

    $.active = false;
    $.animate = false;
    $.circuful = $$($["circuful"]);

    $.show = function(){
        if (app.device.isPhone){
            $.update({
                active: true
            })
            _.onEndTransition($.root, function(){
                $.update({
                    animate: true
                })
                $.chartRadial();
            });
        }
        else {
            $.update({
                active: true,
                animate: true
            })
            $.chartRadial();
        }
    };

    $.chartRadial = function(){
        $.circuful.circliful({
            animation: 1,
            animationStep: 6,
            foregroundBorderWidth: app.device.isMobile ? 8 : 9,
            backgroundBorderWidth: app.device.isMobile ? 3.5 : 4,
            percentageTextSize: 28,
            percent: $.parent.sections.percentage.p,
            backgroundColor: 'rgba(255,255,255,.15)',
            foregroundColor: '#fff',
            fontColor: '#fff'
        });
    };

    $.hide = function(){
        $.update({
            active: false,
            animate: false
        })
    };

    $.close = function(){
        $.hide();
        _.onEndTransition($.root, function(){
            $Sections.resume.edit.hide();
        });
    };

</script>

</resume-edit-finish>
