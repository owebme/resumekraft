<root-main-mobile class="pos-abs-full" data-app="private">

    <resume-list-mobile></resume-list-mobile>
    <resume-edit></resume-edit>
    <resume-section></resume-section>
    <resume-select></resume-select>
    <resume-sendmail></resume-sendmail>
    <section-notify></section-notify>
    <section-alert></section-alert>
    <section-pointer></section-pointer>
    <section-jqtest></section-jqtest>
    <section-payment-mobile></section-payment-mobile>
    <section-plan-mobile></section-plan-mobile>
    <section-loader-ajax></section-loader-ajax>
    <section-loader></section-loader>
    <section-progress></section-progress>

    <app-sections>
        <resume-stat-mobile></resume-stat-mobile>
        <section-inbox-mobile></section-inbox-mobile>
        <section-inbox-content-mobile></section-inbox-content-mobile>

        <section-likes-mobile></section-likes-mobile>

        <section-profile-mobile></section-profile-mobile>
        <section-profile-data-mobile></section-profile-data-mobile>
        <photo-upload></photo-upload>

        <ui-dropmenu></ui-dropmenu>
    </app-sections>

    <app-offers>
        <!-- <offer-plan></offer-plan> -->
        <offer-votes></offer-votes>
        <offer-jqtest></offer-jqtest>
    </app-offers>

    <app-overviews>
        <overview-premium></overview-premium>
        <overview-jqtest></overview-jqtest>
        <overview-functions></overview-functions>
    </app-overviews>

<script>

    $$ = window.jQuery || window.Zepto;

    $root = this;
    $rootScope = $$(this.root);

    $store.inbox.set([]);
    // $store.data.set([]);
    // $store.likes.set([]);

    this.on("before-mount", function(){
        this.init();
    });

    this.on("mount", function(){
        if (!app.device.isMobile && !app.metrika.get("offers.welcome.show")){
            $Sections.offers.welcome.show();
        }
        else {
            //$Sections.offers.welcome.unmount();

            if ($account.get("plan") == "premium"){
                // $Sections.offers.plan.unmount();
                // $Sections.resume.stat.offer.unmount();
                // $Sections.resume.inbox.offer.unmount();
                // $Sections.plan.unmount();
            }
            $root.one("ready", function(){
                $Sections.resume.list.ready = true;
            });
        }
        $afterlag.xs(function(){
            app.$dom.body.removeClass("appLoading");
            $root.trigger("ready");
        });
    });

    this.focus = function(value){
        $rootScope.attr("data-focus", value);
    };

    this.init = function(){
        $Sections = {
            profile: {
                section: $root.tags["section-profile-mobile"],
                data: $root.tags["section-profile-data-mobile"]
            },
            resume: {
                list: $root.tags["resume-list-mobile"],
                edit: $root.tags["resume-edit"],
                stat: $root.tags["resume-stat-mobile"],
                select: $root.tags["resume-select"],
                section: $root.tags["resume-section"],
                sendmail: $root.tags["resume-sendmail"]
            },
            offers: {
                welcome: $root.tags["offer-welcome"],
                // plan: $root.tags["offer-plan"],
                jqtest: $root.tags["offer-jqtest"],
                votes: $root.tags["offer-votes"]
            },
            // overview: {
            //     premium: $root.tags["overview-premium"],
            //     jqtest: $root.tags["overview-jqtest"],
            //     functions: $root.tags["overview-functions"]
            // },
            // jqtest: {
            //     section: $root.tags["section-jqtest"],
            //     list: $root.tags["section-jqtest"].tags["jqtest-list"],
            //     test: $root.tags["section-jqtest"].tags["jqtest-content"],
            //     result: $root.tags["section-jqtest"].tags["jqtest-result"]
            // },
            plan: $root.tags["section-plan-mobile"],
            likes: {
                section: $root.tags["section-likes-mobile"]
            },
            inbox: {
                section: $root.tags["section-inbox-mobile"],
                content: $root.tags["section-inbox-content-mobile"]
            },
            payment: $root.tags["section-payment-mobile"],
            photoUpload: $root.tags["photo-upload"],
            progress: $root.tags["section-progress"]
        };

        $Pointer = $root.tags["section-pointer"];
        $Notify = $root.tags["section-notify"];
        $Loader = $root.tags["section-loader"];
        $LoaderAjax = $root.tags["section-loader-ajax"];
        $Alert = $root.tags["section-alert"];
        $DropMenu = $root.tags["ui-dropmenu"];
    };

</script>

</root-main-mobile>
