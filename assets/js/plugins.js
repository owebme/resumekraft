!function(t,e,i,s,n){t.define("plugins.animate"),t.plugins.animate=function(t,i){var s=this;this.groups=[],this.active=!1,this.options=i,this.scope=e(t),this.scope.find("*").each(function(){var t=this.getAttribute("class");if(t&&t.match(/anim-group/)){var e=t.match(/anim-group(\d+)/)[1],i=t.match(/anim-delay-(\w+)/),o=n.findWhere(s.groups,{num:e}),a={elem:this,delay:i&&i.length&&i[1]?s.delay.getNumByTitle(i[1]):"0"};o?o.items.push(a):s.groups.push({num:e,items:[a]})}})},t.plugins.animate.prototype={show:function(t){var e=this;this.groups.length&&(n.each(n.sortArray(this.groups,"num"),function(i,s){!function(){if(e.groups[s+1]){var o=null,a=null;e.options&&e.options.showAfter?(o=n.sortArray(i.items,"delay","asc"),a=o[e.options.showAfter-1].elem):(o=n.sortArray(i.items,"delay","desc"),a=o[0].elem),a&&n.onEndTransition(a,function(){e.scope.addClass("showAnim-group"+(1*i.num+1)),e.groups.length==1*i.num+1&&n.isFunction(t)&&t()})}}(i,s),0==s&&e.scope.addClass("showAnim-group"+i.num)}),this.active=!0)},hide:function(t){var e=this;if(this.groups.length){if(this.options&&this.options.hide&&"noanimate"==this.options.hide&&(this.scope.addClass("transitionAll-none"),setTimeout(function(){e.scope.removeClass("transitionAll-none")},50)),this.scope.removeClass(n.map(n.pluck(this.groups,"num"),function(t){return"showAnim-group"+t}).join(" ")),n.isFunction(t)){var i=n.sortArray(this.groups[0].items,"delay","desc")[0].elem;n.onEndTransition(i,function(){t()})}this.active=!1}},delay:{items:[{title:"xs",num:"1"},{title:"s",num:"2"},{title:"m",num:"3"},{title:"l",num:"4"},{title:"xl",num:"5"}],getNumByTitle:function(t){return n.findWhere(this.items,{title:t}).num}}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.chartRadial"),t.plugins.chartRadial=function(t,i){t&&(this.active=!1,this.scope=e(t),this.options=i,this.items=[],this.rendered=!1,this.init())},t.plugins.chartRadial.prototype={init:function(){if(!this.active){var i={animate:!t.device.isPhone,lineWidth:t.device.isPhone?16.5:24,colors:["#0084ff","#ff2d55","#ffc43a"],container:"chart__radial__graph",graphItem:"chart__radial__graph",labels:"chart__radial__labels",labelItem:"chart__radial__label",labelTitle:"chart__radial__label__title",labelColor:"chart__radial__label__color",labelDash:t.device.isPhone?"&nbsp; &ndash; &nbsp;":"&nbsp; &mdash; &nbsp;"};this.options&&n.extend(i,this.options),this.options=i,this.$graph=e('<div class="'+i.container+'">').appendTo(this.scope),this.$graphItem=e("<div>"),this.$graph.append(this.$graphItem,this.$graphItem.clone(),this.$graphItem.clone()),this.$graph.find("div").each(function(t,s){e(this).addClass(i.graphItem+(t+1))}),this.$labels=e('<div class="'+i.labels+'">').appendTo(this.scope),this.$labelItem=e('<div class="'+i.labelItem+'"><div class="'+i.labelColor+'"></div>'+i.labelDash+'<span class="'+i.labelTitle+'"></span></div>'),this.$labels.append(this.$labelItem,this.$labelItem.clone(),this.$labelItem.clone()),this.active=!0}},render:function(t){var i=this;!t||t&&t.length<3||(this.rendered?n.each(this.items,function(e,i){e.reset(),e.start(n.isNumber(t[i].value)?t[i].value:n.isNumber(t[i])?t[i]:0)}):(this.$graph.children("div").each(function(e,s){i.items.push(i.build(this,t[e].value,{color:i.options.colors[e],autostart:!0}))}),this.$labels.children("div").each(function(s){var n=e(this);n.find("."+i.options.labelColor).css("backgroundColor",i.options.colors[s]),n.find("."+i.options.labelTitle).text(t[s].title)}),this.rendered=!0))},build:function(t,e,i){function s(t){_||(g.percent=f?e:v,g.percent==t?a(g.percent):(_=!0,S.percent=t,TweenLite.to(g,b,S)))}function n(){a(g.percent)}function o(){_=!1}function a(t){var e=h/2;t=Math.max(t,.005),c.clearRect(0,0,h,h),c.beginPath(),c.globalAlpha=.2,c.arc(e,e,e-u/2,0,2*Math.PI),c.stroke(),c.beginPath(),c.arc(e,e,e-u/2,0-Math.PI/2,2*Math.PI*t/100-Math.PI/2),c.globalAlpha=1,c.stroke()}function r(){a(v)}var l=document.createElement("canvas"),c=l.getContext("2d"),h=t.offsetWidth,p=i||{},u=this.options.lineWidth,d=p.color||"#fff",f=!this.options.animate||!1,v=p.from||0,m=e,g={percent:v},_=!1,b=this.options.animate?2:0,S={ease:"easeInOutCubic",onUpdate:n,onComplete:o};return l.width=l.height=h,t.appendChild(l),c.lineWidth=u,c.lineCap="round",c.strokeStyle=d,f&&(p.autostart=!0),p.autostart?s(m):r(),{start:s,reset:r}},destroy:function(){this.scope.empty(),this.items=[],this.rendered=!1,this.active=!1}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.define"),t.plugins.define=function(t){this.__name__=t,n.extend(this,window[t]||{})},t.plugins.define.prototype={module:function(t,e){var i,s=t.split("."),n=window[this.__name__],o=s.length;for(i=0;i<o;i++)"undefined"==typeof n[s[i]]&&(n[s[i]]={}),o-1==i&&e&&(n[s[i]]=e),n=n[s[i]];return n}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.eventsEmitter"),t.plugins.eventsEmitter={init:function(t){n.extend(t,this.events)},events:{_events:{},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},once:function(t,e){function i(n){s.off(t,i),void 0!==n?e(n):e()}var s=this;this.on(t,i)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},trigger:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;e<i;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},destroyEvents:function(){var t=this;n.each(this._events,function(e,i){delete t._events[i]})}}}}(app,$,app.$dom,app.events,app.utils),app.plugins.marqueeEffects=function(t){var e={},t=t||{},i=app.prefixed,s=t.isPhone===!0||app.device.isPhone;return"static"==t.method?(e.show=function(t,e,s,n,o){t[0].style[i.transform]="translateY("+Math.round((o||0)+s-e*s)+"px) translateZ(0)"},e.hide=function(t,e,s,n,o){t[0].style[i.transform]="translateY("+Math.round((o||0)+-(n-1)*s-e*s)+"px) translateZ(0)"},e.move=function(t,e,s){t[0].style[i.transform]="translateY("+Math.round(-e*s)+"px) translateZ(0)"}):(e.light={},e.light.show=function(t,e,s,n){t[0].style.opacity=1,t[0].style[i.transform]="translateY("+Math.round(s-e*s)+"px) translateZ(0)",0==e&&(t[0].style[i.transform]="translateY(110%)")},e.light.hide=function(t,e,s,n){t[0].style.opacity=(1-.4*e).toFixed(3),t[0].style[i.transform]="translateY("+Math.round(-(n-1)*s-e*s*.5)+"px) translateZ(0)",1==e&&(t[0].style[i.transform]="translateY(-110%)"),0==e&&(t[0].style[i.transform]="translateY("+Math.round(-(n-1)*s)+"px) translateZ(0)")},e.light.move=function(t,e,s){t[0].style.opacity=1,t[0].style[i.transform]="translateY("+Math.round(-e*s)+"px) translateZ(0)"},e.space={},e.space.show=function(t,e){t[0].style.opacity=.33+.67*e;var n="";0==e?n="translate3d(110%, 0, 0)":s?n="perspective(500px) translate3d("+(-8+8*e)+"%, 0, 0) rotateY("+(-6+6*e)+"deg) scale("+(.8+.2*e)+")":(n="perspective(500px) translate3d("+(-4+4*e)+"%, 0, 0) scale("+(.9+.1*e)+")",app.device.isFirefox||(n=n+"rotateY("+(-4+4*e)+"deg)")),t[0].style[i.transform]=n},e.space.hide=function(t,e){t[0].style.opacity=1,t[0].style[i.transform]="translate3d("+-100*e+"%, 0, 0)",1==e&&(t[0].style[i.transform]="translate3d(-110%, 0, 0)")},e.fold={},e.fold.show=function(t,e){t[0].style.opacity=1,t[0].style[i.transform]="translateY("+(100-100*e)+"%)"},e.fold.hide=function(t,e){t[0].style.opacity=1-.67*e,t[0].style[i.transform]="perspective(500px) translateY("+4*e+"%) rotateX("+3*-e+"deg) scale("+(1-.05*e)+")",1==e&&(t[0].style[i.transform]="translateY(-101%)")}),e},app.plugins.marquee=function(t,e){var i=t.find(e.screens),s=$('<div class="'+e.spaceClass+'" />').prependTo(t),n=[],o=app.plugins.marqueeEffects({isPhone:e.phoneEmulate})[e.effect],a=(t.data("name"),{index:0,prevIndex:0,progress:0,size:0,scrolling:!1,enabled:!0,section:null,_events:{},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;e<i;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}}});i.each(function(t){var i=$(this),o=i.api("screen");o.state={isVisible:!1,isEndShow:!1,isStartShow:!1,isFullShow:!1,isFullHide:!0};var a={index:t,title:i[0].getAttribute("data-"+(e.dataAttr?e.dataAttr:"marquee")),block:i,fake:$('<div class="'+e.spaceClass+'__screen" />'),api:o,ratio:1,enable:!0};n.push(a),s.append(a.fake)});var r=function(){var i=0;a.size=e.vertical?t.height():app.sizes.width,$.each(n,function(s,n){if(e.vertical){var o=Math.max(n.block.outerHeight(),n.block.find(e.contentClass?"."+e.contentClass:".screen__frame").outerHeight());o>a.size?(n.block.addClass(e.longClass?e.longClass:"screen__long"),n.size=o):(n.block.removeClass(e.longClass?e.longClass:"screen__long"),n.size=t.height()),n.fake.width(app.sizes.width),n.fake.height(n.size)}else n.size=app.sizes.width,n.fake.width(n.size),n.fake.height(app.sizes.height);e.hideSections&&(!e.activeClass&&s>0||e.activeClass&&!n.block.hasClass(e.activeClass))&&n.block.css("display","none"),n.offset=i,n.ratio=n.size/a.size,i+=n.size})};r();var l=new IScroll(t[0],{marquee:!0,disableMouse:!1,mouseWheel:e.mousewheel,scrollX:!e.vertical,scrollY:e.vertical,bounce:!0,snap:"."+e.spaceClass+"__screen",eventPassthrough:!e.vertical||"horizontal",probeType:3,snapSpeed:e.duration,preventDefault:!0,scrollbars:!!e.vertical&&"custom",interactiveScrollbars:e.vertical&&!app.device.support.touch,fake:!0});a.setLimits=function(t){t=Math.min(Math.max(0,t),n.length-1);var i=t>=n.length-1,s=0==t;l[e.vertical?"minScrollY":"minScrollX"]=-n[t].offset+(s?0:n[t-1].size),l[e.vertical?"maxScrollY":"maxScrollX"]=-n[t].offset-(i?n[t].size-a.size:n[t].size),l.currentPage={x:0,y:0,pageX:0,pageY:0},l.currentPage[e.vertical?"y":"x"]=-n[t].offset,l.currentPage[e.vertical?"pageY":"pageX"]=t},a.update=function(){for(var t=-Math.round(l[e.vertical?"y":"x"]),i=0,s=0;s<n.length;s++)t>=n[s].offset&&(i=s);a.position=(t-n[i].offset)/n[i].size,a.progress=i+a.position,a.index!=i&&(a.prevIndex=a.index,a.index=i)},a.hideInvisibles=function(){for(var t=0;t<n.length;t++)t!=a.index&&t!=a.index+1&&(t>a.index+1&&o.show(n[t].block,0,a.size,n[t].ratio),t<a.index&&o.hide(n[t].block,1,a.size,n[t].ratio),e.hideSections&&(n[t].block[0].style.display="none"))},a.callScreensAPI=function(){var t=a.index>=n.length-1,i=1/n[a.index].ratio,s={top:0,bottom:0};if(s.top=a.position/i,s.bottom=a.position*n[a.index].ratio-(n[a.index].ratio-1),s.bottom>.6?(n[a.index].api.state.isVisible&&(n[a.index].api.state.isVisible=!1,n[a.index].block.triggerHandler("hide")),t||n[a.index+1].api.state.isVisible||(n[a.index+1].api.state.isVisible=!0,n[a.index+1].block.triggerHandler("show"))):s.top>.4&&(n[a.index]&&!n[a.index].api.state.isVisible&&(n[a.index].api.state.isVisible=!0,n[a.index].block.triggerHandler("show")),!t&&n[a.index+1].api.state.isVisible&&(n[a.index+1].api.state.isVisible=!1,n[a.index+1].block.triggerHandler("hide"))),t||(s.bottom>.1&&!n[a.index+1].api.state.isStartShow?(n[a.index+1].api.state.isStartShow=!0,n[a.index+1].block.triggerHandler("startShow")):s.bottom<.1&&n[a.index+1].api.state.isStartShow&&(n[a.index+1].api.state.isStartShow=!1),s.bottom>.9&&!n[a.index+1].api.state.isEndShow?(n[a.index+1].api.state.isEndShow=!0,n[a.index+1].block.triggerHandler("endShow")):s.bottom<.9&&n[a.index+1].api.state.isEndShow&&(n[a.index+1].api.state.isEndShow=!1)),n[a.index]&&s.bottom<.9&&!n[a.index].api.state.isEndShow?(n[a.index].api.state.isEndShow=!0,n[a.index].block.triggerHandler("endShow")):n[a.index]&&s.bottom>.9&&n[a.index].api.state.isEndShow&&(n[a.index].api.state.isEndShow=!1),n[a.index]&&s.bottom<.1&&!n[a.index].api.state.isStartShow?(n[a.index].api.state.isStartShow=!0,n[a.index].block.triggerHandler("startShow")):n[a.index]&&s.bottom>.1&&n[a.index].api.state.isStartShow&&(n[a.index].api.state.isStartShow=!1),n[a.index]&&s.top>=0&&s.bottom<=0){n[a.index].api.state.isFullShow||(n[a.index].api.state.isFullShow=!0,n[a.index].block.triggerHandler("fullShow"));for(var o=0;o<n.length;o++)o!=a.index&&(n[o].api.state.isFullShow=!1)}else for(var o=0;o<n.length;o++)n[o].api.state.isFullShow=!1;for(var r=[Math.floor(a.progress),Math.ceil(a.progress)],o=0;o<n.length;o++)o==r[0]||o==r[1]?(n[o].api.state.isFullHide=!1,e.hideSections&&(n[o].block[0].style.display="block"),a.section=n[o].block[0].getAttribute("data-"+(e.dataAttr?e.dataAttr:"marquee")),e.activeClass&&n[o].block.addClass(e.activeClass)):n[o].api.state.isFullHide||(e.hideSections&&(n[o].block[0].style.display="none"),n[o].block.triggerHandler("fullHide"),n[o].api.state.isFullHide=!0,e.activeClass&&n[o].block.removeClass(e.activeClass))},a.markNav=function(){e.navPrev&&e.navPrev[a.progress<=.5?"addClass":"removeClass"]("i-disabled"),e.navNext&&e.navNext[a.progress>=n.length-1.5?"addClass":"removeClass"]("i-disabled")},a.draw=function(){if(!o.move||n[a.index].ratio*a.position>=n[a.index].ratio-1){var t=1-Math.abs(n[a.index].ratio*a.position-n[a.index].ratio);a.index>=0&&o.hide(n[a.index].block,t,a.size,n[a.index].ratio),a.index<n.length-1&&o.show(n[a.index+1].block,t,a.size,n[a.index+1].ratio),0!==t&&1!==t||a._execEvent("change")}else a.index>=0&&o.move(n[a.index].block,n[a.index].ratio*a.position,a.size,n[a.index].ratio),a.index<n.length-1&&o.show(n[a.index+1].block,0,a.size,n[a.index+1].ratio);a.hideInvisibles(),a.markNav()},a.onScrollStart=function(){a.scrolling=!0},a.onScroll=function(){if(index=0,a.update(),a.draw(),a.callScreensAPI(),l.moved){for(var t=l[e.vertical?"y":"x"]-(e.vertical?-l.distY:l.pointX),i=0;i<n.length;i++)t<=-n[i].offset&&t>=-n[i].offset-n[i].size&&(index=i);a.setLimits(index)}else if(l.indicators&&l.indicators[0].moved){for(var i=0;i<n.length;i++)l[e.vertical?"y":"x"]-a.size/2<=-n[i].offset&&l[e.vertical?"y":"x"]+a.size/2>=-n[i].offset-n[i].size&&(index=i);a.setLimits(index)}},a.grabTimer=!1;var c=function(){clearTimeout(a.grabTimer),a.scrolling||(a.scrolling=!0)},h=function(){a&&clearTimeout(a.grabTimer),a&&a.scrolling&&(a.scrolling=!1)};if(l.on("beforeWheelSnap",function(){index=0;for(var t=0;t<n.length;t++)l[e.vertical?"y":"x"]-a.size/2<=-n[t].offset&&l[e.vertical?"y":"x"]+a.size/2>=-n[t].offset-n[t].size&&(index=t);l.absStartX=e.vertical?0:-n[index].offset,l.absStartY=-e.vertical?-n[index].offset:0,a.setLimits(index)}),a.onScrollEnd=function(){a.refresh()},a.refresh=function(){a.update(),a.draw(),a.callScreensAPI(),a.setLimits(a.index)},a.resize=function(){if(!a)return!1;r();var t=l.y;l.refresh(),t!==l.y&&l.scrollBy(0,t-l.y,0),a.refresh()},a.enable=function(){a.enabled=!0,l.enable(),a.enableKeyboard()},a.disable=function(){a.enabled=!1,l.disable(),a.disableKeyboard()},l.on("scrollStart",function(){return!!a&&void a.onScrollStart()}),l.on("scroll",function(){return!!a&&(a.onScroll(),void(l.moved&&c()))}),l.on("scrollEnd",function(){return!!a&&(a.onScrollEnd(),void h())}),l.on("grab",function(){if(!a)return!1;c(),a.grabTimer=setTimeout(function(){l&&l.reset(),h()},500);for(var t=0,i=l[e.vertical?"y":"x"]-l[e.vertical?"pointY":"pointX"],s=0;s<n.length;s++)i<=-n[s].offset&&i>=-n[s].offset-n[s].size&&(t=s);a.setLimits(t)}),app.device.isMobile||app.$dom.window.on("resize",a.resize),a.setLimits(0),a.scrollTo=function(t,i){i=void 0===i&&0!==i?550:i,e.hideSections&&(n[t].block[0].style.display="block"),l.goToPage(e.vertical?0:t,e.vertical?t:0,i,0!=i&&IScroll.utils.ease.cubicOut)},a.prev=function(t){if(a.scrolling)return!1;t=void 0===t?e.duration:t;var i=-l.y-n[a.index].offset;e.vertical&&i?l.scrollBy(0,Math.min(i,a.size),t,IScroll.utils.ease.cubicOut):e.vertical&&l.y<=-a.size?l.scrollBy(0,a.size,t,IScroll.utils.ease.cubicOut):a.index>0&&l.prev(t,IScroll.utils.ease.cubicOut)},a.next=function(t){if(a.scrolling)return!1;t=void 0===t?e.duration:t;var i=n[a.index].offset+n[a.index].size-(-l.y+a.size);i>.1*a.size&&e.vertical?l.scrollBy(0,-Math.min(i,a.size),t,IScroll.utils.ease.cubicOut):a.index<n.length-1&&l.next(t,IScroll.utils.ease.cubicOut)},a.get=function(t){return a[t]},a.hideScreen=function(t){e.controlInvisible&&d[t].enable&&(d[t].enable=!1,d[t].block.css("display","none"),d[t].fake.remove(),a.callScreensVisible(),a.resize())},a.showScreen=function(t){e.controlInvisible&&!d[t].enable&&(d[t].enable=!0,d[t].fake=$('<div class="'+e.spaceClass+'__screen" />'),s.find("."+e.spaceClass+"__screen:eq("+(t-1)+")").after(d[t].fake),a.callScreensVisible(),a.resize())},a.callScreensVisible=function(){for(var t=[],e=0,i=0;i<d.length;i++)d[i].enable&&(t.push(d[i]),t[e].index=e,e++);t.length!==n.length&&(n=t)},a.destroy=function(){t.find("."+e.spaceClass).remove(),t.removeData("marquee"),l.destroy(),l=null,a=null},e.vertical){var p=t.find(".iScrollVerticalScrollbar");p.addClass("ui-scroll").prepend('<div class="ui-scroll__bar" />'),p.find(".iScrollIndicator").addClass("ui-scroll__handle").prepend('<div class="ui-scroll__handle__inner" />')}e.navPrev&&e.navPrev.on("click",function(){a.prev(app.device.isPhone?500:700)}),e.navNext&&e.navNext.on("click",function(){a.next(app.device.isPhone?500:700)});var u="keydown.marquee-"+String(Math.round((new Date).getTime()/1e3))+(e.vertical?"v":"h");if(a.enableKeyboard=function(){app.device.support.touch||app.$dom.document.on(u,function(t){$(t.target).is("input,textarea,select")||(t.which==(e.vertical?38:37)&&a.prev(app.device.isPhone?500:700),t.which==(e.vertical?40:39)&&a.next(app.device.isPhone?500:700))})},a.disableKeyboard=function(){app.device.support.touch||app.$dom.document.off(u)},a.scroll=l,e.controlInvisible)for(var d=[],f=0;f<n.length;f++)d.push(n[f]);return t.data("marquee",{screens:n,onScrollStart:$.noop,onScrollEnd:$.noop,scrollTo:a.scrollTo,get:a.get,scroll:l,update:a.onScroll,resize:a.resize,enable:a.enable,disable:a.disable,destroy:a.destroy,enableKeyboard:a.enableKeyboard,disableKeyboard:a.disableKeyboard}),a},function(t,e,i,s,n){t.define("plugins.marquee.playScreens"),t.plugins.marquee.playScreens=function(t,e){this.parent=t,this.options=e||{},this.options.duration=this.options.duration||800,this.options.interval=this.options.interval||3.33,this.options.pause=this.options.pause||5,this.options.round=this.options.round||!1,this.options.ease=IScroll.utils.ease.cubicOut,this.interval=null,this.timeout=null},t.plugins.marquee.playScreens.prototype={init:function(){var t=this;void 0!==this.options.run&&(this.options.run===!0?this.run():n.isNumber(this.options.run)&&setTimeout(function(){t.run()},1e3*this.options.run)),this.parent.scope.on("click.play",function(){t.pause()})},run:function(t){var e=this;t&&e.rotate(),this.interval=setInterval(function(){e.rotate()},1e3*this.options.interval)},rotate:function(){var t=this.parent.marquee.index,e=this.parent.items.length,i=t+2>e?0:t+1;if(!(e<2))if(0==i&&this.options.round){var s=this.parent.scope.find(this.parent.options.screens+":first").children(),n=s.css("backgroundImage"),o=this.parent.scope.find(this.parent.options.screens+":last").children(),a=o.css("backgroundImage");s.css("backgroundImage",a),o.css("backgroundImage",n),this.parent.marquee.scrollTo(0,0),this.parent.marquee.scrollTo(1,this.options.duration,this.options.ease)}else this.parent.marquee.scrollTo(i,this.options.duration,this.options.ease)},pause:function(){var t=this;this.clear(),this.timeout=setTimeout(function(){t.rotate(),t.run()},1e3*this.options.pause)},clear:function(){clearInterval(this.interval),clearTimeout(this.timeout)},destroy:function(){this.clear(),this.parent.scope.off("click.play")}}}(app,$,app.$dom,app.events,app.utils),app.plugins.marqueeStatic=function(t,e){var i={index:0,vertical:!0,screens:".screen",mousewheel:!0,duration:550,prev:!1,next:!1},s=t.find(i.screens),n=[],o=app.plugins.marqueeEffects({method:"static",isPhone:e.phoneEmulate}),a=t.data("fixed"),r=t.data("name"),l={$block:t,index:0,prevIndex:0,progress:0,size:0,scrolling:!1,enabled:!0,duration:i.duration};s.each(function(t){var e=$(this),s=e.api("screen");s.state={isVisible:!1,isEndShow:!1,isStartShow:!1,isFullShow:!1,isFullHide:i.index!=t};var o={index:t,$block:e,api:s,ratio:1};n.push(o),t&&i.nextClass&&e.addClass(i.nextClass)});var c=function(){var e=0;l.size=i.vertical?t.height():app.sizes.width,$.each(n,function(t,s){if(i.vertical){s.$block.removeClass("screen__long").height(l.size);var n=s.$block.find(".screen__content"),o=n.length?Math.max(l.size,n.length?n.outerHeight():0):0;!a&&o>l.size?(s.$block.addClass("screen__long"),s.size=o,s.$block.height(o)):s.size=l.size}else s.size=app.sizes.width;s.offset=e,s.ratio=s.size/l.size,e+=s.size})};c();var h=new IScrollStatic(t[0],{disableMouse:!0,mouseWheel:i.mousewheel,invertWheelDirection:!0,scrollX:!i.vertical,scrollY:i.vertical,bounce:!0,snap:".screen",eventPassthrough:!i.vertical||"horizontal",probeType:3,tap:!1,click:!1,snapSpeed:350,preventDefault:!0,scrollbars:!!i.vertical&&"custom",interactiveScrollbars:i.vertical&&!app.device.support.touch,prevTrigger:i.prev,nextTrigger:i.next});h.disable(),l.updateState=function(){h.scrollerHeight>h.wrapperHeight?l.enable():l.disable()},l.setLimits=function(t){t=Math.min(Math.max(0,t),n.length-1);var e=t>=n.length-1,s=0==t;h[i.vertical?"minScrollY":"minScrollX"]=-n[t].offset+(s?0:n[t-1].size),h[i.vertical?"maxScrollY":"maxScrollX"]=-n[t].offset-(e?n[t].size-l.size:n[t].size),h.currentPage={x:0,y:0,pageX:0,pageY:0},h.currentPage[i.vertical?"y":"x"]=-n[t].offset,h.currentPage[i.vertical?"pageY":"pageX"]=t},l.update=function(){for(var t=-Math.round(h[i.vertical?"y":"x"]),e=0,s=0;s<n.length;s++)t>=n[s].offset&&(e=s);l.position=(t-n[e].offset)/n[e].size,l.progress=e+l.position,l.index!=e&&(l.prevIndex=l.index,l.index=e)},l.hideInvisibles=function(){},l.callScreensAPI=function(){var t=l.index>=n.length-1,e=1/n[l.index].ratio,i={top:0,bottom:0};if(i.top=l.position/e,i.bottom=l.position*n[l.index].ratio-(n[l.index].ratio-1),app.device.isMobile&&(i.bottom>.6?(n[l.index].api.state.isVisible&&(n[l.index].api.state.isVisible=!1,n[l.index].$block.triggerHandler("hide")),t||n[l.index+1].api.state.isVisible||(n[l.index+1].api.state.isVisible=!0,n[l.index+1].$block.triggerHandler("show"))):i.top>.4&&(n[l.index]&&!n[l.index].api.state.isVisible&&(n[l.index].api.state.isVisible=!0,n[l.index].$block.triggerHandler("show")),!t&&n[l.index+1].api.state.isVisible&&(n[l.index+1].api.state.isVisible=!1,n[l.index+1].$block.triggerHandler("hide"))),t||(i.bottom>.1&&!n[l.index+1].api.state.isStartShow?(n[l.index+1].api.state.isStartShow=!0,n[l.index+1].$block.triggerHandler("startShow")):i.bottom<.1&&n[l.index+1].api.state.isStartShow&&(n[l.index+1].api.state.isStartShow=!1),i.bottom>.9&&!n[l.index+1].api.state.isEndShow?(n[l.index+1].api.state.isEndShow=!0,n[l.index+1].$block.triggerHandler("endShow")):i.bottom<.9&&n[l.index+1].api.state.isEndShow&&(n[l.index+1].api.state.isEndShow=!1)),n[l.index]&&i.bottom<.9&&!n[l.index].api.state.isEndShow?(n[l.index].api.state.isEndShow=!0,n[l.index].$block.triggerHandler("endShow")):n[l.index]&&i.bottom>.9&&n[l.index].api.state.isEndShow&&(n[l.index].api.state.isEndShow=!1),n[l.index]&&i.bottom<.1&&!n[l.index].api.state.isStartShow?(n[l.index].api.state.isStartShow=!0,n[l.index].$block.triggerHandler("startShow")):n[l.index]&&i.bottom>.1&&n[l.index].api.state.isStartShow&&(n[l.index].api.state.isStartShow=!1)),n[l.index]&&i.top>=0&&i.bottom<=0){n[l.index].api.state.isFullShow||(n[l.index].api.state.isFullShow=!0,app.device.isMobile||n[l.index].$block.triggerHandler("show"),n[l.index].$block.triggerHandler("fullShow"));for(var s=0;s<n.length;s++)s!=l.index&&n[s].api.state.isFullShow&&(n[s].api.state.isFullShow=!1)}else for(var s=0;s<n.length;s++)n[s].api.state.isFullShow&&(n[s].api.state.isFullShow=!1);var o=[Math.floor(l.progress),Math.ceil(l.progress)];if(l.animated)return!1;for(var s=0;s<n.length;s++)s==o[0]||s==o[1]?n[s].api.state.isFullHide=!1:n[s].api.state.isFullHide||(app.device.isMobile||n[l.index].$block.triggerHandler("hide"),n[s].$block.triggerHandler("fullHide"),n[s].api.state.isFullHide=!0)},l.markNav=function(){i.navPrev&&i.navPrev[l.progress<=.5?"addClass":"removeClass"]("i-disabled"),i.navNext&&i.navNext[l.progress>=n.length-1.5?"addClass":"removeClass"]("i-disabled")},l.draw=function(){if(l.animated)return!1;if(!o.move||n[l.index].ratio*l.position>=n[l.index].ratio-1){var t=1-Math.abs(n[l.index].ratio*l.position-n[l.index].ratio);l.index>=0&&o.hide(n[l.index].$block,t,l.size,n[l.index].ratio),l.index<n.length-1&&o.show(n[l.index+1].$block,t,l.size,n[l.index+1].ratio)}else l.index>=0&&o.move(n[l.index].$block,n[l.index].ratio*l.position,l.size,n[l.index].ratio),l.index<n.length-1&&o.show(n[l.index+1].$block,0,l.size,n[l.index+1].ratio);l.hideInvisibles(),l.markNav()},l.onScrollStart=function(){l.scrolling=!0},l.onScroll=function(){if(index=0,l.update(),app.device.isMobile&&l.callScreensAPI(),h.moved){for(var t=h[i.vertical?"y":"x"]-h[i.vertical?"pointY":"pointX"],e=0;e<n.length;e++)t<=-n[e].offset&&t>=-n[e].offset-n[e].size&&(index=e);l.setLimits(index)}else if(h.indicators&&h.indicators[0].moved){for(var e=0;e<n.length;e++)h[i.vertical?"y":"x"]-l.size/2<=-n[e].offset&&h[i.vertical?"y":"x"]+l.size/2>=-n[e].offset-n[e].size&&(index=e);l.setLimits(index)}},l.grabTimer=!1;var p=function(){clearTimeout(l.grabTimer),l.scrolling||(l.scrolling=!0)},u=function(){l&&clearTimeout(l.grabTimer),l&&l.scrolling&&(l.scrolling=!1)};if(h.on("beforeWheelSnap",function(){index=0;for(var t=0;t<n.length;t++)h[i.vertical?"y":"x"]-l.size/2<=-n[t].offset&&h[i.vertical?"y":"x"]+l.size/2>=-n[t].offset-n[t].size&&(index=t);h.absStartX=i.vertical?0:-n[index].offset,h.absStartY=-i.vertical?-n[index].offset:0,l.setLimits(index)}),l.onScrollEnd=function(){l.onScroll(),app.utils.raf(l.refresh)},l.refresh=function(){l.update(),l.callScreensAPI(),l.setLimits(l.index)},l.resize=function(){if(!l)return!1;c(),l.enabled&&n[l.index].$block.triggerHandler("endShow");var t=h.y;h.refresh(),t!==h.y&&h.scrollBy(0,t-h.y,0),l.refresh(),l.updateState()},l.enable=function(){l.enabled=!0,h.enable(),l.enableKeyboard(),t.on("dragstart.marquee",function(){return!1})},l.disable=function(){l.enabled=!1,h.disable(),l.disableKeyboard(),t.off("dragstart.marquee")},h.on("scrollStart",function(){return!!l&&void l.onScrollStart()}),h.on("scroll",function(){return!!l&&(l.onScroll(),void(h.moved&&p()))}),h.on("scrollEnd",function(){return!!l&&(l.onScrollEnd(),void u())}),h.on("grab",function(){if(!l)return!1;p(),l.grabTimer=setTimeout(function(){h&&h.reset(),u()},500);for(var t=0,e=h[i.vertical?"y":"x"]-h[i.vertical?"pointY":"pointX"],s=0;s<n.length;s++)e<=-n[s].offset&&e>=-n[s].offset-n[s].size&&(t=s);l.setLimits(t)}),h.on("animate",function(){n[l.index].$block.triggerHandler("leave")}),app.device.isMobile||app.$dom.window.on("resize",l.resize),l.setLimits(0),l.scrollTo=function(t,e){e=void 0===e?i.duration:e,h.goToPage(i.vertical?0:t,i.vertical?t:0,e,IScrollStatic.utils.ease.cubicOut),0==e&&l.refresh()},l.prev=function(t){if(l.scrolling)return!1;t=void 0===t?i.duration:t;var e=-h.y-n[l.index].offset;i.vertical&&e?h.scrollBy(0,Math.min(e,l.size),t,IScrollStatic.utils.ease.cubicOut):i.vertical&&h.y<=-l.size?h.scrollBy(0,l.size,t,IScrollStatic.utils.ease.cubicOut):l.index>0&&h.prev(t,IScrollStatic.utils.ease.cubicOut)},l.next=function(t){if(l.scrolling)return!1;t=void 0===t?i.duration:t;var e=n[l.index].offset+n[l.index].size-(-h.y+l.size);e>.1*l.size&&i.vertical?h.scrollBy(0,-Math.min(e,l.size),t,IScrollStatic.utils.ease.cubicOut):l.index<n.length-1&&h.next(t,IScrollStatic.utils.ease.cubicOut)},l.get=function(t){return l[t]},l.destroy=function(){l.disable(),n[l.index].$block.triggerHandler("fullHide"),t.removeData("marquee"),h.destroy(),t=null,h=null,l=null},i.vertical){var d=t.find(".iScrollVerticalScrollbar");d.addClass("ui-scroll").prepend('<div class="ui-scroll__bar" />'),d.find(".iScrollIndicator").addClass("ui-scroll__handle").prepend('<div class="ui-scroll__handle__inner" />')}i.navPrev&&i.navPrev.on("click",function(){l.prev()}),i.navNext&&i.navNext.on("click",function(){l.next()});var f="keydown.marquee-"+(r?r:"")+(i.vertical?"v":"h");return l.enableKeyboard=function(){app.device.support.touch||app.$dom.document.on(f,function(t){$(t.target).is("input,textarea,select")||(t.which==(i.vertical?38:37)&&l.prev(),t.which==(i.vertical?40:39)&&l.next())})},l.disableKeyboard=function(){app.device.support.touch||app.$dom.document.off(f)},l.activate=function(){var e=n[l.index].$block;t.triggerHandler("init",{marquee:l}),e.triggerHandler("show"),e.triggerHandler("fullShow"),l.updateState(),i.index&&(l.scrollTo("last"==i.index?n.length-1:i.index,0),h._execEvent("scrollEnd"),i.index=!1)},l.scroll=h,l.screens=n,t.data("marquee",{screens:n,scrollTo:l.scrollTo,get:l.get,scroll:h,updateState:l.updateState,update:l.onScroll,resize:l.resize,activate:l.activate,enable:l.enable,disable:l.disable,destroy:l.destroy,enableKeyboard:l.enableKeyboard,disableKeyboard:l.disableKeyboard}),l},function(t,e,i,s,n){t.define("plugins.metrika"),t.plugins.metrika=function(t){t&&(this.state=t.data,this.previousState=t.previousData,this.visits=t.visits,this.device=t.device,this.key=t.key,this.report=t.report,this.init())},t.plugins.metrika.prototype={init:function(){if(!this.active){var e=this,i=this.state,s=this.key,o=Store.get(s),a=this.previousState?this.previousState.date:null,r=o&&o.ver||this.previousState&&this.previousState.ver;r&&r!=i.ver?Store.set(s,{ver:i.ver}):o&&!a?n.deepExtend(i,o):a&&(o=window.moment&&o&&o.date?moment(a).diff(moment(o.date))>0?this.previousState:o:this.previousState,n.deepExtend(i,o)),this.visits&&(i.visits=this.visits),this.device&&(i.device=t.device&&t.device.get?t.device.get():null),this.state=new Baobab(i,{autoCommit:!0}),this.state.on("write",function(t){Store.set(s,e.state.get())}),Store.set(s,this.state.get()),this.report&&this.logger(),this.active=!0}},set:function(t,e,i){if(t&&this.active){var i=i||{};if("inc"==i.action){var s=this.state.get(t.split("."))+e;this.state.select(t.split(".")).set(s)}else if("dec"==i.action){var s=this.state.get(t.split("."))-e;this.state.select(t.split(".")).set(s)}else this.state.select(t.split(".")).set(e);i.force&&this.logger.request()}},get:function(t){if(t&&this.active)return this.state.get(t.split("."))},logger:function(){var e=this,i=this.report.method,s=this.report.interval;this.logger.request=function(){var s=e.state.get(),n=JSON.stringify(s);e.lastState!=n&&(e.lastState=n,t.request(i,s,{loader:!1,notify:!1}))},i&&s&&(this.lastState=JSON.stringify(this.state.get()),setInterval(function(){e.logger.request()},1e3*s))}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.screens"),t.define("plugins.marquee.effects"),t.plugins.screens=function(t,i){this.active=!1,this.scope=e(t),this.options=i||{},this.state=null},t.plugins.screens.prototype={init:function(e){var i=this;if(!this.active){this.scope.on("touchmove MSPointerMove",function(t){t.preventDefault()}),this.scope.on("dragstart selectstart",function(){return!1});var s={vertical:this.options.vertical!==!1,screens:".screen",effect:this.options.vertical===!1?"space":"light",mousewheel:this.options.vertical!==!1&&(void 0===this.options.mousewheel||this.options.mousewheel),activeClass:this.options.activeClass?this.options.activeClass:this.options.hideSections!==!1&&"screen--active",spaceClass:this.options.vertical===!1?"horizontal__space":"vertical__space",longClass:this.options.vertical!==!1&&"screen--long",contentClass:this.options.vertical!==!1&&"screen__content",hideSections:!0,navPrev:this.options.navPrev,navNext:this.options.navNext,phoneEmulate:this.options.phoneEmulate,duration:this.options.vertical===!1?t.device.isPhone?375:450:500};this.options&&n.extend(s,this.options),this.options=s,this.items=[];var o=100;this.scope.find(s.screens).each(function(t){i.items.push({index:t,title:this.getAttribute("data-"+(s.dataAttr?s.dataAttr:"marquee"))}),s.vertical||(this.style.zIndex=o),o--}),this.marquee=s.static?t.plugins.marqueeStatic(this.scope,s):t.plugins.marquee(this.scope,s),this.marquee.enable(),this.marquee.scroll.on("scrollEnd",function(){i.state=i.marquee.section}),void 0!==e&&this.nav(e,0),
t.device.isMobile&&this.embeds(),this.options.play&&(this.play=new t.plugins.marquee.playScreens(this,this.options.play),this.play.init()),this.active=!0}},nav:function(t,e){if(n.isNumber(t))t>this.items.length-1&&(t=this.items.length-1),this.marquee.scrollTo(t,void 0!==e?e:void 0);else{if(!t)return;var i=n.findWhere(this.items,{title:t});i&&i.index&&(this.state=i.title,this.marquee.scrollTo(i.index,void 0!==e?e:void 0))}},get:function(t){return this.marquee[t]},refresh:function(){this.marquee.resize()},refreshAll:function(){var t=this.marquee.index;this.destroy(),this.init(t)},embeds:function(){var s=this,o=null,a=null,r=n.debounce(this.refresh,300);i.window.on("resize.screens",function(){s.scope.scrollTop(0),s.options.static&&"focus"==o&&a&&setTimeout(function(){l(t.sizes.height/1.3,0)},150),s.options.resizeRefresh&&r.call(s)}),s.options.static&&this.scope.on("focus blur","input[type='text'], textarea",function(i){"focusin"==i.type||"focus"==i.type?(a=e(i.target),o="focus",l(t.sizes.height/2.5,400)):o="blur",s.scope.scrollTop(0)});var l=function(t,e){var i=a.offset().top;i<0?s.marquee.scroll.scrollBy(0,-i+t,e,s.options.static?IScrollStatic.utils.ease.cubicOut:IScroll.utils.ease.cubicOut):i>t&&s.marquee.scroll.scrollBy(0,-(i-t),e,s.options.static?IScrollStatic.utils.ease.cubicOut:IScroll.utils.ease.cubicOut)}},destroy:function(){this.scope.off(),this.marquee.scroll.off(),this.marquee.destroy(),this.options.play&&this.play.destroy(),i.window.off("resize.screens"),this.active=!1}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.sections"),t.plugins.sections=function(t,e){this.scope=t,this.active=!1,this.options=e||{},this.content=this.options.content||this.scope},t.plugins.sections.prototype={show:function(t){if(!this.active){var i=this,t=t||{};if(this.scroll=t&&t.scroll||null,t.forceShow){this.active=!0;var s=e(this.content);return s.addClass("transition-none"),this.scope.setAttribute("data-inner","show"),this.scope.setAttribute("data-open",!0),t.scroll&&(t.scroll.refresh(),t.scroll.scrollTop()),n.isFunction(t.beforeShow)&&t.beforeShow(),t.update&&t.tag?(t.tag.update(t.update),t.tag.one("updated",function(){n.isFunction(t.afterShow)&&t.afterShow()})):n.isFunction(t.afterShow)&&t.afterShow(),void $afterlag.run(function(){s.removeClass("transition-none")})}this.scope.setAttribute("data-open",!0),this.scope.setAttribute("data-loading",!0),n.isFunction(t.beforeShow)&&t.beforeShow(),n.onEndTransition(this.content,function(){n.isFunction(t.callback)?t.callback(i._afterShow.bind(i),i.hide.bind(i)):t.update&&t.tag?(t.tag.one("updated",function(){i._afterShow(t)}),t.tag.update(t.update)):i._afterShow(t),i.active=!0})}},_afterShow:function(t){var e=this,t=t||{};this.scope.setAttribute("data-inner","show"),$afterlag.run(function(){e.scroll&&(e.scroll.refresh(),e.scroll.scrollTop()),e.scope.setAttribute("data-loading",!1),n.isFunction(t.afterShow)&&t.afterShow()})},loading:function(t){var e=this;t?(this.scope.setAttribute("data-inner","hidden"),this.scope.setAttribute("data-loading",!0)):(this.scope.setAttribute("data-inner","show"),$afterlag.run(function(){e.scope.setAttribute("data-loading",!1)}))},hide:function(t){if(this.active){var e=this,t=t||{};this.scope.setAttribute("data-open",!1),n.isFunction(t.beforeHide)&&t.beforeHide(),n.onEndTransition(this.content,function(){e.scope.setAttribute("data-inner","hidden"),n.isFunction(t.afterHide)&&t.afterHide(),e.active=!1})}}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.share"),t.plugins.share=function(t,i){t&&i&&(this.scope=e(t),this.options=i,this.init())},t.plugins.share.prototype={init:function(){var t=this,e=this.options;this.active||(this.scope.on("click",e.buttons,function(i){var s=i.currentTarget,o=e.dataAttr?"data-"+e.dataAttr:"data-social",a=s.getAttribute(o);if(a){var r=e.share&&e.share.title||document.title,l=e.url||window.location.href;"fb"==a?t.fb(l,n.isFunction(r)?r():r):"vk"==a?t.vk(l,n.isFunction(r)?r():r):"gl"==a?t.gl(l,n.isFunction(r)?r():r):"dk"==a?t.dk(l,n.isFunction(r)?r():r):"tw"==a&&t.tw(l,n.isFunction(r)?r():r)}}),this.active=!0)},vk:function(t,e,i,s){url="http://vkontakte.ru/share.php?",url+="url="+encodeURIComponent(t),url+="&title="+encodeURIComponent(e),i&&(url+="&image="+encodeURIComponent(i)),s&&(url+="&description="+encodeURIComponent(s)),url+="&noparse=true",this.popup(url)},dk:function(t,e){url="http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1",url+="&st.comments="+encodeURIComponent(e),url+="&st._surl="+encodeURIComponent(t),this.popup(url)},fb:function(t,e,i,s){url="http://www.facebook.com/sharer.php?",url+="&p[title]="+encodeURIComponent(e),url+="&p[url]="+encodeURIComponent(t),i&&(url+="&p[images][0]="+encodeURIComponent(i)),s&&(url+="&p[summary]="+encodeURIComponent(s)),this.popup(url)},tw:function(t,e){url="http://twitter.com/share?",url+="text="+encodeURIComponent(e),url+="&url="+encodeURIComponent(t),url+="&counturl="+encodeURIComponent(t),this.popup(url)},ml:function(t,e,i,s){url="http://connect.mail.ru/share?",url+="url="+encodeURIComponent(t),url+="&title="+encodeURIComponent(e),i&&(url+="&imageurl="+encodeURIComponent(i)),s&&(url+="&description="+encodeURIComponent(s)),this.popup(url)},gl:function(t){url="https://plus.google.com/share?",url+="url="+encodeURIComponent(t),this.popup(url)},popup:function(t){window.open(t,"","width=600,height=400,left=350,top=170,status=no,toolbar=no,menubar=no")},destroy:function(){this.scope.off(),this.active=!1}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.slider"),t.plugins.slider=function(t){this.active=!1,this.index=0,this.scope=e(t),this.slider=this.scope.find(".slider__wrapper"),this.nav={prev:this.scope.find(".slider__nav__prev"),next:this.scope.find(".slider__nav__next")},this.init(),this.render()},t.plugins.slider.prototype={init:function(){var t=this;this.nav.next.on("click",function(){t.nextSlides()}),this.nav.prev.on("click",function(){t.prevSlides()}),this.slider.on("swipeLeft",function(){t.nav.next.hasClass("slider__nav--hidden")||t.nextSlides()}),this.slider.on("swipeRight",function(){t.nav.prev.hasClass("slider__nav--hidden")||t.prevSlides()})},render:function(){this.sizeSlider=this.slider.width(),this.firstSlide=this.slider.find(".slider__item:first"),this.widthSlide=this.firstSlide.width(),this.cnt=Math.floor((t.sizes.width<this.sizeSlider?t.sizes.width:this.sizeSlider)/this.widthSlide),this.cnt&&!t.device.isPhone||(this.cnt=1),1!=this.cnt||this.scope.hasClass("largeSlides")||this.scope.addClass("largeSlides"),this.navUpdate(),this.firstSlide.addClass("current")},show:function(t){this.active||(this.scope.addClass("showSlides"),n.isFunction(t)&&n.onEndTransition(this.firstSlide[0],function(){t()}),this.active=!0)},hide:function(t){var e=this;return this.active?(this.reset(),this.scope.addClass("hideSlides"),void n.onEndTransition(this.slider.find(".slider__item:first")[0],function(){e.scope.removeClass("showSlides hideSlides"),e.active=!1,n.isFunction(t)&&t()})):void(n.isFunction(t)&&t())},reset:function(){this.setTranslateValue(0),this.slider.removeClass("next prev").find(".current, .previous").removeClass("current previous"),this.slider.find(".slider__item:first").addClass("current"),this.navUpdate()},navUpdate:function(){var t=this.slider.find(".slider__item").length,e=parseInt(Math.floor(this.sizeSlider/this.slider.find(".slider__item").width()));this.cnt>1&&t<e+1||1==this.cnt&&"1"==t?this.nav.next.addClass("slider__nav--hidden"):this.nav.next.removeClass("slider__nav--hidden"),this.nav.prev.addClass("slider__nav--hidden")},nextSlides:function(){var e=this,i=this.slider.children(".current"),s=i.index(),o=i.nextAll(".slider__item").length;s=1==this.cnt?o?s+this.cnt:s:o>this.cnt+1?s+this.cnt:s+o-(this.cnt-1);var a=s*(this.widthSlide+15)+"px";this.cnt>1&&this.slider.addClass("next"),this.setTranslateValue(a),t.device.isPhone?e.updateSlider("next",i,o):n.onEndTransition(this.slider[0],function(){e.updateSlider("next",i,o)}),this.index=s},prevSlides:function(){var e=this,i=this.slider.children(".previous"),s=i.index(),o=s*(this.widthSlide+15)+"px";this.cnt>1&&this.slider.addClass("prev"),this.setTranslateValue(o),t.device.isPhone?e.updateSlider("prev",i):n.onEndTransition(this.slider[0],function(){e.updateSlider("prev",i)}),this.index=s},updateSlider:function(t,e,i){"next"===t?(this.slider.removeClass("next").find(".previous").removeClass("previous"),e.removeClass("current"),1==this.cnt?e.addClass("previous").next(".slider__item").addClass("current"):i>this.cnt+1?e.addClass("previous").next(".slider__item").next(".slider__item").next(".slider__item").addClass("current"):i==this.cnt+1?e.next(".slider__item").next(".slider__item").addClass("current").prev(".slider__item").prev(".slider__item").addClass("previous"):e.next(".slider__item").addClass("current").end().addClass("previous")):(this.slider.removeClass("prev").find(".current").removeClass("current"),e.removeClass("previous").addClass("current"),1==this.cnt?e.prev(".slider__item").addClass("previous"):e.prevAll(".slider__item").length>this.cnt-1?e.prev(".slider__item").prev(".slider__item").prev(".slider__item").addClass("previous"):!this.slider.children(".slider__item").eq(0).hasClass("current")&&this.slider.children(".slider__item").eq(0).addClass("previous")),this.updateNavigation()},updateNavigation:function(){var t=this.slider.find(".slider__item.current");t.is(":first-child")?this.nav.prev.addClass("slider__nav--hidden"):this.nav.prev.removeClass("slider__nav--hidden"),t.nextAll(".slider__item").length<this.cnt?this.nav.next.addClass("slider__nav--hidden"):this.nav.next.removeClass("slider__nav--hidden")},setTranslateValue:function(t){this.slider.css({"-moz-transform":"translate3d(-"+t+", 0, 0)","-webkit-transform":"translate3d(-"+t+", 0, 0)","-ms-transform":"translate3d(-"+t+", 0, 0)","-o-transform":"translate3d(-"+t+", 0, 0)",transform:"translate3d(-"+t+", 0, 0)"})}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.sliderElastic"),t.plugins.sliderElastic=function(t,i){t&&(this.active=!1,this.scope=e(t),this.options=i,this.initX=null,this.transX=0,this.deltaY=0,this.rotZ=0,this.transY=0,this.prevSlide=null,this.curSlide=null,this.isScrolling=!1,this.slides=null)},t.plugins.sliderElastic.prototype={init:function(){if(!this.active&&this.scope.length){var t={fadeOut:"ease 0.2s",Y_DIS:"-50%",Z_DIS:50,TRANS_DUR:.4};this.options&&n.extend(t,this.options),this.options=t,this.container=this.scope.children(),this.container.on("touchmove MSPointerMove","img",function(t){t.preventDefault()}),this.container.on("dragstart selectstart","img",function(){return!1}),this.slides=this.container[0].children,this.attachEvents(this.slides[this.slides.length-1]),this.active=!0}},attachEvents:function(e){this.curSlide=e,this.curSlide.addEventListener(t.device.support.touch?"touchstart":"mousedown",this.slideMouseDown.bind(this),!1)},slideMouseDown:function(e){e.touches?this.initX=e.touches[0].clientX:this.initX=e.pageX,this.scope[0].addEventListener(t.device.support.touch?"touchmove":"mousemove",this.slideMouseMove.bind(this),!1),this.scope[0].addEventListener(t.device.support.touch?"touchend":"mouseup",this.slideMouseUp.bind(this),!1)},slideMouseMove:function(e){var i,s=this;if(!this.isScrolling){i=e.touches?e.touches[0].clientX:e.pageX,this.transX+=i-this.initX,this.rotZ=this.transX/20,this.curSlide.style.transition="none",this.curSlide.style.webkitTransform="translateX("+this.transX+"px) rotateZ("+this.rotZ+"deg) translateY("+this.options.Y_DIS+") translateZ(0)",this.curSlide.style.transform="translateX("+this.transX+"px) rotateZ("+this.rotZ+"deg) translateY("+this.options.Y_DIS+") translateZ(0)";for(var n=1,o=this.slides.length-2;o>=0;o--)this.slides[o].style.webkitTransform="translateX("+this.transX/(2*n)+"px) rotateZ("+this.rotZ/(2*n)+"deg) translateY("+this.options.Y_DIS+") translateZ("+-this.options.Z_DIS*n+"px) translateZ(0)",this.slides[o].style.transform="translateX("+this.transX/(2*n)+"px) rotateZ("+this.rotZ/(2*n)+"deg) translateY("+this.options.Y_DIS+") translateZ("+-this.options.Z_DIS*n+"px) translateZ(0)",this.slides[o].style.transition="none",n++;return this.initX=i,e.preventDefault(),Math.abs(this.transX)>=this.curSlide.offsetWidth-30?(this.scope[0].removeEventListener(t.device.support.touch?"touchmove":"mousemove",this.slideMouseMove,!1),this.curSlide.style.transition=this.options.fadeOut,this.curSlide.style.opacity=0,this.prevSlide=this.curSlide,this.attachEvents(this.slides[this.slides.length-2]),this.slideMouseUp(),void setTimeout(function(){s.container[0].insertBefore(s.prevSlide,s.container[0].firstChild),s.prevSlide.style.transition="none",s.prevSlide.style.opacity="1",s.slideMouseUp()},201)):void 0}},slideMouseUp:function(){this.transX=0,this.rotZ=0,this.curSlide.style.transition="cubic-bezier(0.075, 0.82, 0.165, 1) "+this.options.TRANS_DUR+"s",this.curSlide.style.webkitTransform="translateX("+this.transX+"px)rotateZ("+this.rotZ+"deg) translateY("+this.options.Y_DIS+") translateZ(0)",this.curSlide.style.transform="translateX("+this.transX+"px)rotateZ("+this.rotZ+"deg) translateY("+this.options.Y_DIS+") translateZ(0)";for(var e=1,i=this.slides.length-2;i>=0;i--)this.slides[i].style.transition="cubic-bezier(0.075, 0.82, 0.165, 1) "+this.options.TRANS_DUR/(e+.9)+"s",this.slides[i].style.webkitTransform="translateX("+this.transX+"px)rotateZ("+this.rotZ+"deg) translateY("+this.options.Y_DIS+") translateZ("+-this.options.Z_DIS*e+"px)",this.slides[i].style.transform="translateX("+this.transX+"px)rotateZ("+this.rotZ+"deg) translateY("+this.options.Y_DIS+") translateZ("+-this.options.Z_DIS*e+"px)",e++;this.scope[0].removeEventListener(t.device.support.touch?"touchmove":"mousemove",this.slideMouseMove,!1)}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.sortable"),t.plugins.sortable=function(t,e,i){if(t&&e&&i){var s={animation:400,handle:!1};n.extend(s,e),this.scope=t,this.options=s,this.callback=i}},t.plugins.sortable.prototype={init:function(){var t=this;this.active||(this.elem=Sortable.create(this.scope[0],{animation:this.options.animation,handle:this.options.handle,draggable:this.options.draggable,onUpdate:function(e){var i=[];t.scope.find(t.options.draggable).each(function(t,e){i.push({_id:e.getAttribute("data-id"),pos:t+1})}),t.callback(i)}}),this.active=!0)},destroy:function(){this.elem.destroy(),this.active=!1}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.styles"),t.plugins.styles={ready:!1,init:function(i){if(!o.ready){this.el=e(i.elem),this.screen=i.default,this.screens=i.screens,this.callback=i.callback,o.resizer(t.$dom.window[0].innerWidth);var s=n.debounce(o.resizer,100);t.$dom.window.on("resize.styles",function(){var t=s(this.innerWidth);t&&t.length&&o.callback&&o.callback(o.screen)}),o.ready=!0}},resizer:function(t){return n.filter(o.screens,function(e){if((e.minWidth&&e.maxWidth&&t>e.minWidth-1&&t<e.maxWidth+1||e.minWidth&&!e.maxWidth&&t>e.minWidth||e.maxWidth&&!e.minWidth&&t<e.maxWidth)&&o.screen!==e.title)return e.reload&&o.ready&&o.screen!=e.title?window.location.reload():e.path&&o.el.attr("href",e.path),o.screen=e.title,console.log("resize: "+e.title),o.screen})}};var o=t.plugins.styles}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.scroll.animate"),t.plugins.scroll.animate=function(t){!t||t&&!t.scroll||(this.ready=!1,this.delay=t.delay,this.elems=t.elems?t.elems:".anim",this.scroll=e(t.scroll),this.scope=t.container?e(t.container):this.scroll,this.delta=t.delta?this.deltaValues.getValueByTitle(t.delta):null,this._items=t.items,this.items=[])},t.plugins.scroll.animate.prototype={start:function(t){var e=this;this.ready&&!t||this.render(),this.items.length&&this.scroll.on("scroll.animate",function(){e.scrolling||(e.scrolling=!0,n.raf(function(){e.onScroll(e)}))})},render:function(){var t=this;this.items=[],this._items&&n.each(this._items,function(e){t.scope.find(e.elem).each(function(){t.each(this,e.callback)})}),this.scope.find(this.elems).each(function(){t.each(this)}),this.ready=!0},each:function(t,i){var s=this,n=e(t),o=t.getAttribute("data-delta");o=o?s.deltaValues.getValueByTitle(o):s.delta?s.delta:s.deltaValues.getValueByTitle("m"),s.items.push({elem:n,anim:!1,offset:n.offset(),delta:o,callback:i?i:null})},onScroll:function(e){var i=e.scroll[0].scrollTop||e.scroll[0].scrollY;e.items.forEach(function(e,s){!e.anim&&i+t.sizes.height*e.delta>e.offset.top&&(e.anim=!0,e.callback?e.callback(e.elem,s):e.elem.addClass("animated"))}),e.scrolling=!1},destroy:function(){this.scroll.off("scroll.animate"),this.items.forEach(function(t,e){t.anim&&(t.anim=!1,t.elem.removeClass("animated"))}),this.ready=!1},deltaValues:{items:[{title:"xxs",value:1.25},{title:"xs",value:1},{title:"s",value:.733},{title:"m",value:.54},{title:"l",value:.38},{title:"xl",value:.25}],getValueByTitle:function(t){return n.findWhere(this.items,{title:t}).value}}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.scroll.content"),t.plugins.scroll.content=function(t,i){t&&(this.active=!1,this.scope=e(t),this.options=i)},t.plugins.scroll.content.prototype={init:function(){if(!this.active&&this.scope.length){var e={disableMouse:!1,mouseWheel:!0,scrollX:!1,scrollY:!0,click:!1,tap:!1,preventDefault:!0,eventPassthrough:"horizontal",forceBounds:!0,boundDeceleration:3.5,scrollbars:"custom",interactiveScrollbars:!t.device.support.touch,probeType:!t.device.support.touch&&3};this.options&&n.extend(e,this.options),t.device.isPhone&&(e.deceleration=6e-4),this.scroll=new IScroll(this.scope[0],e),e.keyboard&&!t.device.support.touch&&this.keyboard(),this.embeds(!(!t.device.isMobile||!e.autoScroll)),this.active=!0}},show:function(){this.scroll.enable()},hide:function(){this.scroll.disable()},scrollTop:function(){this.scroll.scrollTo(0,0)},refresh:function(){this.scroll.refresh()},keyboard:function(){var e=this.scroll,s="keydown.keyboards-scroll-"+String(Math.round((new Date).getTime()/1e3));paused=!1,duration=500;var n=function(t){return!paused&&(paused=!0,scrollTimer=setTimeout(function(){paused=!1},50),void e.scrollTo(0,t,duration,IScroll.utils.ease.cubicOut))},o=function(){var t=Math.min(0,e.y+100);n(t)},a=function(){var t=Math.max(e.maxScrollY,e.y-100);n(t)},r=function(){var t=Math.min(0,e.y+e.wrapperHeight);n(t)},l=function(){var t=Math.max(e.maxScrollY,e.y-e.wrapperHeight);n(t)},c=function(){n(0)},h=function(){n(e.maxScrollY)};e.enableKeyboardScroll=function(){t.device.support.touch||i.document.on(s,function(t){38==t.which&&o(),40==t.which&&a(),33==t.which&&r(),34==t.which&&l(),36==t.which&&c(),35==t.which&&h()})},e.disableKeyboardScroll=function(){t.device.support.touch||i.document.off(s)},e.enabled&&e.enableKeyboardScroll(),e.on("enable",function(){e.enableKeyboardScroll()}),e.on("disable",function(){e.disableKeyboardScroll()})},embeds:function(s){var o,a=this,r=this.scope,l=this.scroll,c=!1,h=null,p=null,u=n.debounce(this.refresh,300);l.enable(),i.window.on("resize.scrollable-content",function(){t.device.isMobile&&a.scope.scrollTop(0),s&&"focus"==h&&p&&setTimeout(function(){d(t.sizes.height/1.3,0)},150),u.call(a)}),s&&this.scope.on("focus blur","input[type='text'], textarea",function(i){"focusin"==i.type||"focus"==i.type?(p=e(i.target),h="focus",d(t.sizes.height/2.5,400)):h="blur",a.scope.scrollTop(0)});var d=function(t,e){var i=p.offset().top;i<t?l.scrollBy(0,-i+t,e,IScroll.utils.ease.cubicOut):i>t&&l.scrollBy(0,-(i-t),e,IScroll.utils.ease.cubicOut)},f=function(){clearTimeout(o),c||(r.addClass("i-scrolling"),c=!0)},v=function(){clearTimeout(o),c&&(r.removeClass("i-scrolling"),c=!1)};t.device.isMobile&&(l.on("grab",function(){f(),o=setTimeout(function(){v()},500)}),l.on("scrollEnd",function(){v()}))},destroy:function(){this.scope.off(),this.scroll.destroy(),i.window.off("resize.scrollable-content"),this.active=!1}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.scroll.fix"),t.plugins.scroll.fix=function(t){!t||t&&!t.scroll||(this.active=!1,this.scroll=e(t.scroll),this.container=e(t.container))},t.plugins.scroll.fix.prototype={init:function(){var e=this;if(!this.active&&!t.device.isMobile){var s;i.body[0];this.scroll.on("scroll.fix",function(){clearTimeout(s),e.container[0].getAttribute("class").match(/disable__hover/)||e.container.addClass("disable__hover"),s=setTimeout(function(){e.container.removeClass("disable__hover")},300)}),this.active=!0}},destroy:function(){this.active&&(this.scroll.off("scroll.fix"),this.active=!1)}}}(app,$,app.$dom,app.events,app.utils),!function(t,e,i,s,n){function o(t,e){var i;return e?(i=a(t),{width:i.width,height:i.height}):{width:t.offsetWidth,height:t.offsetHeight}}t.define("dom.getDimensions");var a=n.getBoundingClientRect;t.dom.getDimensions=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t){var e;if(t=t||window,t===window){if(e=window.pageXOffset)return e;t=document.documentElement||document.body.parentNode||document.body}return t.scrollLeft}t.define("dom.getScrollX"),t.dom.getScrollX=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t){var e;if(t=t||window,t===window){if(e=window.pageYOffset)return e;t=document.documentElement||document.body.parentNode||document.body}return t.scrollTop}t.define("dom.getScrollY"),t.dom.getScrollY=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t,e){var i,s,n,o;if(e)return i=r(t),s=l(),n=c(),{top:i.top+n,right:i.right+s,bottom:i.bottom+n,left:i.left+s};for(o=a(t,e),i={top:t.offsetTop,left:t.offsetLeft,width:o.width,height:o.height};t=t.offsetParent;)i.top+=t.offsetTop,i.left+=t.offsetLeft;return{top:i.top,right:i.left+i.width,bottom:i.top+i.height,left:i.left}}t.define("dom.getPagePosition");var a=t.dom.getDimensions,r=n.getBoundingClientRect,l=t.dom.getScrollX,c=t.dom.getScrollY;t.dom.getPagePosition=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t){var e,i,s,n;for(e in a){for(i=t[e]?t[e]:"",n=0;n<a[e].length;n++)s=a[e][n],s in t&&(i+=" "+s+"("+t[s]+")",delete t[s]);i=i.trim(),i&&(t[e]=i)}return t}t.define("dom.styles.combinePartialProperties");var a={transform:["matrix","translate","translateX","translateY","scale","scaleX","scaleY","rotate","skewX","skewY","matrix3d","translate3d","translateZ","scale3d","scaleZ","rotate3d","rotateX","rotateY","rotateZ","perspective"],filter:["blur","brightness","contrast","drop-shadow","grayscale","hue-rotate","invert","saturate","sepia"]};t.dom.styles.combinePartialProperties=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t){var e,i,s,n,o;if("string"==typeof t)for(e={},i=t.split(";"),n=i.length,o=0;o<n;o+=1)s=i[o].indexOf(":"),s>0&&(e[i[o].substr(0,s).trim()]=i[o].substr(s+1).trim());else e=t;return e}t.define("dom.styles.cssToObject"),t.dom.styles.cssToObject=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(){this._supportsAvailable="CSS"in window&&"supports"in window.CSS,this._cssPrefixes=p,this._domPrefixes=u,this._evtPrefixes=d,this._styleProperties={},this._styleValues={},this._eventTypes={}}t.define("dom.styles.prefixer");var a={transitionend:{onwebkittransitionend:"webkitTransitionEnd",onmstransitionend:"MSTransitionEnd"},animationstart:{onwebkitanimationstart:"webkitAnimationStart",onmsanimationstart:"MSAnimationStart"},animationend:{onwebkitanimationend:"webkitAnimationEnd",onmsanimationend:"MSAnimationEnd"},animationiteration:{onwebkitanimationiteration:"webkitAnimationIteration",onmsanimationiteration:"MSAnimationIteration"},fullscreenchange:{onmsfullscreenchange:"MSFullscreenChange"},fullscreenerror:{onmsfullscreenerror:"MSFullscreenError"}},r=/(\([^\)]+\))/gi,l=/([^ ,;\(]+(\([^\)]+\))?)/gi,c=/(-webkit-|-moz-|-ms-)|^(webkit|moz|ms)/gi,h=/^(webkit|moz|ms)/gi,p=["-webkit-","-moz-","-ms-"],u=["Webkit","Moz","ms"],d=["webkit","moz","ms"],f=o.prototype;f.getEventType=function(t){var e,i;if(t=t.toLowerCase(),t in this._eventTypes)return this._eventTypes[t];if(this._checkEventType("on"+t))return this._eventTypes[t]=t;if(a[t])for(e in a[t])if(this._checkEventType(e))return this._eventTypes[t]=a[t][e];for(i=0;i<this._evtPrefixes.length;i++)if(this._checkEventType("on"+this._evtPrefixes[i]+t))return this._eventTypes[t]=this._evtPrefixes[i]+t,this._reduceAvailablePrefixes(i),this._eventTypes[t];return this._eventTypes[t]=t},f._checkEventType=function(t){return t in window||t in document},f.getStyleProperty=function(t){var e,i,s;if(t+="",t in this._styleProperties)return this._styleProperties[t].dom;for(t=this._toDOM(t),this._prepareTestElement(),i=t.charAt(0).toUpperCase()+t.substr(1),e="filter"===t?["WebkitFilter","filter"]:(t+" "+this._domPrefixes.join(i+" ")+i).split(" "),s=0;s<e.length;s++)if(void 0!==this._el.style[e[s]])return 0!==s&&this._reduceAvailablePrefixes(s-1),this._memoizeStyleProperty(t,e[s]),e[s];return this._memoizeStyleProperty(t,!1),!1},f._memoizeStyleProperty=function(t,e){var i=this._toCSS(t),s=e!==!1&&this._toCSS(e);this._styleProperties[t]=this._styleProperties[e]=this._styleProperties[i]=this._styleProperties[s]={dom:e,css:s}},f.getStyleCSS=function(t,e){var i;if(t=this.getStyleProperty(t),!t)return!1;if(i=this._styleProperties[t].css,"undefined"!=typeof e){if(e=this.getStyleValue(t,e),e===!1)return!1;i+=":"+e+";"}return i},f.getStyleValue=function(t,e){var i;return e+="",!!(t=this.getStyleProperty(t))&&(this._testStyleValue(t,e)?e:(i=this._styleProperties[t].css,e=e.replace(l,function(e){var s,n,o,a;if("#"===e[0]||!isNaN(e[0]))return e;if(n=e.replace(r,""),o=i+":"+n,o in this._styleValues)return this._styleValues[o]===!1?"":e.replace(n,this._styleValues[o]);for(s=this._cssPrefixes.map(function(t){return t+e}),s=[e].concat(s),a=0;a<s.length;a++)if(this._testStyleValue(t,s[a]))return 0!==a&&this._reduceAvailablePrefixes(a-1),this._styleValues[o]=s[a].replace(r,""),s[a];return this._styleValues[o]=!1,""}.bind(this)),e=e.trim(),""!==e&&e))},f._testStyleValue=function(t,e){var i;if(this._supportsAvailable)return t=this._styleProperties[t].css,CSS.supports(t,e);this._prepareTestElement(),i=this._el.style[t];try{this._el.style[t]=e}catch(t){return!1}return this._el.style[t]&&this._el.style[t]!==i},f.stripPrefixes=function(t){return t=String.prototype.replace.call(t,c,""),t.charAt(0).toLowerCase()+t.slice(1)},f._reduceAvailablePrefixes=function(t){1!==this._cssPrefixes.length&&(this._cssPrefixes=[this._cssPrefixes[t]],this._domPrefixes=[this._domPrefixes[t]],this._evtPrefixes=[this._evtPrefixes[t]])},f._toDOM=function(t){return"float"===t.toLowerCase()?"cssFloat":(t=t.replace(/-([a-z])/g,function(t,e){return e.toUpperCase()}),"Ms"===t.substr(0,2)&&(t="ms"+t.substr(2)),t)},f._toCSS=function(t){return"cssfloat"===t.toLowerCase()?"float":(h.test(t)&&(t="-"+t),t.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase())},f._prepareTestElement=function(){this._el?(this._el.style.cssText="",this._el.removeAttribute("style")):this._el=document.createElement("_")},t.dom.styles.prefixer=new o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t,e){var i,s,n,o,c;if("string"!=typeof e&&"object"!=typeof e||Array.isArray(e))throw new TypeError("setStyle: styles must be an Object or String");e=r(e),e=l(e),i="";for(n in e)c=e[n],c||0===c?(s=a.getStyleCSS(n,c),s!==!1&&(i+=" "+s)):(o=a.getStyleProperty(n),"removeAttribute"in t.style?t.style.removeAttribute(o):t.style[o]="");return i.length&&(t.style.cssText+=i),t}t.define("app.dom.styles.setStyle");var a=t.dom.styles.prefixer,r=t.dom.styles.cssToObject,l=t.dom.styles.combinePartialProperties;t.dom.styles.setStyle=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t,e){if("function"!=typeof t)throw new TypeError(a);this.easingFunction=t,this.cssString=e||null}t.define("plugins.easing.Ease");var a="Ease expects an easing function.",r=o.prototype;r.getValue=function(t){return this.easingFunction(t,0,1,1)},t.plugins.easing.Ease=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t,e,i,s){function n(t,e){return 1-3*e+3*t}function o(t,e){return 3*e-6*t}function a(t){return 3*t}function r(t,e,i){return((n(e,i)*t+o(e,i))*t+a(e))*t}function l(t,e,i){return 3*n(e,i)*t*t+2*o(e,i)*t+a(e)}function c(e){for(var s=e,n=0;n<4;++n){var o=l(s,t,i);if(0===o)return s;var a=r(s,t,i)-e;s-=a/o}return s}this.get=function(n){return t===e&&i===s?n:r(c(n),e,s)}}t.define("plugins.easing.KeySpline"),t.plugins.easing.KeySpline=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t,e,i,s){var n=Array.prototype.slice.call(arguments),o=n.every(function(t){return"number"==typeof t});if(4!==n.length||!o)throw new TypeError(l+n);var c=new r(t,e,i,s),h=function(t,e,i,s){return c.get(t/s)*i+e},p="cubic-bezier("+n.join(", ")+")";return new a(h,p)}t.define("plugins.easing.createBezier");var a=t.plugins.easing.Ease,r=t.plugins.easing.KeySpline,l="Bezier curve expects exactly four (4) numbers. Given: ";t.plugins.easing.createBezier=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t,e){if(e=e||"end","number"!=typeof t||t<1)throw new TypeError(r+t);if("start"!==e&&"end"!==e)throw new TypeError(l+e);var i=function(i,s,n,o){var a=n/t,r=Math["start"===e?"floor":"ceil"](i/o*t);return s+a*r},s="steps("+t+", "+e+")";return new a(i,s)}t.define("plugins.easing.createStep");var a=t.plugins.easing.Ease,r="Step function expects a numeric value greater than zero. Given: ",l='Step function direction must be either "start" or "end" (default). Given: ';t.plugins.easing.createStep=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.easing.cssAliases");var o={linear:"cubic-bezier(0, 0, 1, 1)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1)","ease-in":"cubic-bezier(0.42, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.58, 1)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1)","ease-in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","ease-out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","ease-in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","ease-out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","ease-in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","ease-in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","ease-out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","ease-in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","ease-in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","ease-out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","ease-in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","ease-in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","ease-out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","ease-in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","ease-in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","ease-out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","ease-in-out-expo":"cubic-bezier(1, 0, 0, 1)","ease-in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","ease-out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","ease-in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","ease-in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"};o.easeIn=o["ease-in"],o.easeOut=o["ease-out"],o.easeInOut=o["ease-in-out"],o.easeInCubic=o["ease-in-cubic"],o.easeOutCubic=o["ease-out-cubic"],o.easeInOutCubic=o["ease-in-out-cubic"],o.easeInQuad=o["ease-in-quad"],o.easeOutQuad=o["ease-out-quad"],o.easeInOutQuad=o["ease-in-out-quad"],o.easeInQuart=o["ease-in-quart"],o.easeOutQuart=o["ease-out-quart"],o.easeInOutQuart=o["ease-in-out-quart"],o.easeInQuint=o["ease-in-quint"],o.easeOutQuint=o["ease-out-quint"],o.easeInOutQuint=o["ease-in-out-quint"],o.easeInSine=o["ease-in-sine"],o.easeOutSine=o["ease-out-sine"],o.easeInOutSine=o["ease-in-out-sine"],o.easeInExpo=o["ease-in-expo"],o.easeOutExpo=o["ease-out-expo"],o.easeInOutExpo=o["ease-in-out-expo"],o.easeInCirc=o["ease-in-circ"],o.easeOutCirc=o["ease-out-circ"],o.easeInOutCirc=o["ease-in-out-circ"],o.easeInBack=o["ease-in-back"],
o.easeOutBack=o["ease-out-back"],o.easeInOutBack=o["ease-in-out-back"],t.plugins.easing.cssAliases=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.easing.fn");var o=t.plugins.easing.createBezier,a=o(.25,.1,.25,1).easingFunction,r=o(.42,0,1,1).easingFunction,l=o(0,0,.58,1).easingFunction,c=o(.42,0,.58,1).easingFunction,h=function(t,e,i,s){return i*t/s+e},p=function(t,e,i,s){return i*(t/=s)*t+e},u=function(t,e,i,s){return-i*(t/=s)*(t-2)+e},d=function(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},f=function(t,e,i,s){return i*(t/=s)*t*t+e},v=function(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e},m=function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},g=function(t,e,i,s){return i*(t/=s)*t*t*t+e},_=function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},b=function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},S=function(t,e,i,s){return i*(t/=s)*t*t*t*t+e},x=function(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e},y=function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},w=function(t,e,i,s){return-i*Math.cos(t/s*(Math.PI/2))+i+e},T=function(t,e,i,s){return i*Math.sin(t/s*(Math.PI/2))+e},k=function(t,e,i,s){return-i/2*(Math.cos(Math.PI*t/s)-1)+e},z=function(t,e,i,s){return 0===t?e:i*Math.pow(2,10*(t/s-1))+e},P=function(t,e,i,s){return t===s?e+i:i*(-Math.pow(2,-10*t/s)+1)+e},C=function(t,e,i,s){return 0===t?e:t===s?e+i:(t/=s/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},I=function(t,e,i,s){return-i*(Math.sqrt(1-(t/=s)*t)-1)+e},$=function(t,e,i,s){return i*Math.sqrt(1-(t=t/s-1)*t)+e},E=function(t,e,i,s){return(t/=s/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},M=function(t,e,i,s){var n=1.70158,o=0,a=i;return 0===t?e:1===(t/=s)?e+i:(o||(o=.3*s),a<Math.abs(i)?(a=i,n=o/4):n=o/(2*Math.PI)*Math.asin(i/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((t*s-n)*(2*Math.PI)/o))+e)},D=function(t,e,i,s){var n=1.70158,o=0,a=i;return 0===t?e:1===(t/=s)?e+i:(o||(o=.3*s),a<Math.abs(i)?(a=i,n=o/4):n=o/(2*Math.PI)*Math.asin(i/a),a*Math.pow(2,-10*t)*Math.sin((t*s-n)*(2*Math.PI)/o)+i+e)},O=function(t,e,i,s){var n=1.70158,o=0,a=i;return 0===t?e:2===(t/=s/2)?e+i:(o||(o=s*(.3*1.5)),a<Math.abs(i)?(a=i,n=o/4):n=o/(2*Math.PI)*Math.asin(i/a),t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*s-n)*(2*Math.PI)/o))+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*s-n)*(2*Math.PI)/o)*.5+i+e)},Y=function(t,e,i,s,n){return void 0===n&&(n=1.70158),i*(t/=s)*t*((n+1)*t-n)+e},A=function(t,e,i,s,n){return void 0===n&&(n=1.70158),i*((t=t/s-1)*t*((n+1)*t+n)+1)+e},F=function(t,e,i,s,n){return void 0===n&&(n=1.70158),(t/=s/2)<1?i/2*(t*t*(((n*=1.525)+1)*t-n))+e:i/2*((t-=2)*t*(((n*=1.525)+1)*t+n)+2)+e},q=function(t,e,i,s){return(t/=s)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},H=function(t,e,i,s){return i-q(s-t,0,i,s)+e},X=function(t,e,i,s){return t<s/2?.5*H(2*t,0,i,s)+e:.5*q(2*t-s,0,i,s)+.5*i+e};t.plugins.easing.fn={linear:h,ease:a,easeIn:r,"ease-in":r,easeOut:l,"ease-out":l,easeInOut:c,"ease-in-out":c,easeInCubic:f,"ease-in-cubic":f,easeOutCubic:v,"ease-out-cubic":v,easeInOutCubic:m,"ease-in-out-cubic":m,easeInQuad:p,"ease-in-quad":p,easeOutQuad:u,"ease-out-quad":u,easeInOutQuad:d,"ease-in-out-quad":d,easeInQuart:g,"ease-in-quart":g,easeOutQuart:_,"ease-out-quart":_,easeInOutQuart:b,"ease-in-out-quart":b,easeInQuint:S,"ease-in-quint":S,easeOutQuint:x,"ease-out-quint":x,easeInOutQuint:y,"ease-in-out-quint":y,easeInSine:w,"ease-in-sine":w,easeOutSine:T,"ease-out-sine":T,easeInOutSine:k,"ease-in-out-sine":k,easeInExpo:z,"ease-in-expo":z,easeOutExpo:P,"ease-out-expo":P,easeInOutExpo:C,"ease-in-out-expo":C,easeInCirc:I,"ease-in-circ":I,easeOutCirc:$,"ease-out-circ":$,easeInOutCirc:E,"ease-in-out-circ":E,easeInBack:Y,"ease-in-back":Y,easeOutBack:A,"ease-out-back":A,easeInOutBack:F,"ease-in-out-back":F,easeInElastic:M,"ease-in-elastic":M,easeOutElastic:D,"ease-out-elastic":D,easeInOutElastic:O,"ease-in-out-elastic":O,easeInBounce:H,"ease-in-bounce":H,easeOutBounce:q,"ease-out-bounce":q,easeInOutBounce:X,"ease-in-out-bounce":X}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t){var e;if("step-start"===t)return a(1,"start");if("step-end"===t)return a(1,"end");if(e=l[t],!e)throw new Error(h.replace("%TYPE%",t));return new c(e,r[t])}t.define("plugins.easing.createPredefined");var a=t.plugins.easing.createStep,r=t.plugins.easing.cssAliases,l=t.plugins.easing.fn,c=t.plugins.easing.Ease,h='Easing function "%TYPE%" not recognized among the following: '+Object.keys(l).join(", ");t.plugins.easing.createPredefined=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(){r.call(this),this.lastFrameTime=null,this._animationFrame=null,this._active=!1,this._startTime=null,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._getTime=Date.now||function(){return(new Date).getTime()}}t.define("plugins.scroll.clock");var a,r=t.commons.EventEmitterMicro;(new Date).getTime(),a=o.prototype=new r(null),a.start=function(){this._active||this._tick()},a.stop=function(){this._active&&n.caf(this._animationFrame),this._animationFrame=null,this.lastFrameTime=null,this._active=!1},a.destroy=function(){this.stop(),this.off();var t;for(t in this)this.hasOwnProperty(t)&&(this[t]=null)},a.isRunning=function(){return this._active},a._tick=function(){this._active||(this._active=!0),this._animationFrame=n.raf(this._boundOnAnimationFrame)},a._onAnimationFrame=function(t){null===this.lastFrameTime&&(this.lastFrameTime=t);var e=t-this.lastFrameTime,i=0;if(e>=1e3&&(e=0),0!==e&&(i=1e3/e),this._firstFrame===!0&&(e=0,this._firstFrame=!1),0===i)this._firstFrame=!0;else{var s={time:t,delta:e,fps:i,naturalFps:i,timeNow:this._getTime()};this.trigger("update",s),this.trigger("draw",s)}this._animationFrame=null,this.lastFrameTime=t,this._active!==!1?this._tick():this.lastFrameTime=null},t.plugins.scroll.clock=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t,e,i,s){s=s||{},this._options=s,this._target=t,this._duration=1e3*e,this._delay=1e3*(s.delay||0),this._remainingDelay=this._delay,this._progress=0,this._clock=s.clock||new r,this._playing=!1,this._getTime=Date.now||function(){return(new Date).getTime()},this._isYoyo=s.yoyo,this._direction=1,this._loop=s.loop||0,this._loopCount=0,this._propsTo=i,this._propsFrom=s.propsFrom||{},this._storeTarget=n.clone(this._target),this._storePropsTo=this._propsTo,this._storePropsFrom=this._propsFrom,this._onStart=s.onStart||null,this._onUpdate=s.onUpdate||null,this._onDraw=s.onDraw||null,this._onComplete=s.onComplete||null;var o=s.ease||h;this._ease="function"==typeof o?new l(o):a(o),this._start=this._start.bind(this),this._update=this._update.bind(this),this._draw=this._draw.bind(this)}t.define("plugins.scroll.clip");var a=t.plugins.easing.createPredefined,r=t.plugins.scroll.clock,l=t.plugins.easing.Ease,c=t.commons.EventEmitter,h="ease",p="complete",u="pause",d="play",f=o.prototype=Object.create(c.prototype);f.play=function(){return this._playing||(this._playing=!0,0===this._delay||0===this._remainingDelay?this._start():(this._startTimeout=setTimeout(this._start,this._remainingDelay),this._delayStart=this._getTime())),this},f.pause=function(){return this._playing&&(this._startTimeout&&(this._remainingDelay=this._getTime()-this._delayStart,clearTimeout(this._startTimeout)),this._stop(),this.trigger(u,this._getDetails())),this},f.reset=function(){this._stop();var t;for(t in this._storeTarget)this._target[t]=this._storeTarget[t];return this._direction=1,this._loop=this._options.loop||0,this._loopCount=0,this.setProgress(0),this},f.isPlaying=function(){return this._playing},f.getTarget=function(){return this._target},f.setCurrentTime=function(t){return this.setProgress(1e3*t/this._duration),this.getCurrentTime()},f.getCurrentTime=function(){return this.getProgress()*this._duration/1e3},f.setProgress=function(t){return this._progress=Math.min(1,Math.max(0,t)),this._setStartTime(),this._playing||this._setDiff(),this._playing&&1===t?(this._completeProps(),this._onUpdate&&this._onUpdate.call(this,this._getDetails()),this._onDraw&&this._onDraw.call(this,this._getDetails()),this._complete()):(this._updateProps(),this._onUpdate&&this._onUpdate.call(this,this._getDetails()),this._onDraw&&this._onDraw.call(this,this._getDetails())),this.getProgress()},f.getProgress=function(){return this._progress},f._setStartTime=function(){this._startTime=this._getTime()-this.getProgress()*this._duration},f._setDiff=function(){this._propsDiff={};var t=function(e,i,s,n){var o;for(o in e)"object"==typeof e[o]?(i[o]=i[o]||{},n[o]=n[o]||{},t(e[o],i[o],s[o],n[o])):"number"==typeof s[o]?(void 0!==i[o]?s[o]=i[o]:i[o]=s[o],n[o]=e[o]-s[o]):delete e[o]};t(this._propsTo,this._propsFrom,this._target,this._propsDiff)},f._getDetails=function(){return{target:this._target,progress:this.getProgress(),clip:this}},f._start=function(){this._startTimeout=null,this._remainingDelay=0,this._setStartTime(),this._clock.on("update",this._update),this._clock.on("draw",this._draw),this._clock.isRunning()||this._clock.start(),this._setDiff(),this._playing=!0,this._running=!0,this._onStart&&this._onStart.call(this,this._getDetails()),this.trigger(d,this._getDetails())},f._stop=function(){this._playing=!1,this._running=!1,this._clock.off("update",this._update),this._clock.off("draw",this._draw)},f._updateProps=function(){var t=this._ease.getValue(this._progress),e=function(i,s,n,o){var a;for(a in i)"number"!=typeof i[a]?e(i[a],s[a],n[a],o[a]):n[a]=s[a]+o[a]*t};e(this._propsTo,this._propsFrom,this._target,this._propsDiff)},f._completeProps=function(){var t=function(e,i){var s;for(s in e)"number"!=typeof e[s]?t(e[s],i[s]):i[s]=e[s]};t(this._propsTo,this._target)},f._complete=function(){this._isYoyo&&(this._loop>0&&this._loopCount<=this._loop||0===this._loop&&0===this._loopCount)?(this._propsFrom=1===this._direction?this._storePropsTo:this._storePropsFrom,this._propsTo=1===this._direction?this._storePropsFrom:this._storePropsTo,this.setProgress(0),this._direction*=-1,this._direction===-1&&++this._loopCount,this._start()):this._loopCount<this._loop?(++this._loopCount,this.target=this._storeTarget,this.setProgress(0),this._start()):(this._onComplete&&this._onComplete.call(this,this._getDetails()),this.trigger(p,this._getDetails()))},f._update=function(t){this._running&&(this._progress=(t.timeNow-this._startTime)/this._duration,this._progress>=1?(this._progress=1,this._running=!1,this._completeProps()):this._updateProps(),this._onUpdate&&this._onUpdate.call(this,this._getDetails()))},f._draw=function(t){this._onDraw&&this._onDraw.call(this,this._getDetails()),this._running||(this._stop(),1===this._progress&&this._complete())},t.plugins.scroll.clip=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t){a.call(this),this._options=n.extend(this.defaults,t||{}),this._clock=new this._options.clock,this._target=this._options.target,this.setRange(this._options.start,this._options.end),this.setDirection(this._options.direction),this._emitter=this._target,this._scrollChanged=!0,this._position=null,this._progress=0,this._emitter.on("scroll update",this._onScroll.bind(this)),this._clock.on("update",this._onUpdate.bind(this),this),this._clock.on("draw",this._onDraw.bind(this),this),this._clock.start()}t.define("plugins.scroll.ScrollTracker");var a=t.commons.EventEmitter,r=t.plugins.scroll.clock,l=o.prototype=Object.create(a.prototype);l.defaults={start:0,end:0,direction:"Y",clock:r,target:i.window},l.getRangeStart=function(){return this._rangeStart},l.setRangeStart=function(t){this._rangeStart=t,this._updateProgress()},l.getRangeEnd=function(){return this._rangeEnd},l.setRangeEnd=function(t){this._rangeEnd=t,this._updateProgress()},l.setRange=function(t,e){this._rangeStart=t,this._rangeEnd=e,this._updateProgress()},l.getDirection=function(){return this._direction},l.setDirection=function(t){this._direction=t.toUpperCase(),this._direction="X"===this._direction?"X":"Y",this._scrollChanged=!0},l.getPosition=function(){return this._position},l.getProgress=function(){return this._progress},l._updateProgress=function(){this._rangeStart===this._rangeEnd?this._progress=0:this._progress=(this._position-this._rangeStart)/(this._rangeEnd-this._rangeStart)},l._boundByRange=function(t){return this._rangeStart||this._rangeEnd?Math.min(Math.max(t,this._rangeStart),this._rangeEnd):t},l._targetScrollPosition=function(){var t;return this._target[0].getPosition?t=this._target[0].getPosition():(t="X"===this._direction?this._target[0].scrollX||this._target[0].scrollTop:this._target[0].scrollY||this._target[0].scrollTop,"function"==typeof t&&(t=t())),t},l._updateScrollData=function(t){var e,i=this._lastTime||0;return t=n.clone(t),t.delta=t.time-i,t.position=this._boundByRange(this._targetScrollPosition()),e=null===this._position?t.position:this._position,t.positionDelta=t.position-e,t.lastPosition=e,this._position=t.position,this._lastTime=t.time,this._eventData=t},l._onScroll=function(t){this._scrollChanged=!0},l._onUpdate=function(t){var e=null===this._position;if(this._scrollChanged){if(this._updateScrollData(t),!e&&!this._eventData.positionDelta)return void(this._scrollChanged=!1);this._updateProgress(),this._eventData.progress=this._progress,this.trigger("update",this._eventData)}},l._onDraw=function(t){this._scrollChanged&&(this._scrollChanged=!1,this.trigger("draw",this._eventData),this._eventData=null)},t.plugins.scroll.ScrollTracker=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t){a.call(this,t),this._poolSize=this._options.poolSize,this._pool=[],this._targetPosition=null}t.define("plugins.scroll.PooledScrollTracker");var a=t.plugins.scroll.ScrollTracker,r=o.prototype=Object.create(a.prototype);r.defaults.poolSize=20,r._updateScrollData=function(t){return t=a.prototype._updateScrollData.call(this,t),t.target={position:this._position,lastPosition:null===this._targetPosition?this._position:this._targetPosition,positionDelta:this._position-this._targetPosition},this._targetPosition=this._position,this._pushPoolData(t),this._eventData=n.clone(t),this._position=this._eventData.position=Math.round(this._eventData.position),this._eventData},r._pushPoolData=function(t){this._pool.push(t),this._poolSize&&this._pool.length>this._poolSize&&this._pool.shift()},t.plugins.scroll.PooledScrollTracker=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t){a.call(this,t),this._sampleTime=this._options.sampleTime}t.define("plugins.scroll.SmoothScrollTracker");var a=t.plugins.scroll.PooledScrollTracker,r=100,l=o.prototype=Object.create(a.prototype);l.defaults.sampleTime=r,l.smoothing=!1,l._updateScrollData=function(t){return t=a.prototype._updateScrollData.call(this,t),this.smoothing=t.position!==t.target.position,this._position},l._pushPoolData=function(t){var e,i,s=this._sampleTime,n=0,o=0;if(a.prototype._pushPoolData.call(this,t),t.positionDelta){for(o=t.delta,i=this._pool.length-2;i>=0&&(e=this._pool[i],o>s&&(o=s),n+=e.position*o,s-=o,o=e.delta,0!==s);i--);s>0&&(n+=e.position*s,s=0),n+=t.position*(this._sampleTime/3),n/=4*this._sampleTime/3,Math.abs(Math.round(n)-Math.round(t.lastPosition))<2&&(n=t.position>t.lastPosition?Math.min(t.position,n+1):Math.max(t.position,n-1)),t.position=n,t.positionDelta=t.position-t.lastPosition,this._position=t.position}},l._onUpdate=function(t){this.smoothing&&(this._scrollChanged=!0),a.prototype._onUpdate.call(this,t)},t.plugins.scroll.SmoothScrollTracker=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){function o(t,e){l.call(this),this.el=n.isElement(t)?t:t[0],this._options=n.extend(this.defaults,e||{}),this._options.tracker?this.tracker=this._options.tracker:this._options.smooth?this.tracker=new r(n.pick(e,"target","start","end","direction")):this.tracker=new a(n.pick(e,"target","start","end","direction")),this.updateRange(),this.tracker.on("update",this._onUpdate.bind(this),this),this.tracker.on("draw",this._onDraw.bind(this),this),c.on("resize orientationchange",this.updateRange.bind(this))}t.define("plugins.scroll.ElementScrollTracker");var a=t.plugins.scroll.ScrollTracker,r=t.plugins.scroll.SmoothScrollTracker,l=t.commons.EventEmitter,c=i.window,h=t.dom,p=o.prototype=Object.create(l.prototype);p.defaults={startThreshold:0,endThreshold:0,startOffset:0,endOffset:0,smooth:!1},p.updateRange=function(t){var e,i,s,o,a,r=h.getPagePosition(this.el);this._options=n.extend(this._options,t||{}),this._startThreshold=this._options.startThreshold,this._endThreshold=this._options.endThreshold,this._startOffset=this._options.startOffset,this._endOffset=this._options.endOffset,"X"===this.tracker.getDirection()?(e=c.width(),i=r.left,s=r.right):(e=c.height(),i=r.top,s=r.bottom),o=i-this._startThreshold*e+this._startOffset,a=s-this._endThreshold*e+this._endOffset,a>o?this.tracker.setRange(o,a):this.tracker.setRange(a,o)},p.getRangeStart=function(){return this.tracker.getRangeStart()},p.getRangeEnd=function(){return this.tracker.getRangeEnd()},p.getDirection=function(){this.tracker.getDirection()},p.setDirection=function(t){this.tracker.setDirection(t)},p.getProgress=function(){return this.tracker.getProgress()},p.getPosition=function(){return this.tracker.getPosition()},p._onUpdate=function(t){this.trigger("update",t)},p._onDraw=function(t){this.trigger("draw",t)},t.plugins.scroll.ElementScrollTracker=o}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.scroll.ParallaxElement");var o=t.dom.styles,a=t.plugins.scroll.clip,r=t.plugins.scroll.ElementScrollTracker,l=t.device.isChrome,c=function(t,e,i,s,o){var l,c;s=n.extend(this.defaultClipOptions,s),o=n.extend(this.defaultScrollOptions,o),this.el=t,this._translateMultiplier=1,o.el?(l=o.el,o.el=null):l=this.el,this._scrollTracker=s.scrollTracker||new r(l,o),c=n.clone(s.propsFrom),s.clock=this._scrollTracker,s.onDraw=this._draw.bind(this),this._units=s.units,this._target=c,this._propsTo=e,this._propsOff=i,this._clipOptions=s,this._clip=new a(c,1,e,s),this.start()},h=c.prototype;h.defaultClipOptions={ease:"linear",units:{}},h.defaultScrollOptions={smooth:!0,startThreshold:1},h.start=function(){this._clip=new a(this._target,1,this._propsTo,this._clipOptions),this._scrollTracker.on("update",this._update.bind(this),this),this._update()},h.stop=function(){this._scrollTracker.off("update",this._update.bind(this),this)},h.reset=function(){this.stop(),this._clip=new a(this._target,1,this._propsOff,this._clipOptions),this._clip.setProgress(1)},h._update=function(t){var e=t?t.progress:this._scrollTracker.getProgress();this._clip.setCurrentTime(e)},h._draw=function(t){var e,i=n.clone(t.target);this._lastDrawData=t,i.translateY&&(i.translateY=i.translateY*this._translateMultiplier),i.translateX&&(i.translateX=i.translateX*this._translateMultiplier);for(e in this._units)e in i&&(i[e]+=this._units[e]);i.translateZ=i.translateZ||0,l&&this._clipOptions.hasOwnProperty("z")&&this._clipOptions.z===!1&&(i.translateZ=null),o.setStyle(this.el,i)},h.setTranslateMultiplier=function(t){this._translateMultiplier=t||1,this._lastDrawData&&this._draw(this._lastDrawData)},t.plugins.scroll.ParallaxElement=c}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.scroll.ParallaxController");var o=i.window,a=t.plugins.scroll.ParallaxElement,r=.65,l=function(e){this.options=e||{},t.device.isMobile||(this.els=[],this._multiplierEls=[],this.options.items.forEach(this._initializeElement.bind(this)),this._translateMultiplier=1,this._updateTranslateMultiplier(),this.scroll=this.options.scroll||i.window,o.on("resize orientationchange",this._updateTranslateMultiplier.bind(this)))},c=l.prototype;c._updateTranslateMultiplier=function(){var t,e=o.width()<=1068?r:1;if(o.width()<=735)return void this.reset();if(!this._translateMultiplier||this._translateMultiplier!==e)for(this._translateMultiplier=e,t=this._multiplierEls.length-1;t>=0;t--)this._multiplierEls[t].setTranslateMultiplier(e)},c._initializeElement=function(t){var e,i,s,o;(t.selector||t.elem)&&(t.selector?e=document.querySelector(t.selector):t.elem&&(e=n.isElement(t.elem)?t.elem:t.elem[0]),e&&(i=t.clipOptions||{},s=t.scrollOptions||t.clockOptions||{},!i.propsTo&&"to"in t&&(i.propsTo={translateY:t.to},i.propsFrom={translateY:t.from||0},i.propsOff={translateY:t.off||0},i.units={translateY:"px"},t.hasOwnProperty("z")&&(i.z=t.z)),t.scrollTracker&&(i.scrollTracker=t.scrollTracker),this.options.scroll&&!s.target&&(s.target=this.options.scroll),function(n){setTimeout(function(){o=new a(e,i.propsTo,i.propsOff,i,s),n.els.push(o),t.useMediumMultiplier!==!1&&n._multiplierEls.push(o)},0)}(this)))},c.start=function(){var t;for(t=0;t<this.els.length;t++)this.els[t].start()},c.stop=function(){var t;for(t=0;t<this.els.length;t++)this.els[t].stop()},c.reset=function(){var t;for(t=0;t<this.els.length;t++)this.els[t].reset()},c.destroy=function(){this.stop()},t.plugins.scroll.ParallaxController=l}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.scroll.parallax"),t.plugins.scroll.parallax=function(t){t&&(this.ready=!1,this.scroll=e(t.scroll),this.scope=t.container?e(t.container):null,this.scopeOffsetTop=this.scope?t.container.offset().top:null,this.scopeHeight=this.scope?t.container.height():null,this.fade=t.fade,this._items=t.items,this.items=[])},t.plugins.scroll.parallax.prototype={start:function(t){var e=this;this.ready&&!t||this.render(),this.items.length&&!function t(){e.raf=n.raf(t),e.ready&&e.onScroll(e)}()},render:function(){var t=this;this.items=[],this._items&&n.each(this._items,function(e,s){t.items.push(e),t.items[s].cHeights={large:4e3,medium:3e3,small:2800},t.items[s].it=0,t.scope?(t.items[s].offset={top:t.scopeOffsetTop,height:t.scopeHeight},t.items[s].scope=t.scope):!t.scope&&e.container&&(t.items[s].scope=i.body.find(e.container),t.items[s].offset={top:t.items[s].scope.offset().top,height:t.items[s].scope.height()}),t.items[s].$elem=t.items[s].scope.find(e.selector),"none"==t.items[s].$elem.css("transform")&&t.items[s].$elem.css("transform","translateZ(0)")}),this.ready=!0},onScroll:function(e){var i=e.scroll[0].scrollTop||e.scroll[0].scrollY,s=i+t.sizes.height;e.items.forEach(function(n,o){var a=n.viewports.large,r=i-n.offset.top;if(s>n.offset.top&&i<n.offset.top+n.offset.height+10){if(n.offset.top>t.sizes.height&&(r+=t.sizes.height),n.cHeight=1-n.offset.height/n.cHeights.large,n.progress=r/n.offset.height,n.t=e.smoothstep(a.fromTime,a.toTime,n.progress),n.t*=n.cHeight,n.t=e.clamp(n.t,0,1),n.t+=n.it,n.it<-1e-6?n.it*=.955:n.it=0,n.y=e.lerp(a.fromY,a.toY,n.t),e.fade){var l=n.progress;n.offset.top>t.sizes.height&&(l-=1),l<1.01&&l>-1e-6&&(e.fade.in&&e.fade.in.elem.css("opacity",l),e.fade.out&&e.fade.out.elem.css("opacity",1-l))}var c=n.$elem.css("transform").match(/matrix\(\d+, ?\d+, ?\d+, ?\d+, ?(\-?\d+), ?(\-?\d+)/);c&&c[1]&&(n.x=c[1],e.update(n.$elem,n.x,n.y))}})},update:function(t,e,i){t.css("transform","translate3d("+e+"px, "+i+"px, 0)")},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},normalize:function(t,e,i){return(t-e)/(i-e)},smoothstep:function(t,e,i){var s=this.clamp(this.normalize(i,t,e),0,1);return s*s*(3-2*s)},lerp:function(t,e,i){return t+(e-t)*i},destroy:function(){n.caf(this.raf),this.ready=!1}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.scroll.refreshFix"),t.plugins.scroll.refreshFix=function(t){t&&(this.active=!1,this.scroll=n.isElement(t)?t:t[0],this.reset(),this.init())},t.plugins.scroll.refreshFix.prototype={init:function(){this.active||(this.scroll.addEventListener("touchstart",this.touchstartHandler.bind(this),!1),this.scroll.addEventListener("touchmove",this.touchmoveHandler.bind(this),!1),this.active=!0)},touchstartHandler:function(t){1==t.touches.length&&(this.lastTouchY=t.touches[0].clientY,this.maybePreventPullToRefresh=0==window.pageYOffset)},touchmoveHandler:function(t){var e=t.touches[0].clientY,i=e-this.lastTouchY;if(this.lastTouchY=e,this.maybePreventPullToRefresh&&(this.maybePreventPullToRefresh=!1,i>0))return void t.preventDefault()},reset:function(){this.maybePreventPullToRefresh=!1,this.lastTouchY=0},destroy:function(){this.active&&(this.scroll.removeEventListener("touchstart",this.touchstartHandler),this.scroll.removeEventListener("touchmove",this.touchmoveHandler),this.reset(),this.active=!1)}}}(app,$,app.$dom,app.events,app.utils),function(t,e,i,s,n){t.define("plugins.scroll.slider"),t.plugins.scroll.slider=function(t,i){t&&(this.active=!1,this.scope=e(t),this.options=i,this.index=0,this.prevIndex=0,this.prevSlide=null,this.currentSlide=null,this.scrolling=!1,this.slides=[])},t.plugins.scroll.slider.prototype={init:function(i){var s=this;if(!this.active&&this.scope.length&&this.options.items){var o={navbar:{el:".section__slider__navbar",align:"right",pos:"top"},container:".section__slider__container",slide:".section__slider__item",slideId:"_id",select:".section__slider__navbar__select",dataSlide:"data-slide",dataItem:"data-item",hideSlides:!0};this.options&&n.extend(o,this.options),this.options=o,this.navbar=this.scope.find(o.navbar.el),this.container=this.scope.find(o.container),this.title=e('<span class="section__slider__navbar__title">').appendTo(this.navbar),this.navbar.attr({"data-select":!0,"data-align":o.navbar.align,"data-pos":o.navbar.pos}),this.container.find(o.slide).each(function(e){var i=$$(this);i.attr(o.dataItem,e+1),o.scroll&&(s.slides.push({index:e,id:o.items[e][o.slideId],title:o.items[e].title,el:i,scroll:new t.plugins.scroll.content(i,{autoScroll:!0})}),s.slides[e].scroll.init()),o.hideSlides&&e>0&&i.css("display","none")}),t.plugins.eventsEmitter&&t.plugins.eventsEmitter.init(this),this.select=e('<select class="section__slider__navbar__select">'),n.each(this.slides,function(t){s.select.append('<option value="'+t.id+'">'+t.title+"</option>")}),this.navbar.append(this.select),this.onSelect(),this.nav(void 0!==i?i:this.slides[0].id),this.active=!0}},onSelect:function(){var t=this;this.select.on("change",function(e){t.nav(e.currentTarget.value)})},nav:function(t){var e=this,i=n.findWhere(this.slides,{id:t});i&&(this.title[0].innerHTML=i.title,this.container[0].setAttribute(this.options.dataSlide,i.index+1),this.trigger("change",t,i.title),this.scrolling=!0,this.prevIndex=this.index,this.prevSlide=this.currentSlide,this.index=i.index,this.currentSlide=i,this.options.hideSlides&&(i.el.css("display","block"),this.prevSlide&&n.onEndTransition(this.container[0],function(){e.prevSlide.el.css("display","none"),e.refresh()})))},refresh:function(){this.options.scroll&&n.each(this.slides,function(t){t.scroll.refresh()})},destroy:function(){this.navbar&&this.navbar.empty(),this.options.scroll&&n.each(this.slides,function(t){t.scroll.destroy()}),this.destroyEvents(),this.active=!1}}}(app,$,app.$dom,app.events,app.utils);